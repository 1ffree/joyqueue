<?xml version="1.0" encoding="UTF-8"?>

<configuration>
    <url>http://localhost:3000</url>
    <dashboards>
        <dashboard>
            <uid>pd</uid><!--unique-->
            <title>produce-detail</title>
            <url>/d/pd/producer-detail</url>
            <metric_variables>
                <metric_variable>
                    <name>metrics</name>
                    <target>metrics:$uid:$granularity:*</target>
                    <metrics>
                        <metric>
                            <name>入队消息条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_enqueue</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_enqueue</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_enqueue</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>入队消息流量（Byte）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_enqueue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_enqueue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_enqueue_size</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>入队TP99（ms）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_enqueue_tp99</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_enqueue_tp99</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_enqueue_tp99</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>入队TP90（ms）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_enqueue_tp90</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_enqueue_tp90</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_enqueue_tp90</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>入队Max（ms）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_enqueue_max</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_enqueue_max</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_enqueue_max</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>平均发送时间（ms）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_enqueue_avg</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_enqueue_avg</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_enqueue_avg</code>
                                </granularity>
                            </granularities>
                        </metric>
                    </metrics>
                </metric_variable>
            </metric_variables>
            <variables>brokers</variables>
        </dashboard>
        <dashboard>
            <uid>cd</uid><!--unique-->
            <title>consumer-detail</title>
            <url>/d/cd/consumer-detail</url>
            <metric_variables>
                <metric_variable>
                    <name>metrics</name>
                    <target>metrics:$uid:$granularity:*</target>
                    <metrics>
                        <metric>
                            <name>出队消息条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_dequeue</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_dequeue</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_dequeue</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>出队消息流量（Byte）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_dequeue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_dequeue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_dequeue_size</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>出队TP99（ms）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_dequeue_tp99</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_dequeue_tp99</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_dequeue_tp99</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>出队TP90（ms）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_dequeue_tp90</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_dequeue_tp90</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_dequeue_tp90</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>出队Max（ms）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_dequeue_max</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_dequeue_max</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_dequeue_max</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>平均发送时间（ms）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>app_slice_dequeue_avg</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>app_slice_dequeue_avg</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>app_slice_dequeue_avg</code>
                                </granularity>
                            </granularities>
                        </metric>
                    </metrics>
                </metric_variable>
            </metric_variables>
            <variables>brokers</variables>
        </dashboard>
        <dashboard>
            <uid>broker</uid><!--unique-->
            <title>broker</title>
            <url>/d/broker/broker</url>
            <metric_variables>
                <metric_variable>
                    <name>metrics</name>
                    <target>metrics:$uid:$granularity:*</target>
                    <metrics>
                        <metric>
                            <name>入队消息条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>broker_slice_enqueue</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>broker_slice_enqueue</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>broker_slice_enqueue</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>入队消息流量（Byte）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>broker_slice_enqueue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>broker_slice_enqueue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>broker_slice_enqueue_size</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>出队消息条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>broker_slice_dequeue</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>broker_slice_dequeue</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>broker_slice_dequeue</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>出队消息流量（Byte）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>broker_slice_dequeue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>broker_slice_dequeue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>broker_slice_dequeue_size</code>
                                </granularity>
                            </granularities>
                        </metric>
                    </metrics>
                </metric_variable>
            </metric_variables>
            <variables>brokers</variables>
        </dashboard>
        <dashboard>
            <uid>pt</uid><!--unique-->
            <title>producer-total</title>
            <url>/d/pt/producer-total</url>
            <metric_variables>
                <metric_variable>
                    <name>metrics</name>
                    <target>metrics:$uid:$granularity:*</target>
                    <metrics>
                        <metric>
                            <name>入队消息条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>producer_slice_enqueue</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>producer_hour_enqueue</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>producer_day_enqueue</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>入队消息流量</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>producer_slice_enqueue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>producer_hour_enqueue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>producer_day_enqueue_size</code>
                                </granularity>
                            </granularities>
                        </metric>
                    </metrics>
                </metric_variable>
            </metric_variables>
        </dashboard>
        <dashboard>
            <uid>ct</uid><!--unique-->
            <title>consumer-total</title>
            <url>/d/ct/consumer-total</url>
            <metric_variables>
                <metric_variable>
                    <name>metrics</name>
                    <target>metrics:$uid:$granularity:*</target>
                    <metrics>
                        <metric>
                            <name>出队消息条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>consumer_slice_dequeue</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>consumer_hour_dequeue</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>consumer_day_dequeue</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>出队消息流量</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>consumer_slice_dequeue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>consumer_hour_dequeue_size</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>consumer_day_dequeue_size</code>
                                </granularity>
                            </granularities>
                        </metric>
                    </metrics>
                </metric_variable>
            </metric_variables>
        </dashboard>
        <dashboard>
            <uid>s4</uid><!--unique-->
            <title>jmq4-realtime-statistics</title>
            <url>/d/s4/jmq4-realtime-statistics</url>
            <metric_variables>
                <metric_variable>
                    <name>metrics</name>
                    <target>metrics:$uid:$granularity:*</target>
                    <metrics>
                        <metric>
                            <name>生产者入队消息总条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>producer_slice_enqueue_total</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>producer_slice_enqueue_total</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>producer_slice_enqueue_total</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>生产者入队消息总流量（Byte）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>producer_slice_enqueue_size_total</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>producer_slice_enqueue_size_total </code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>producer_slice_enqueue_size_total</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>消费者出队消息总条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>consumer_slice_dequeue_total</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>consumer_slice_dequeue_total</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>consumer_slice_dequeue_total</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>消费者出队消息总流量（Byte）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>consumer_slice_dequeue_size_total</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>consumer_slice_dequeue_size_total</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>consumer_slice_dequeue_size_total</code>
                                </granularity>
                            </granularities>
                        </metric>
                    </metrics>
                </metric_variable>
            </metric_variables>
        </dashboard>
        <dashboard>
            <uid>s2</uid><!--unique-->
            <title>jmq2-realtime-statistics</title>
            <url>/d/s2/jmq2-realtime-statistics</url>
            <metric_variables>
                <metric_variable>
                    <name>metrics</name>
                    <target>metrics:$uid:$granularity:*</target>
                    <metrics>
                        <metric>
                            <name>生产者入队消息总条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>producer2_slice_enqueue_total</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>producer2_slice_enqueue_total</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>producer2_slice_enqueue_total</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>生产者入队消息总流量(Byte)</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>producer2_slice_enqueue_size_total</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>producer2_slice_enqueue_size_total</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>producer2_slice_enqueue_size_total</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>消费者出队消息总条数</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>consumer2_slice_dequeue_total</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>consumer2_slice_dequeue_total</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>consumer2_slice_dequeue_total</code>
                                </granularity>
                            </granularities>
                        </metric>
                        <metric>
                            <name>消费者出队消息总流量（Byte）</name><!--unique in one chart-->
                            <granularities>
                                <granularity>
                                    <name>1min</name>
                                    <code>consumer2_slice_dequeue_size_total</code>
                                </granularity>
                                <granularity>
                                    <name>1hour</name>
                                    <code>consumer2_slice_dequeue_size_total</code>
                                </granularity>
                                <granularity>
                                    <name>1day</name>
                                    <code>consumer2_slice_dequeue_size_total</code>
                                </granularity>
                            </granularities>
                        </metric>
                    </metrics>
                </metric_variable>
            </metric_variables>
        </dashboard>
    </dashboards>
    <variables>
        <variable>
            <name>title</name><!--unique-->
            <target>title:$uid:$metrics:*</target>
            <query>
                <model>metric</model>
                <parameters>
                    <parameter>
                        <name>code</name>
                        <target_index>2</target_index>
                        <arg_index>0</arg_index>
                    </parameter>
                </parameters>
                <bean>metricService</bean><!--default model+'Service'-->
                <method>findByCode</method><!--default 'findBy'+parameters order by arg_index-->
            </query>
            <result>
                <type>string</type>
                <format>$name</format>
            </result>
        </variable>
        <variable>
            <name>brokers</name>
            <target>brokers:$uid:$topic:*</target>
            <query>
                <model>broker</model>
                <parameters>
                    <parameter>
                        <name>topic</name>
                        <target_index>2</target_index>
                        <arg_index>0</arg_index>
                    </parameter>
                </parameters>
                <bean>brokerService</bean>
                <method>findByTopic</method>
            </query>
            <result>
                <type>list</type>
                <format>$ip:$port[$id]</format>
            </result>
        </variable>
        <variable>
            <name>brokerIdsStr</name>
            <target>brokerIdsStr:$uid:$topic:*</target>
            <query>
                <model>broker</model>
                <parameters>
                    <parameter>
                        <name>topic</name>
                        <target_index>2</target_index>
                        <arg_index>0</arg_index>
                    </parameter>
                </parameters>
                <bean>brokerService</bean>
                <method>findByTopic</method>
            </query>
            <result>
                <type>string</type>
                <delimiter>|</delimiter>
                <format>$id</format>
            </result>
        </variable>
    </variables>
</configuration>