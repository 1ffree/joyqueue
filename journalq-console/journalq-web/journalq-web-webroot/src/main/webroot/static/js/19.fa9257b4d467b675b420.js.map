{"version":3,"sources":["webpack:///src/views/topic/partitionGroup.vue","webpack:///./src/views/topic/partitionGroup.vue?14fa","webpack:///./src/views/topic/partitionGroup.vue"],"names":["partitionGroup","name","components","GroupPosition","groupPosition","myTable","myDialog","groupDetail","groupScale","groupMerge","groupNew","mixins","crud","props","showHostChart","type","Boolean","default","showBrokerChart","data","urls","search","del","getBroker","addPartition","removePartition","getMonitor","getUrl","searchData","topic","id","this","$route","query","code","namespace","namespaceId","namespaceCode","keyword","tableData","rowData","colData","title","width","key","render","h","params","label","item","electType","formatter","leader","ip","btns","txt","method","groupDetailDialog","visible","showFooter","groupDetailDialogData","positionDialog","positionDialogData","groupScaleDialog","groupScaleDialogData","groupMergeDialog","groupMergeDialogData","addPartitionDialog","addPartitionDialogData","removePartitionDialog","removePartitionDialogData","groupNewDialog","groupNewDialogData","replicaGroups","partitions","newGroupData","computed","methods","getList","_this2","showTablePin","pagination","page","size","apiRequest","post","urlOrigin","then","totalRecord","length","total","i","_this3","get","$set","goBrokerChart","_this4","url","indexOf","endsWith","Object","common","window","open","goHostChart","_this5","goDetail","groupNo","groupDetailConfirm","groupDetailCancel","goPosition","positionConfirm","positionCancel","groupScaleConfirm","groupScaleCancel","groupNewConfirm","groupNewCancel","groupMergeConfirm","groupMergeCancel","addPartitionConfirm","_this6","partitionsCount","addPartitionCancel","removePartitionConfirm","_this7","removePartitionCancel","_this","$Dialog","confirm","content","catch","topicUpdate","$emit","afterDel","mounted","topic_partitionGroup","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","click","_v","staticStyle","margin-left","_t","_e","showPin","on-size-change","handleSizeChange","on-current-change","handleCurrentChange","on-view-detail","on-scale","on-merge","on-del","on-addPartition","on-removePartition","on-position","dialog","on-dialog-confirm","$event","on-dialog-cancel","placeholder","model","value","callback","$$v","expression","slot","on-partition-group-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/19.fa9257b4d467b675b420.js","sourcesContent":["<template>\n  <div>\n    <div class=\"ml20 mt30\">\n      <d-button type=\"primary\" @click=\"groupNew\" class=\"left mr10\">\n        扩容\n        <icon name=\"plus-circle\" style=\"margin-left: 5px;\"/>\n      </d-button>\n      <slot name=\"extendBtns\"></slot>\n      <d-button type=\"primary\" v-if=\"showBrokerChart\" @click=\"goBrokerChart\" class=\"left mr10\">\n        Broker监控\n        <icon name=\"bar-chart\" style=\"margin-left: 5px;\"/>\n      </d-button>\n      <d-button type=\"primary\" v-if=\"showHostChart\" @click=\"goHostChart\" class=\"left mr10\">\n        主机监控\n        <icon name=\"bar-chart\" style=\"margin-left: 5px;\"/>\n      </d-button>\n    </div>\n    <my-table :data=\"tableData\" :showPin=\"showTablePin\" :page=\"page\" @on-size-change=\"handleSizeChange\"\n              @on-current-change=\"handleCurrentChange\" @on-view-detail=\"goDetail\" @on-scale=\"groupScale\"\n              @on-merge=\"groupMerge\" @on-del=\"del\" @on-addPartition=\"addPartition\" @on-removePartition=\"removePartition\" @on-position=\"goPosition\">\n    </my-table>\n\n    <!--详情-->\n    <my-dialog :dialog=\"groupDetailDialog\" @on-dialog-confirm=\"groupDetailConfirm()\" @on-dialog-cancel=\"groupDetailCancel()\">\n      <group-detail :data=\"groupDetailDialogData\"></group-detail>\n    </my-dialog>\n    <!--添加节点-->\n    <my-dialog :dialog=\"groupScaleDialog\" @on-dialog-confirm=\"groupScaleConfirm()\" @on-dialog-cancel=\"groupScaleCancel()\" >\n      <group-scale :data=\"groupScaleDialogData\"  ></group-scale>\n    </my-dialog>\n    <!--移除节点-->\n    <my-dialog :dialog=\"groupMergeDialog\" @on-dialog-confirm=\"groupMergeConfirm()\" @on-dialog-cancel=\"groupMergeCancel()\"  >\n      <group-merge :data=\"groupMergeDialogData\"></group-merge>\n    </my-dialog>\n    <!--主从同步-->\n    <my-dialog :dialog=\"positionDialog\" @on-dialog-confirm=\"positionConfirm()\" @on-dialog-cancel=\"positionCancel()\">\n      <group-position :data=\"positionDialogData\"></group-position>\n    </my-dialog>\n    <!--增加分区数-->\n    <my-dialog :dialog=\"addPartitionDialog\" @on-dialog-confirm=\"addPartitionConfirm()\" @on-dialog-cancel=\"addPartitionCancel()\"  >\n      <d-input v-model=\"addPartitionDialogData.partitionCount\" placeholder=\"请输入增加分区数\" style=\"width: 400px\">\n        <span slot=\"prepend\">增加分区数</span>\n      </d-input>\n    </my-dialog>\n    <!--减少分区数-->\n    <my-dialog :dialog=\"removePartitionDialog\" @on-dialog-confirm=\"removePartitionConfirm()\" @on-dialog-cancel=\"removePartitionCancel()\"  >\n      <d-input v-model=\"removePartitionDialogData.partitionCount\" placeholder=\"请输入减少分区数\" style=\"width: 400px\">\n        <span slot=\"prepend\">减少分区数</span>\n      </d-input>\n    </my-dialog>\n    <!--扩容-->\n    <my-dialog :dialog=\"groupNewDialog\" @on-dialog-confirm=\"groupNewConfirm()\" @on-dialog-cancel=\"groupNewCancel()\">\n      <group-new :data=\"groupNewDialogData\" @on-dialog-confirm=\"groupNewConfirm()\" @on-dialog-cancel=\"groupNewCancel()\"  @on-partition-group-change=\"topicUpdate\"></group-new>\n    </my-dialog>\n  </div>\n</template>\n\n<script>\nimport apiRequest from '../../utils/apiRequest.js'\nimport myTable from '../../components/common/myTable.vue'\nimport myDialog from '../../components/common/myDialog.vue'\nimport groupDetail from './groupDetail.vue'\nimport groupScale from './groupScale.vue'\nimport GroupPosition from './groupPosition.vue'\nimport groupMerge from './groupMerge.vue'\nimport groupNew from './groupNew.vue'\nimport crud from '../../mixins/crud.js'\nimport {getTopicCode} from '../../utils/common.js'\n\nexport default {\n  name: 'partitionGroup',\n  components: {\n    GroupPosition,\n    myTable,\n    myDialog,\n    groupDetail,\n    groupScale,\n    groupMerge,\n    groupNew\n  },\n  mixins: [ crud ],\n  props: {\n    showHostChart: {\n      type: Boolean,\n      default: false\n    },\n    showBrokerChart: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data () {\n    return {\n      urls: {\n        search: `/partitionGroup/search`,\n        del: `/partitionGroup/delete`,\n        getBroker: `/broker/get`,\n        addPartition: `/partitionGroup/addPartition`,\n        removePartition: `/partitionGroup/removePartition`,\n        getMonitor: `/monitor`,\n        getUrl: `/grafana/getRedirectUrl`\n      },\n      searchData: {\n        topic: {\n          id: this.$route.query.id,\n          code: this.$route.query.code\n        },\n        namespace: {\n          id: this.$route.query.namespaceId,\n          code: this.$route.query.namespaceCode\n        },\n        keyword: ''\n      },\n      tableData: {\n        rowData: [],\n        colData: [\n          {\n            title: 'group',\n            width: '2%',\n            key: 'groupNo'\n          },\n          {\n            title: 'partitions',\n            width: '15%',\n            key: 'partitions'\n          },\n          {\n            title: '选举类型',\n            width: '5%',\n            key: 'electType',\n            render: (h, params) => {\n              let label\n              switch (params.item.electType) {\n                case 0:\n                  label = 'raft'\n                  break\n                case 1:\n                  label = 'fix'\n                  break\n              }\n              return h('label', {}, label)\n            }\n          },\n          {\n            title: '副本数',\n            width: '2%',\n            key: 'replicas'\n          },\n          {\n            title: '当前leader',\n            width: '15%',\n            key: 'ip',\n            formatter (item) {\n              return `${item.leader}:${item.ip}`\n            }\n          },\n          {\n            title: '推荐leader',\n            width: '10%',\n            key: 'recLeader'\n          },\n          {\n            title: 'isr',\n            key: 'isr'\n          },\n          {\n            title: 'term',\n            width: '2%',\n            key: 'term'\n          }\n        ],\n        btns: [\n          {\n            txt: '详情',\n            method: 'on-view-detail'\n          },\n          {\n            txt: '增加副本数',\n            method: 'on-scale'\n          },\n          {\n            txt: '减副本数',\n            method: 'on-merge'\n          },\n          {\n            txt: '删除',\n            method: 'on-del'\n          },\n          {\n            txt: '增加分区',\n            method: 'on-addPartition'\n          },\n          {\n            txt: '减少分区',\n            method: 'on-removePartition'\n          },\n          {\n            txt: '主从同步监控',\n            method: 'on-position'\n          }\n        ]\n      },\n      groupDetailDialog: {\n        visible: false,\n        title: '详情',\n        width: 800,\n        showFooter: false\n      },\n      groupDetailDialogData: {},\n      positionDialog: {\n        visible: false,\n        title: '主从同步监控',\n        width: 800,\n        showFooter: false\n      },\n      positionDialogData: {},\n      groupScaleDialog: {\n        visible: false,\n        title: '增加副本',\n        width: 800,\n        showFooter: false\n      },\n      groupScaleDialogData: {},\n      groupMergeDialog: {\n        visible: false,\n        title: '减少副本',\n        width: 800,\n        showFooter: false\n      },\n      groupMergeDialogData: {},\n      addPartitionDialog: {\n        visible: false,\n        title: '增加分区数',\n        width: 500,\n        showFooter: true\n      },\n      addPartitionDialogData: {},\n      removePartitionDialog: {\n        visible: false,\n        title: '减少分区数',\n        width: 800,\n        showFooter: true\n      },\n      removePartitionDialogData: {},\n      groupNewDialog: {\n        visible: false,\n        title: '详情',\n        width: 800,\n        showFooter: false\n      },\n      groupNewDialogData: {\n        topic: this.$route.query.topic,\n        namespace: this.$route.query.namespace,\n        electType: 0,\n        replicaGroups: [],\n        partitions: 0\n      },\n      newGroupData: {\n      }\n    }\n  },\n  computed: {\n  },\n  methods: {\n    // 查询\n    getList () {\n      this.showTablePin = true\n      let data = {\n        pagination: {\n          page: this.page.page,\n          size: this.page.size\n        },\n        query: {\n          topic: this.searchData.topic,\n          namespace: this.searchData.namespace,\n          keyword: this.searchData.keyword\n        }\n      }\n      apiRequest.post(this.urlOrigin.search, {}, data).then((data) => {\n        data.data = data.data || []\n        data.pagination = data.pagination || {\n          totalRecord: data.data.length\n        }\n        this.page.total = data.pagination.totalRecord\n        this.page.page = data.pagination.page\n        this.page.size = data.pagination.size\n        this.tableData.rowData = data.data\n        for (var i = 0; i < this.tableData.rowData.length; i++) {\n          this.getBroker(this.tableData.rowData, i)\n        }\n        this.showTablePin = false\n      })\n    },\n    getBroker (rowData, i) {\n      apiRequest.get(this.urlOrigin.getBroker + '/' + rowData[i].leader).then((data) => {\n        this.tableData.rowData[i].ip = data.data.ip\n        this.$set(this.tableData.rowData, i, this.tableData.rowData[i])\n      })\n    },\n    goBrokerChart () {\n      apiRequest.get(this.urls.getUrl + '/broker', {}, {}).then((data) => {\n        let url = data.data || ''\n        if (url.indexOf('?') < 0) {\n          url += '?'\n        } else if (!url.endsWith('?')) {\n          url += '&'\n        }\n        url = url + 'var-topic=' + getTopicCode(this.searchData.topic, this.searchData.namespace)\n        window.open(url)\n      })\n    },\n    goHostChart () {\n      apiRequest.get(this.urls.getUrl + '/host', {}, {}).then((data) => {\n        let url = data.data || ''\n        if (url.indexOf('?') < 0) {\n          url += '?'\n        } else if (!url.endsWith('?')) {\n          url += '&'\n        }\n        url = url + 'var-topic=' + getTopicCode(this.searchData.topic, this.searchData.namespace)\n        window.open(url)\n      })\n    },\n    goDetail (item) {\n      this.groupDetailDialogData = {groupNo: item.groupNo, topic: this.searchData.topic, namespace: this.searchData.namespace}\n      this.groupDetailDialog.visible = true\n    },\n    groupDetailConfirm () {\n\n    },\n    groupDetailCancel () {\n      this.groupDetailDialog.visible = false\n    },\n    goPosition (item) {\n      this.positionDialogData = {groupNo: item.groupNo, topic: this.searchData.topic, namespace: this.searchData.namespace}\n      this.positionDialog.visible = true\n    },\n    positionConfirm () {\n\n    },\n    positionCancel () {\n      this.positionDialog.visible = false\n    },\n    groupScale (item) {\n      this.groupScaleDialogData = {groupNo: item.groupNo, topic: {id: item.topic.id, code: item.topic.code}, namespace: {id: item.namespace.id, code: item.namespace.code}}\n      this.groupScaleDialog.visible = true\n    },\n    groupScaleConfirm () {\n\n    },\n    groupScaleCancel () {\n      this.groupScaleDialog.visible = false\n    },\n    groupNewConfirm () {\n\n    },\n    groupNewCancel () {\n      this.groupNewDialog.visible = false\n      this.getList()\n    },\n    groupNew () {\n      this.groupNewDialogData = {topic: this.searchData.topic, namespace: this.searchData.namespace}\n      this.groupNewDialog.visible = true\n    },\n    groupMerge (item) {\n      this.groupMergeDialog.visible = true\n      this.groupMergeDialogData = {groupNo: item.groupNo, topic: {id: item.topic.id, code: item.topic.code}, namespace: {id: item.namespace.id, code: item.namespace.code}}\n    },\n    groupMergeConfirm () {\n\n    },\n    groupMergeCancel () {\n      this.groupMergeDialog.visible = false\n      this.getList()\n    },\n    addPartition (item) {\n      this.addPartitionDialog.visible = true\n      this.addPartitionDialogData = item\n    },\n    addPartitionConfirm () {\n      if (this.addPartitionDialogData.partitionsCount <= 0) {\n        return\n      }\n      apiRequest.post(this.urls.addPartition, {}, this.addPartitionDialogData).then(() => {\n        this.addPartitionDialog.visible = false\n        this.getList()\n      })\n    },\n    addPartitionCancel () {\n      this.addPartitionDialog.visible = false\n    },\n    removePartition (item) {\n      this.removePartitionDialog.visible = true\n      this.removePartitionDialogData = item\n    },\n    removePartitionConfirm () {\n      if (this.removePartitionDialogData.partitionsCount <= 0) {\n        return\n      }\n      apiRequest.post(this.urls.removePartition, {}, this.removePartitionDialogData).then((data) => {\n        this.removePartitionDialog.visible = false\n        this.getList()\n      })\n    },\n    removePartitionCancel () {\n      this.removePartitionDialog.visible = false\n    },\n    del (item) {\n      let _this = this\n      this.$Dialog.confirm({\n        title: '提示',\n        content: '确定要删除吗？'\n      }).then(() => {\n        var data = item\n        apiRequest.post(_this.urls.del, {}, data).then(() => {\n          _this.getList()\n        })\n      }).catch(() => {\n      })\n    },\n    topicUpdate () {\n      this.$emit('on-partition-group-change')\n    },\n    afterDel () {\n      this.topicUpdate()\n    }\n  },\n  mounted () {\n    // this.getList();\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .label{text-align: right; line-height: 32px;}\n  .val{}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/topic/partitionGroup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"ml20 mt30\"},[_c('d-button',{staticClass:\"left mr10\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.groupNew}},[_vm._v(\"\\n      扩容\\n      \"),_c('icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":\"plus-circle\"}})],1),_vm._v(\" \"),_vm._t(\"extendBtns\"),_vm._v(\" \"),(_vm.showBrokerChart)?_c('d-button',{staticClass:\"left mr10\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goBrokerChart}},[_vm._v(\"\\n      Broker监控\\n      \"),_c('icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":\"bar-chart\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.showHostChart)?_c('d-button',{staticClass:\"left mr10\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goHostChart}},[_vm._v(\"\\n      主机监控\\n      \"),_c('icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":\"bar-chart\"}})],1):_vm._e()],2),_vm._v(\" \"),_c('my-table',{attrs:{\"data\":_vm.tableData,\"showPin\":_vm.showTablePin,\"page\":_vm.page},on:{\"on-size-change\":_vm.handleSizeChange,\"on-current-change\":_vm.handleCurrentChange,\"on-view-detail\":_vm.goDetail,\"on-scale\":_vm.groupScale,\"on-merge\":_vm.groupMerge,\"on-del\":_vm.del,\"on-addPartition\":_vm.addPartition,\"on-removePartition\":_vm.removePartition,\"on-position\":_vm.goPosition}}),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.groupDetailDialog},on:{\"on-dialog-confirm\":function($event){return _vm.groupDetailConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupDetailCancel()}}},[_c('group-detail',{attrs:{\"data\":_vm.groupDetailDialogData}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.groupScaleDialog},on:{\"on-dialog-confirm\":function($event){return _vm.groupScaleConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupScaleCancel()}}},[_c('group-scale',{attrs:{\"data\":_vm.groupScaleDialogData}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.groupMergeDialog},on:{\"on-dialog-confirm\":function($event){return _vm.groupMergeConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupMergeCancel()}}},[_c('group-merge',{attrs:{\"data\":_vm.groupMergeDialogData}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.positionDialog},on:{\"on-dialog-confirm\":function($event){return _vm.positionConfirm()},\"on-dialog-cancel\":function($event){return _vm.positionCancel()}}},[_c('group-position',{attrs:{\"data\":_vm.positionDialogData}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.addPartitionDialog},on:{\"on-dialog-confirm\":function($event){return _vm.addPartitionConfirm()},\"on-dialog-cancel\":function($event){return _vm.addPartitionCancel()}}},[_c('d-input',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请输入增加分区数\"},model:{value:(_vm.addPartitionDialogData.partitionCount),callback:function ($$v) {_vm.$set(_vm.addPartitionDialogData, \"partitionCount\", $$v)},expression:\"addPartitionDialogData.partitionCount\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"增加分区数\")])])],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.removePartitionDialog},on:{\"on-dialog-confirm\":function($event){return _vm.removePartitionConfirm()},\"on-dialog-cancel\":function($event){return _vm.removePartitionCancel()}}},[_c('d-input',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请输入减少分区数\"},model:{value:(_vm.removePartitionDialogData.partitionCount),callback:function ($$v) {_vm.$set(_vm.removePartitionDialogData, \"partitionCount\", $$v)},expression:\"removePartitionDialogData.partitionCount\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"减少分区数\")])])],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.groupNewDialog},on:{\"on-dialog-confirm\":function($event){return _vm.groupNewConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupNewCancel()}}},[_c('group-new',{attrs:{\"data\":_vm.groupNewDialogData},on:{\"on-dialog-confirm\":function($event){return _vm.groupNewConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupNewCancel()},\"on-partition-group-change\":_vm.topicUpdate}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9cd87206\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/topic/partitionGroup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9cd87206\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./partitionGroup.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./partitionGroup.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./partitionGroup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9cd87206\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./partitionGroup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-9cd87206\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/topic/partitionGroup.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}