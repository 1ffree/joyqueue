webpackJsonp([0],{"+Ohd":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("1a0f"),o=a("T0gc"),n=a("95hR"),r={name:"group-detail",components:{myTable:o.a},props:{data:{type:Object,default:function(){return{}}}},mixins:[n.a],data:function(){return{partitionGroup:{},urls:{search:"/partitionGroupReplica/search",del:"/partitionGroupReplica/delete",leader:"/partitionGroupReplica/leader"},searchData:{keyword:""},tableData:{rowData:[{}],colData:[{title:"brokerId",key:"brokerId"},{title:"分组",key:"groupNo"},{title:"IP",key:"broker.ip"},{title:"端口",key:"broker.port"},{title:"状态",key:"role",render:function(t,e){var a=void 0;switch(e.item.role){case 0:a="dynamics";break;case 1:a="master";break;case 2:a="slave";break;case 3:a="leaner";break;case 4:a="outsync"}return t("label",{},a)}}],btns:[{txt:"指定leader",method:"on-leader"}]},multipleSelection:[]}},methods:{handleSelectionChange:function(t){this.multipleSelection=t,this.$emit("on-choosed-broker",t)},leader:function(t){var e=this,a=t;i.a.post(this.urls.leader,{},a).then(function(t){200===t.code?(e.$Message.success("更新成功"),e.getList()):e.$Message.error("更新失败")})},getList:function(){var t=this;this.showTablePin=!0;var e={pagination:{page:this.page.page,size:this.page.size},query:{topic:this.partitionGroup.topic,namespace:this.partitionGroup.namespace,groupNo:this.partitionGroup.groupNo}};i.a.post(this.urlOrigin.search,{},e).then(function(e){e.data=e.data||[],e.pagination=e.pagination||{totalRecord:e.data.length},t.page.total=e.pagination.totalRecord,t.page.page=e.pagination.page,t.page.size=e.pagination.size,t.tableData.rowData=e.data,t.showTablePin=!1})}},mounted:function(){this.partitionGroup=this.data,this.getList()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ml20 mt10"},[a("d-input",{staticClass:"left",staticStyle:{width:"60%"},attrs:{placeholder:"请输入要查询的IP/名称"},model:{value:t.searchData.keyword,callback:function(e){t.$set(t.searchData,"keyword",e)},expression:"searchData.keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1)],1),t._v(" "),a("my-table",{attrs:{optional:!0,data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange,"on-del":t.del,"on-leader":t.leader}})],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("qwuM")},"data-v-201e7ad6",null);e.default=c.exports},"0IJX":function(t,e){t.exports={"zh-CN":{404:{1:"资源",2:"整理中",3:"Axure Components",4:"通过在 Axure 中导入 Element 组件库，可以在交互设计阶段方便地调用常用的组件",5:"下载",6:"Sketch Template",7:"从 Element Template 快速调用常用组件，在提升设计效率的同时，保证统一的视觉风格",8:"组件交互文档",9:"进一步查看 Element 交互文档，从一个较为微观的角度详细地了解各个组件的交互细节",paraHeight:"1.8",placeholder1:"整理中",placeholder2:"设计资源正在整理和完善中"},common:{operate:"操作"},application:{4:"了解设计指南，帮助产品设计人员搭建逻辑清晰、结构合理且高效易用的产品。",5:"查看详情",6:"组件",7:"使用组件 Demo 快速体验交互细节；使用前端框架封装的代码帮助工程师快速开发。",8:"资源",9:"下载相关资源，用其快速搭建页面原型或高保真视觉稿，提升产品设计效率。",placeholder1:"请输入英文名/中文名",syncApp:"同步应用",colData:{id:"ID",code:"英文名",department:"所属部门",ownerCode:"负责人",system:"来源[应用来源/系统名称/应用代码]",btnDetail:"查看详情",btnDelete:"删除"},lang:"zh-CN",titleSize:"34",paraSize:"18"},apply:{},monitor:{1:"更新日志",2:"zh-CN"},system:{1:"设计原则",2:"一致",3:"Consistency",4:"反馈",5:"Feedback",6:"效率",7:"Efficiency",8:"可控",9:"Controllability",10:"一致性 Consistency",11:"与现实生活一致：",12:"与现实生活的流程、逻辑保持一致，遵循用户习惯的语言和概念；",13:"在界面中一致：",14:"所有的元素和结构需保持一致，比如：设计样式、图标和文本、元素的位置等。",15:"反馈 Feedback",16:"控制反馈：",17:"通过界面样式和交互动效让用户可以清晰的感知自己的操作；",18:"页面反馈：",19:"操作后，通过页面元素的变化清晰地展现当前状态。",20:"效率 Efficiency",21:"简化流程：",22:"设计简洁直观的操作流程；",23:"清晰明确：",24:"语言表达清晰且表意明确，让用户快速理解进而作出决策；",25:"帮助用户识别：",26:"界面简单直白，让用户快速识别而非回忆，减少用户记忆负担。",27:"可控 Controllability",28:"用户决策：",29:"根据场景可给予用户操作建议或安全提示，但不能代替用户进行决策；",30:"结果可控：",31:"用户可以自由的进行操作，包括撤销、回退和终止当前操作等。"},tool:{1:"设计原则",2:"导航"},topic:{1:"导航",2:"导航可以解决用户在访问页面时：在哪里，去哪里，怎样去的问题。一般导航会有「侧栏导航」和「顶部导航」2 种类型。",3:"选择合适的导航",4:"选择合适的导航可以让用户在产品的使用过程中非常流畅，相反若是不合适就会引起用户操作不适（方向不明确），以下是「侧栏导航」和 「顶部导航」的区别。",5:"侧栏导航",6:"可将导航栏固定在左侧，提高导航可见性，方便页面之间切换；顶部可放置常用工具，如搜索条、帮助按钮、通知按钮等。适用于中后台的管理型、工具型网站。",7:"一级类目",8:"适用于结构简单的网站：只有一级页面时，不需要使用面包屑。",9:"二级类目",10:"侧栏中最多可显示两级导航；当使用二级导航时，我们建议搭配使用面包屑，方便用户定位自己的位置和快速返回。",11:"三级类目",12:"适用于较复杂的工具型后台，左侧栏为一级导航，中间栏可显示其对应的二级导航，也可放置其他的工具型选项。",13:"顶部导航",14:"顺应了从上至下的正常浏览顺序，方便浏览信息；顶部宽度限制了导航的数量和文本长度。",15:"适用于导航较少，页面篇幅较长的网站。"}},"en-US":{404:{1:"资源",2:"整理中",3:"Axure Components",4:"通过在 Axure 中导入 Element 组件库，可以在交互设计阶段方便地调用常用的组件",5:"下载",6:"Sketch Template",7:"从 Element Template 快速调用常用组件，在提升设计效率的同时，保证统一的视觉风格",8:"组件交互文档",9:"进一步查看 Element 交互文档，从一个较为微观的角度详细地了解各个组件的交互细节",paraHeight:"1.8",placeholder1:"整理中",placeholder2:"设计资源正在整理和完善中"},common:{operate:"Operation"},application:{4:"了解设计指南，帮助产品设计人员搭建逻辑清晰、结构合理且高效易用的产品。",5:"查看详情",6:"组件",7:"使用组件 Demo 快速体验交互细节；使用前端框架封装的代码帮助工程师快速开发。",8:"资源",9:"下载相关资源，用其快速搭建页面原型或高保真视觉稿，提升产品设计效率。",placeholder1:"Please input the name",syncApp:"Sync App",colData:{id:"ID",code:"Code",department:"Department",ownerCode:"Owner",system:"Source[appSource/sysName/appCode]",btnDetail:"Show Detail",btnDelete:"Delete"},lang:"zh-CN",titleSize:"34",paraSize:"18"},apply:{},monitor:{1:"更新日志",2:"zh-CN"},system:{1:"设计原则",2:"一致",3:"Consistency",4:"反馈",5:"Feedback",6:"效率",7:"Efficiency",8:"可控",9:"Controllability",10:"一致性 Consistency",11:"与现实生活一致：",12:"与现实生活的流程、逻辑保持一致，遵循用户习惯的语言和概念；",13:"在界面中一致：",14:"所有的元素和结构需保持一致，比如：设计样式、图标和文本、元素的位置等。",15:"反馈 Feedback",16:"控制反馈：",17:"通过界面样式和交互动效让用户可以清晰的感知自己的操作；",18:"页面反馈：",19:"操作后，通过页面元素的变化清晰地展现当前状态。",20:"效率 Efficiency",21:"简化流程：",22:"设计简洁直观的操作流程；",23:"清晰明确：",24:"语言表达清晰且表意明确，让用户快速理解进而作出决策；",25:"帮助用户识别：",26:"界面简单直白，让用户快速识别而非回忆，减少用户记忆负担。",27:"可控 Controllability",28:"用户决策：",29:"根据场景可给予用户操作建议或安全提示，但不能代替用户进行决策；",30:"结果可控：",31:"用户可以自由的进行操作，包括撤销、回退和终止当前操作等。"},tool:{1:"设计原则",2:"导航"},topic:{1:"导航",2:"导航可以解决用户在访问页面时：在哪里，去哪里，怎样去的问题。一般导航会有「侧栏导航」和「顶部导航」2 种类型。",3:"选择合适的导航",4:"选择合适的导航可以让用户在产品的使用过程中非常流畅，相反若是不合适就会引起用户操作不适（方向不明确），以下是「侧栏导航」和 「顶部导航」的区别。",5:"侧栏导航",6:"可将导航栏固定在左侧，提高导航可见性，方便页面之间切换；顶部可放置常用工具，如搜索条、帮助按钮、通知按钮等。适用于中后台的管理型、工具型网站。",7:"一级类目",8:"适用于结构简单的网站：只有一级页面时，不需要使用面包屑。",9:"二级类目",10:"侧栏中最多可显示两级导航；当使用二级导航时，我们建议搭配使用面包屑，方便用户定位自己的位置和快速返回。",11:"三级类目",12:"适用于较复杂的工具型后台，左侧栏为一级导航，中间栏可显示其对应的二级导航，也可放置其他的工具型选项。",13:"顶部导航",14:"顺应了从上至下的正常浏览顺序，方便浏览信息；顶部宽度限制了导航的数量和文本长度。",15:"适用于导航较少，页面篇幅较长的网站。"}}}},"5fwk":function(t,e){},"6Ikp":function(t,e){},"7M5d":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("95hR"),o=a("1a0f"),n={name:"producer-weight",components:{},mixins:[i.a],props:{producerId:{type:String,default:""},weights:{type:Array},search:{type:String,default:""},data:{type:Array,default:function(){return[{groupNo:"",weight:""}]}}},data:function(){return{searchData:{topic:this.topic,namespace:this.namespace,keyword:""},urls:{search:this.search},rules:{},formData:this.data}},methods:{loadPartitionGroup:function(){var t=this;o.a.get(this.urlOrigin.search+"/"+this.producerId,{}).then(function(e){t.formData=e.data})},getWeights:function(){for(var t="",e=0;e<this.formData.length;e++){var a=this.formData[e];t+=a.groupNo+":"+a.weight+","}return t}},mounted:function(){this.loadPartitionGroup()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d-form",{ref:"form",staticStyle:{height:"250px","overflow-y":"auto",width:"80%","padding-right":"20px","padding-left":"20px"},attrs:{"label-width":"100px"}},t._l(t.formData,function(e,i){return a("grid-row",{key:i,attrs:{gutter:8}},[a("grid-col",{attrs:{span:"6",offset:"2"}},[a("d-form-item",{attrs:{label:"分区组:"}},[t._v("\n        "+t._s(e.groupNo)+"\n      ")])],1),t._v(" "),a("grid-col",{attrs:{span:"8"}},[a("d-form-item",{attrs:{label:"权重:"}},[a("d-input",{attrs:{placeholder:"请输入"},model:{value:e.weight,callback:function(a){t.$set(e,"weight",t._n(a))},expression:"item.weight"}})],1)],1)],1)}),1)},staticRenderFns:[]};var s=a("VU/8")(n,r,!1,function(t){a("8qXU")},"data-v-408787c4",null);e.default=s.exports},"8qXU":function(t,e){},"95hR":function(t,e,a){"use strict";var i=a("//Fk"),o=a.n(i),n=a("fZjL"),r=a.n(n),s=a("1a0f"),c=a("vcXF"),l=a("Ajbk"),d=a.n(l);e.a={computed:{routeName:function(){var t=this.$route.name;return r()(d.a).forEach(function(e){t=t.replace("/"+e+"/","/")}),t},urlOrigin:function(){return this.urls?this.urls:c.a[this.routeName]}},data:function(){return{page:{page:1,size:10,total:0},multipleSelection:[],showTablePin:!1}},methods:{handleSizeChange:function(t){this.page.size=t,this.getList()},handleCurrentChange:function(t){this.page.page=t,this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},handleSelectionAll:function(t){this.multipleSelection=t},openDialog:function(t){this[t].visible=!0},getSearchVal:function(){var t={pagination:{page:this.page.page,size:this.page.size},query:{}};for(var e in this.searchData)this.searchData.hasOwnProperty(e)&&(t.query[e]=this.searchData[e]);return"function"==typeof this.beforeSearch&&(t=this.beforeSearch(t)),t},getList:function(){var t=this;this.showTablePin=!0;var e=this.getSearchVal();s.a.post(this.urlOrigin.search,{},e).then(function(e){""!==e&&(e.data=e.data||[],e.pagination=e.pagination||{totalRecord:e.data.length},t.page.total=e.pagination.totalRecord,t.page.page=e.pagination.page,t.page.size=e.pagination.size,t.tableData.rowData=e.data,t.showTablePin=!1)})},beforeAdd:function(){var t=this;return new o.a(function(e,a){void 0===t.$refs.addForm&&e(t.addData),t.$refs.addForm.submitForm().then(function(t){e(t)}).catch(function(t){a(t)})})},addConfirm:function(){var t=this;this.beforeAdd().then(function(e){t.add(t.urlOrigin.add,e,"添加成功","添加失败")}).catch(function(e){console.log(e),t.$Message.error(e)})},addCancel:function(t,e){this.addDialog.visible=!1},edit:function(t){this.openDialog("editDialog"),"function"==typeof this.beforeEditData?this.editData=this.beforeEditData(t):this.editData=t},beforeEdit:function(t){var e=this;return new o.a(function(t,a){void 0===e.$refs.editForm?t(e.editData):e.$refs.editForm.submitForm().then(function(e){t(e)}).catch(function(t){a(t)})})},editConfirm:function(){var t=this;this.beforeEdit().then(function(e){t.update(t.urlOrigin.edit+"/"+t.editData.id,e,"修改成功","修改失败")}).catch(function(e){t.$Message.error(e)})},editCancel:function(t,e){this.editDialog.visible=!1},dialogCancel:function(t){this[t].visible=!1,this.getList()},del:function(t,e){var a=this,i=this;this.$Dialog.confirm({title:"提示",content:"确定要删除吗？"}).then(function(){"function"==typeof i.beforeDel&&i.beforeDel(t),s.a.delete(i.urlOrigin.del+"/"+t.id).then(function(e){e.code!==a.$store.getters.successCode?a.$Dialog.error({content:"删除失败"}):(a.$Message.success("删除成功"),"function"==typeof i.afterDel&&i.afterDel(t),i.getList())})}).catch(function(){})},afterAddOrUpdate:function(t,e,a,i){if(e.code===this.$store.getters.successCode)t?this.addDialog.visible=!1:void 0!==this.editDialog&&(this.editDialog.visible=!1),this.$Message.success(a),this.getList();else if(e.code===this.$store.getters.validationCode){var o=(e.message||"").split("|");if(!o||o.length<2)this.$Message.error(o||i);else{var n={};o[0].split(",").forEach(function(t){n[t]=o[1]}),t?this.$refs.addForm.setError(n):this.$refs.editForm.setError(n),this.$Message.success("验证不通过: "+e.message)}}},update:function(t,e,a,i){var o=this;s.a.put(t,{},e).then(function(t){o.afterAddOrUpdate(!1,t,a,i)})},add:function(t,e,a,i){var o=this;s.a.post(t,{},e).then(function(t){o.afterAddOrUpdate(!0,t,a,i)})}}}},"9xs8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("1a0f"),o=a("T0gc"),n=a("95hR"),r={name:"group-new",components:{myTable:o.a},props:{data:{type:Object,default:function(){return{}}}},mixins:[n.a],data:function(){return{partitionGroup:{},urls:{search:"/partitionGroupReplica/search",del:"/partitionGroupReplica/delete"},searchData:{keyword:""},tableData:{rowData:[{}],colData:[{title:"brokerId",key:"brokerId"},{title:"IP",key:"broker.ip"},{title:"端口",key:"broker.port"},{title:"角色",key:"role",render:function(t,e){var a=void 0;switch(e.item.role){case 0:a="dynamics";break;case 1:a="master";break;case 2:a="slave";break;case 3:a="leaner";break;case 4:a="outsync"}return t("label",{},a)}},{title:"状态",key:"broker.status",render:function(t,e){var a=void 0;switch(e.item.status){case 1:a="正常";break;case 2:a="异常"}return t("label",{},a)}}],btns:[{txt:"移除",method:"on-del"}]},multipleSelection:[]}},methods:{handleSelectionChange:function(t){this.multipleSelection=t,this.$emit("on-choosed-broker",t)},del:function(t){var e=this,a=t,o=this;i.a.post(this.urls.del,{},a).then(function(t){e.$Message.success("删除成功"),o.$emit("on-partition-group-change")})},getList:function(){var t=this;this.showTablePin=!0;var e={pagination:{page:this.page.page,size:this.page.size},query:{topic:this.partitionGroup.topic,namespace:this.partitionGroup.namespace,groupNo:this.partitionGroup.groupNo,keyword:this.searchData.keyword}};i.a.post(this.urlOrigin.search,{},e).then(function(e){e.data=e.data||[],e.pagination=e.pagination||{totalRecord:e.data.length},t.page.total=e.pagination.totalRecord,t.page.page=e.pagination.page,t.page.size=e.pagination.size,t.tableData.rowData=e.data,t.showTablePin=!1})}},mounted:function(){this.partitionGroup=this.data,this.getList()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ml20 mt10"},[a("d-input",{staticClass:"left",staticStyle:{width:"60%"},attrs:{placeholder:"请输入要查询的IP/名称"},model:{value:t.searchData.keyword,callback:function(e){t.$set(t.searchData,"keyword",e)},expression:"searchData.keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1)],1),t._v(" "),a("my-table",{attrs:{optional:!0,data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange,"on-del":t.del}})],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("Oj5Z")},"data-v-42765901",null);e.default=c.exports},C3TC:function(t,e){},CQUY:function(t,e){},CUPE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("95hR"),n=a("1a0f"),r={name:"mqtt-base-monitor",components:{MyTable:i.a},mixins:[o.a],props:{executorId:{type:Number,default:0},colData:{type:Array},btns:{type:Array},search:{type:String,default:""},close:{type:String},inputable:{type:Boolean,default:!0},threads:{type:String,default:""},threadDebug:"",clientDebug:"",threadsSelect:{type:Boolean,default:!1},threadType:{type:String,default:""},clientId:{type:String}},data:function(){return{urls:{search:this.search,threads:this.threads,close:this.close,threadDebug:this.threadDebug,clientDebug:this.clientDebug},searchData:{clientId:this.clientId,id:this.executorId,threadId:-1,threadType:this.threadType},tableData:{rowData:[],colData:this.colData,btns:this.btns},threadSelect:this.threadsSelect,threadList:[],item:{debug:!1,threadId:-1,totalClients:0},btnHint:{open:"打开调试",close:"关闭调试"},btn:""}},methods:{loadThread:function(){var t=this,e=this.searchData.id+"/type/"+this.searchData.threadType;n.a.getBase(this.urls.threads+e,{},!1).then(function(e){e.data=e.data||[],t.threadList=e.data})},onThreadChange:function(t){this.item=JSON.parse(t.label),this.getList()},onThreadDebug:function(t){var e=this;console.log(t);var a=!t.debug,i=this;n.a.put(this.urls.threadDebug+a,{},this.searchData).then(function(t){t.code==e.$store.getters.successCode?(e.$Message.success("成功"),i.loadThread()):e.$Message.error("失败")})},onClientDebug:function(t){var e=this,a=!t.status;this.searchData.clientId=t.clientId;var i=this;n.a.put(this.urls.clientDebug+a,{},this.searchData).then(function(t){t.code==e.$store.getters.successCode?(e.$Message.success("成功"),i.getList()):e.$Message.error("失败")})},closeConnection:function(t){var e=this,a={},i={clientId:t.clientId,id:this.executorId};a.query=i;var o=this;n.a.put(this.urls.close,{},a).then(function(t){e.$Message.success("成功"),o.getList()})}},mounted:function(){this.threadSelect&&this.loadThread()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[!t.threadSelect&&t.inputable?a("div",{staticClass:"ml20 mt30"},[a("d-input",{staticClass:"left mr10",staticStyle:{width:"20%"},attrs:{placeholder:"客户端ID"},model:{value:t.searchData.clientId,callback:function(e){t.$set(t.searchData,"clientId",e)},expression:"searchData.clientId"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"ml20 mt30",attrs:{label:"线程"}},[t.threadSelect&&t.inputable?a("d-select",{staticStyle:{width:"260px"},attrs:{"label-in-value":!0,placeholder:"请选择线程"},on:{"on-change":t.onThreadChange},model:{value:t.searchData.threadId,callback:function(e){t.$set(t.searchData,"threadId",e)},expression:"searchData.threadId"}},t._l(t.threadList,function(e){return a("d-option",{key:e.threadId,attrs:{value:e.threadId}},[t._v(t._s(e))])}),1):t._e(),t._v(" "),"consume"==t.threadType&&t.searchData.threadId>=0&&0==t.item.debug?a("d-button",{staticClass:"left mr10",staticStyle:{"margin-right":"100px"},attrs:{type:"primary"},on:{click:function(e){return t.onThreadDebug(t.item)}}},[t._v("打开调试")]):t._e(),t._v(" "),"consume"==t.threadType&&t.searchData.threadId>=0&&1==t.item.debug?a("d-button",{staticClass:"left mr10",staticStyle:{"margin-right":"100px"},attrs:{type:"primary"},on:{click:function(e){return t.onThreadDebug(t.item)}}},[t._v("关闭调试")]):t._e()],1),t._v(" "),a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-close-connection":t.closeConnection,"on-client-debug":t.onClientDebug}})],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("E72B")},"data-v-2ef12fd7",null);e.default=c.exports},DjU7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("1a0f"),n=a("95hR"),r=a("fo4W"),s=a("X2Oc"),c=a("toiR"),l={name:"offset",components:{myDialog:r.a,MyTable:i.a},mixins:[n.a],props:{doSearch:{type:Boolean,default:!1},colData:{type:Array},app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},type:{type:Number,default:0},searchData:{},url:{type:Object},search:{type:String,default:""},clientType:{type:Number,default:-1}},data:function(){return{urls:{search:"/consumer/offsets",boundReset:"/consumer/offset/reset/location/",offsetResetPartition:"/consumer/offset/reset/partition/",offsetResetByTime:"/consumer/offset/reset/timestamp/"},tableData:{rowData:[],colData:[{title:"分区",key:"partition"},{title:"主",key:"leader"},{title:"最小值",key:"leftIndex"},{title:"最大值",key:"rightIndex"},{title:"最后拉取时间",key:"lastPullTime",formatter:function(t){return Object(c.a)(t.lastPullTime)}},{title:"最后应答时间",key:"lastAckTime",formatter:function(t){return Object(c.a)(t.lastAckTime)}},{title:"应答",key:"offset"}],btns:[{txt:"重置消费位置",method:"on-set-offset"}]},resetDialog:{visible:!1,title:"重置消费位置",width:"500",showFooter:!0,scrollable:!0,doSearch:!0},partitionInfo:{partition:{},subscribe:{},time:"",offset:void 0,isPartition:!0},page:{total:0}}},methods:{openDialog:function(t){this[t].doSearch=!0,this[t].visible=!0},closeDialog:function(t){this[t].doSearch=!1,this[t].visible=!1},setBound:function(t){var e=this;this.$Dialog.confirm({title:"提示",content:"确定将所有分区消费位置设成最"+("MIN"===t?"小":"大")+"值吗？"}).then(function(){var a=e.getSubscribe();o.a.postBase(e.urls.boundReset+t,{},a,!1).then(function(t){t.data=t.data,"success"===t.data?(e.$Message.success("重置成功"),e.getList()):e.$Message.error("重置失败")})})},showResetOffset:function(t){this.partitionInfo.subscribe=this.getSubscribe(),this.partitionInfo.topic=Object(s.i)(this.partitionInfo.subscribe.topic,this.partitionInfo.subscribe.namespace),this.partitionInfo.app=Object(s.d)(this.partitionInfo.subscribe.app,this.partitionInfo.subscribe.subscribeGroup),t?(this.partitionInfo.partition=t,this.partitionInfo.isPartition=!0):this.partitionInfo.isPartition=!1,this.openDialog("resetDialog")},resetPartitionOffset:function(){var t=this,e=this.getSubscribe(),a=this.partitionInfo.partition.partition+"/offset/"+this.partitionInfo.offset;o.a.postBase(this.urls.offsetResetPartition+a,{},e,!1).then(function(e){e.data=e.data,"success"===e.data?(t.$Message.success("重置成功"),t.closeDialog("resetDialog"),t.getList()):t.$Message.error("重置失败")})},onConfirm:function(){this.partitionInfo.isPartition?this.resetPartitionOffset():this.resetAppOffset()},onCancel:function(){},resetAppOffset:function(){var t=this,e=this.getSubscribe();o.a.postBase(this.urls.offsetResetByTime+this.partitionInfo.time,{},e,!1).then(function(e){e.data=e.data,"success"===e.data?(t.$Message.success("重置成功"),t.closeDialog("resetDialog"),t.getList()):t.$Message.error("重置失败")})},getList:function(){var t=this;this.showTablePin=!0;var e=this.getSubscribe();o.a.postBase(this.urls.search,{},e,!1).then(function(e){e.data=e.data||[];for(var a=0;a<e.data.length;a++)e.data[a].offset=e.data[a].index;t.tableData.rowData=e.data,t.page.total=e.data.length,t.showTablePin=!1})},getSubscribe:function(){return{topic:{id:this.topic.id,code:this.topic.code},namespace:{id:this.namespace.id,code:this.namespace.code},app:{id:this.app.id,code:this.app.code},subscribeGroup:this.subscribeGroup||"",type:this.type,clientType:this.clientType}}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,showPagination:!1,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-set-offset":t.showResetOffset}}),t._v(" "),a("label",[t._v("共："+t._s(t.page.total)+" 条记录")]),t._v(" "),a("grid-row",{attrs:{type:"flex",justify:"end"}},[a("grid-col",{attrs:{span:"4"}},[t.$store.getters.isAdmin?a("d-button",{staticClass:"left mr10",attrs:{type:"primary"},on:{click:function(e){return t.showResetOffset(void 0)}}},[t._v("按时间重置")]):t._e()],1),t._v(" "),a("grid-col",{attrs:{span:"4"}},[t.$store.getters.isAdmin?a("d-button",{staticClass:"left mr10",attrs:{type:"primary"},on:{click:function(e){return t.setBound("MIN")}}},[t._v("全量最小")]):t._e()],1),t._v(" "),a("grid-col",{attrs:{span:"4",offset:"2"}},[t.$store.getters.isAdmin?a("d-button",{staticClass:"left mr10",staticStyle:{"margin-right":"100px"},attrs:{type:"primary"},on:{click:function(e){return t.setBound("MAX")}}},[t._v("全量最大")]):t._e()],1)],1),t._v(" "),a("my-dialog",{attrs:{dialog:t.resetDialog},on:{"on-dialog-confirm":t.onConfirm,"on-dialog-cancel":t.onCancel}},[a("d-form",{ref:"partitionOffset",staticStyle:{height:"350px","overflow-y":"auto",width:"100%","padding-right":"20px"},attrs:{model:t.partitionInfo,"label-width":"100px"}},[a("d-form-item",{attrs:{label:"主题:"}},[a("d-input",{staticStyle:{width:"60%"},attrs:{disabled:""},model:{value:t.partitionInfo.topic,callback:function(e){t.$set(t.partitionInfo,"topic",e)},expression:"partitionInfo.topic"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"应用:"}},[a("d-input",{staticStyle:{width:"60%"},attrs:{disabled:""},model:{value:t.partitionInfo.app,callback:function(e){t.$set(t.partitionInfo,"app",e)},expression:"partitionInfo.app"}})],1),t._v(" "),t.partitionInfo.isPartition?t._e():a("d-form-item",{attrs:{label:"重置时间:"}},[a("d-date-picker",{attrs:{align:"right","value-format":"timestamp",type:"datetime",placeholder:"选择时间"},model:{value:t.partitionInfo.time,callback:function(e){t.$set(t.partitionInfo,"time",e)},expression:"partitionInfo.time"}})],1),t._v(" "),t.partitionInfo.isPartition?a("d-form-item",{attrs:{label:"最小值："}},[a("d-input",{staticStyle:{width:"60%"},attrs:{disabled:""},model:{value:t.partitionInfo.partition.leftIndex,callback:function(e){t.$set(t.partitionInfo.partition,"leftIndex",t._n(e))},expression:"partitionInfo.partition.leftIndex"}})],1):t._e(),t._v(" "),t.partitionInfo.isPartition?a("d-form-item",{attrs:{label:"最大值："}},[a("d-input",{staticStyle:{width:"60%"},attrs:{disabled:""},model:{value:t.partitionInfo.partition.rightIndex,callback:function(e){t.$set(t.partitionInfo.partition,"rightIndex",t._n(e))},expression:"partitionInfo.partition.rightIndex"}})],1):t._e(),t._v(" "),t.partitionInfo.isPartition?a("d-form-item",{attrs:{label:"重置位置："}},[a("d-input",{staticStyle:{width:"60%"},model:{value:t.partitionInfo.offset,callback:function(e){t.$set(t.partitionInfo,"offset",t._n(e))},expression:"partitionInfo.offset"}})],1):t._e()],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(l,d,!1,function(t){a("6Ikp")},"data-v-c6d969be",null);e.default=p.exports},E72B:function(t,e){},GsSD:function(t,e){},"H/ue":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),o=a.n(i),n=a("T0gc"),r=a("95hR"),s=a("1a0f"),c={name:"add-broker",components:{myTable:n.a},props:{data:{type:Object,default:function(){return{}}}},mixins:[r.a],data:function(){return{urls:{search:"/broker/search"},searchData:{keyword:"",brokerGroupIds:[]},tableData:{rowData:[{}],colData:[{title:"分组",key:"group.code"},{title:"ID",key:"id"},{title:"IP",key:"ip"},{title:"端口",key:"port"}]},multipleSelection:[]}},methods:{handleSelectionChange:function(t){this.multipleSelection=t,this.$emit("on-choosed-broker",t)},getListByGroup:function(t){this.getListByGroupAndbrokers(t,void 0)},getListByGroupAndbrokers:function(t,e){var a=this,i={};void 0===t||0===t?(this.searchData.brokerGroupIds=[],i={keyword:this.searchData.keyword}):(this.searchData.brokerGroupIds=[t],i={keyword:this.searchData.keyword,brokerGroupIds:this.searchData.brokerGroupIds});var n={pagination:{page:this.page.page,size:this.page.size},query:i};s.a.post(this.urlOrigin.search,{},n).then(function(t){""!==t&&(t.data=t.data||[],t.pagination=t.pagination||{totalRecord:t.data.length},a.page.total=t.pagination.totalRecord,a.page.page=t.pagination.page,a.page.size=t.pagination.size,a.tableData.rowData=t.data,a.tableData.rowData.forEach(function(t){if(t.isChecked=!1,void 0!==e&&e.length>0){var a=!0,i=!1,n=void 0;try{for(var r,s=o()(e);!(a=(r=s.next()).done);a=!0){if(r.value.id===t.id){t.isChecked=!0;break}}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}}))})}},mounted:function(){}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ml20 mt10"},[a("d-input",{staticClass:"left",staticStyle:{width:"60%"},attrs:{placeholder:"请输入要查询的IP/ID"},model:{value:t.searchData.keyword,callback:function(e){t.$set(t.searchData,"keyword",e)},expression:"searchData.keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1)],1),t._v(" "),a("my-table",{attrs:{optional:!0,data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange}})],1)},staticRenderFns:[]};var d=a("VU/8")(c,l,!1,function(t){a("pQ8Y")},"data-v-212d95c4",null);e.default=d.exports},JSa9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("1a0f"),o=a("T0gc"),n=a("95hR"),r={name:"group-scale",components:{myTable:o.a},props:{data:{type:Object,default:function(){return{}}}},mixins:[n.a],data:function(){return{partitionGroup:{},urls:{search:"/partitionGroupReplica/searchBrokerToScale",addUrl:"/partitionGroupReplica/add"},searchData:{keyword:""},tableData:{rowData:[{}],colData:[{title:"分组",key:"group.code"},{title:"ID",key:"id"},{title:"IP",key:"ip"},{title:"端口",key:"port"}],btns:[{txt:"添加",method:"on-add"}]},multipleSelection:[]}},methods:{add:function(t){var e={topic:this.partitionGroup.topic,namespace:this.partitionGroup.namespace,groupNo:this.partitionGroup.groupNo,brokerId:t.id},a=this;this.$Dialog.confirm({title:"提示",content:"确定要扩容吗？"}).then(function(){i.a.post(a.urls.addUrl,null,e).then(function(t){a.getList(),a.$emit("on-partition-group-change")})}).catch(function(){})},handleSelectionChange:function(t){this.multipleSelection=t,this.$emit("on-choosed-broker",t)},getList:function(){var t=this;this.showTablePin=!0;var e={pagination:{page:this.page.page,size:this.page.size},query:{topic:this.partitionGroup.topic,namespace:this.partitionGroup.namespace,groupNo:this.partitionGroup.groupNo,keyword:this.searchData.keyword}};i.a.post(this.urlOrigin.search,{},e).then(function(e){e.data=e.data||[],e.pagination=e.pagination||{totalRecord:e.data.length},t.page.total=e.pagination.totalRecord,t.page.page=e.pagination.page,t.page.size=e.pagination.size,t.tableData.rowData=e.data,t.showTablePin=!1})}},mounted:function(){this.partitionGroup=this.data,this.getList()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ml20 mt10"},[a("d-input",{staticClass:"left",staticStyle:{width:"60%"},attrs:{placeholder:"请输入要查询的IP/名称"},model:{value:t.searchData.keyword,callback:function(e){t.$set(t.searchData,"keyword",e)},expression:"searchData.keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1)],1),t._v(" "),a("my-table",{attrs:{optional:!0,data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange,"on-add":t.add}})],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("GsSD")},"data-v-4054af4c",null);e.default=c.exports},Jawz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("1a0f"),n=a("95hR"),r=a("toiR"),s={name:"msg-preview",components:{MyTable:i.a},mixins:[n.a],props:{doSearch:{type:Boolean,default:!1},app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},type:{type:Number,default:0},colData:{type:Array,default:function(){return[{title:"ID",key:"id"},{title:"发送时间",key:"sendTime",formatter:function(t){return Object(r.a)(t.sendTime)}},{title:"服务端收到时间",key:"storeTime",formatter:function(t){return Object(r.a)(t.sendTime+t.storeTime)}},{title:"已消费",key:"flag"},{title:"BusinessID",key:"businessId"},{title:"内容",key:"body",render:function(t,e){return t("d-input",{props:{disabled:!0,type:"textarea",value:e.item.body}})}}]}}},data:function(){return{urls:{previewMessage:"/monitor/preview/message"},tableData:{rowData:[],colData:this.colData},page:{total:0}}},methods:{getList:function(){var t=this;this.showTablePin=!0;var e={topic:{id:this.topic.id,code:this.topic.code},namespace:{id:this.namespace.id,code:this.namespace.code},app:{id:this.app.id,code:this.app.code},subscribeGroup:this.subscribeGroup||"",type:this.type};o.a.postBase(this.urls.previewMessage,{},e,!1).then(function(e){e.data=e.data||[],t.tableData.rowData=e.data,t.page.total=t.tableData.rowData.length,t.showTablePin=!1})}},mounted:function(){this.getList()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,showPagination:!1,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange}}),t._v(" "),a("label",[t._v("共 "+t._s(t.page.total)+" 条记录")])],1)},staticRenderFns:[]};var l=a("VU/8")(s,c,!1,function(t){a("C3TC")},"data-v-25921d0c",null);e.default=l.exports},K2B8:function(t,e){},"LuD/":function(t,e){},Oj5Z:function(t,e){},OlXb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("95hR"),n=a("1a0f"),r={name:"broker",components:{MyTable:i.a},mixins:[o.a],props:{doSearch:{type:Boolean,default:!1},app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},type:{type:Number,default:0},colData:{type:Array,default:function(){var t=this;return[{title:"IP:端口",key:"ip"},{title:"连接数",key:"connection",render:function(e,a){return t.type===t.$store.getters.producerType?e("span",a.item.producer):e("span",a.item.consumer)}}]}}},data:function(){return{urls:{getMonitor:"/monitor/find/connection"},tableData:{rowData:[],colData:this.colData},page:{total:0}}},methods:{getList:function(){var t=this;this.showTablePin=!0;var e={topic:{id:this.topic.id,code:this.topic.code},namespace:{id:this.namespace.id,code:this.namespace.code},app:{id:this.app.id,code:this.app.code},subscribeGroup:this.subscribeGroup||"",type:this.type};n.a.postBase(this.urls.getMonitor,{},e,!1).then(function(e){e.data=e.data||[],t.tableData.rowData=e.data,t.page.total=e.data.length,t.showTablePin=!1})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,showPagination:!1,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange}}),t._v(" "),a("label",[t._v("共 "+t._s(t.page.total)+" 条记录")])],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("5fwk")},"data-v-4508b757",null);e.default=c.exports},Pm8T:function(t,e){},T0gc:function(t,e,a){"use strict";var i=a("BO1k"),o=a.n(i),n=a("pFYg"),r=a.n(n),s=a("IcnI"),c=a("0IJX"),l=a.n(c),d=a("M3bc"),p={name:"myTable",props:{optional:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},showPin:{type:Boolean,default:!1},height:{type:String,default:""},data:{rowData:[],colData:[],inputs:[],btns:[],operates:[]},page:{page:1,size:10,total:100}},data:function(){return{}},computed:{curLang:function(){return this.$i18n.locale},langConfig:function(){return l.a[this.curLang].common},rowData:function(){return this.data.rowData},ColOpData:function(){for(var t=this,e=this.data.inputs||[],a=this.data.btns||[],i=this.data.operates||[],n=Object(d.e)(this.data.colData)||[],c=function(a){var i=e[a].title;n.push({title:i,render:function(i,o){for(var n=t,r=o.item,s=e[a].key.split("."),c=0;c<s.length-1;c++)void 0===r[s[c]]&&(r[s[c]]={}),r=r[s[c]];return i("DInput",{domProps:{value:""},on:{input:function(t){o.item[s[s.length-1]]=t.target.value,n.data[o.index]=o.item}}},r)}})},l=0;l<e.length;l++)c(l);return a.length||i.length?(n.push({title:this.langConfig.operate,render:function(e,n){for(var c=[],l=[],d=function(i){var l=a[i];if(l.bindKey&&l.bindVal){var d=void 0,p=r()(l.bindVal);if(l.bindCond&&"="!==l.bindCond){if("!="===l.bindCond)if(d=!0,"number"===p||"string"===p||"boolean"===p)n.item[l.bindKey]===l.bindVal&&(d=!1);else if(Array.isArray(l.bindVal)){var h=!0,g=!1,f=void 0;try{for(var m,b=o()(l.bindVal);!(h=(m=b.next()).done);h=!0)if(u=m.value,n.item[l.bindKey]===u){d=!1;break}}catch(t){g=!0,f=t}finally{try{!h&&b.return&&b.return()}finally{if(g)throw f}}}}else if(d=!1,"number"===p||"string"===p||"boolean"===p)n.item[l.bindKey]===l.bindVal&&(d=!0);else if(Array.isArray(l.bindVal)){var D=!0,y=!1,v=void 0;try{for(var w,k=o()(l.bindVal);!(D=(w=k.next()).done);D=!0)if(u=w.value,n.item[l.bindKey]===u){d=!0;break}}catch(t){y=!0,v=t}finally{try{!D&&k.return&&k.return()}finally{if(y)throw v}}}if(!d)return"continue"}if(l.isAdmin&&!s.a.getters.isAdmin)return"continue";c.push(e("label",{style:{cursor:"pointer",color:"#3366FF",textAlign:"left",marginRight:"5px",minWidth:"40px",display:"inline-block"},on:{click:function(){t.$emit(l.method,n.item,n.index)}}},l.txt))},p=0;p<a.length;p++){var u;d(p)}var h=function(a){var o=i[a];return o.bindKey&&n.item[o.bindKey]!==o.bindVal?"continue":o.isAdmin?"continue":void l.push(e("DDropdownItem",{nativeOn:{click:function(){t.$emit(o.method,n.item,n.index)}}},o.txt))};for(p=0;p<i.length;p++)h(p);return l.length&&c.push(e("DDropdown",{props:{trigger:"click"}},[e("a",{props:{size:"small"}},["更多",e("Icon",{props:{name:"chevron-down",size:"14",slot:"suffix"}})]),e("DDropdownMenu",{slot:"list"},l)])),e("div",c)}}),n):this.data.colData}},methods:{showOperate:function(t,e){var a=!0;return t.bindKey&&e[t.bindKey]!==t.bindVal&&(a=!1),a},tableRowClassName:function(t){var e=t.row;t.rowIndex;return e.className?e.className:""},handleRowClick:function(t){this.$emit("on-row-click",t)},handleSelectionChange:function(t){this.$emit("on-selection-change",t)},handleSelectionAll:function(t){this.$emit("on-selection-all",t)},handleOperate:function(t,e,a){this.$emit(t,e,a)},handleSizeChange:function(t){this.$emit("on-size-change",t)},handleCurrentChange:function(t){this.$emit("on-current-change",t)}},mounted:function(){}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("d-table",{staticClass:"tablePadding",staticStyle:{"word-wrap":"break-word","word-break":"break-all"},attrs:{optional:t.optional,columns:t.ColOpData,data:t.rowData,height:t.height},on:{"row-click":t.handleRowClick,"on-selection-change":t.handleSelectionChange,"on-select-all":t.handleSelectionAll}},[t.data.selectable?a("d-table-column",{attrs:{type:"selection",width:"55"}}):t._e()],1),t._v(" "),t.showPagination?a("d-pagination",{staticClass:"right mr20",attrs:{"show-total":"","show-sizer":"","show-quickjump":"","page-size-opts":[10,20,50,100],current:t.page.page,"page-size":t.page.size,total:t.page.total},on:{"pagesize-change":t.handleSizeChange,"page-change":t.handleCurrentChange}}):t._e(),t._v(" "),t.showPin?a("d-spin",{attrs:{fix:"",size:"large"}}):t._e()],1)},staticRenderFns:[]};var h=a("VU/8")(p,u,!1,function(t){a("WRHW")},"data-v-4767f5f2",null);e.a=h.exports},TypB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("1a0f"),n=a("95hR"),r={name:"partition",components:{MyTable:i.a},mixins:[n.a],props:{doSearch:{type:Boolean,default:!1},app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},type:{type:Number,default:0},btns:{type:Array},operates:{type:Array},colData:{type:Array}},data:function(){return{urls:{search:"/partitionGroup/findByTopic",findConsumerPartitionGroups:"/monitor/find/partitionGroupsForTopicApp",findProducerPartitionGroups:"/monitor/find/partitionGroups"},tableData:{rowData:[],colData:this.colData,btns:this.btns,operates:this.operates},page:{total:0}}},methods:{getList:function(){var t=this;this.showTablePin=!0;var e={topic:{id:this.topic.id,code:this.topic.code},namespace:{id:this.namespace.id,code:this.namespace.code},app:{id:this.app.id,code:this.app.code},subscribeGroup:this.subscribeGroup||"",type:this.type};o.a.post(this.urls.search,{},e).then(function(a){a.data=a.data||[],t.tableData.rowData=a.data,t.showTablePin=!1,t.page.total=a.data.length;for(var i=t,n=0;n<i.tableData.rowData.length;n++)i.tableData.rowData[n].subscribe=e;var r=t.type===t.$store.getters.producerType?t.urls.findProducerPartitionGroups:t.urls.findConsumerPartitionGroups;o.a.postBase(r,{},e,!1).then(function(a){for(var o=a.data||[],n=0;n<i.tableData.rowData.length;n++){for(var r=0;r<o.length;r++)i.tableData.rowData[n].groupNo===o[r].partitionGroup&&(i.tableData.rowData[n].ip=o[r].ip,t.type===t.$store.getters.producerType?(i.tableData.rowData[n].enQuence=o[r].enQuence||{count:0},i.tableData.rowData[n].deQuence=o[r].deQuence||{count:0}):t.type===t.$store.getters.consumerType&&(i.tableData.rowData[n].deQuence=o[r].deQuence||{count:0},i.tableData.rowData[n].pending=o[r].pending||{count:0}),i.$set(t.tableData.rowData,n,i.tableData.rowData[n]));i.tableData.rowData[n].subscribe=e}})})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,showPagination:!1,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange}}),t._v(" "),a("label",[t._v("共 "+t._s(t.page.total)+" 条记录")])],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("K2B8")},"data-v-32678422",null);e.default=c.exports},"V+87":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("1a0f"),n=a("95hR"),r={name:"client-connection",components:{MyTable:i.a},mixins:[n.a],props:{doSearch:{type:Boolean,default:!1},app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},type:{type:Number,default:0},colData:{type:Array,default:function(){return[{title:"连接ID",key:"client.connectionId"},{title:"地址",key:"client.ip"},{title:"端口",key:"client.port"},{title:"版本号",key:"client.version"},{title:"语言",key:"client.language"},{title:"来源",key:"client.source"},{title:"消息服务器",key:"ip"}]}}},data:function(){return{urls:{getMonitor:"/monitor/find/client"},tableData:{rowData:[],colData:this.colData},page:{total:0}}},methods:{getList:function(){var t=this;this.showTablePin=!0;var e={topic:{id:this.topic.id,code:this.topic.code},namespace:{id:this.namespace.id,code:this.namespace.code},app:{id:this.app.id,code:this.app.code},subscribeGroup:this.subscribeGroup||"",type:this.type};o.a.postBase(this.urls.getMonitor,{},e,!1).then(function(e){e.data=e.data||[],t.tableData.rowData=e.data;var a={total:e.data.length};t.page=a,t.showTablePin=!1})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,showPagination:!1,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange}}),t._v(" "),a("label",[t._v("共 "+t._s(t.page.total)+" 条记录")])],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("naU/")},"data-v-d5b405da",null);e.default=c.exports},WRHW:function(t,e){},X2Oc:function(t,e,a){"use strict";e.i=function(t,e){var a=(t||{}).code;a.indexOf(".")>=0&&(a=a.split(".")[1]);if(!e||!e.code||0===e.code.trim().length)return a;return(e||{}).code+"."+a},e.d=function(t,e){if(!e||0===e.trim().length)return(t||{}).code;return(t||{}).code+"."+e},e.e=function(){return[{required:!0,message:"请输入英文名",trigger:"change"},{pattern:/^[a-zA-Z]+[a-zA-Z0-9_-]{1,120}[a-zA-Z0-9]+$/,message:"英文名格式不匹配",trigger:"change"}]},e.f=function(){return[{required:!0,message:"请输入英文名",trigger:"change"},{pattern:/^[a-zA-Z][a-zA-Z0-9]{2,20}$/,message:"英文名格式不匹配",trigger:"change"}]},e.g=function(){return[{required:!0,message:"请输入英文名",trigger:"change"},{pattern:/^[a-zA-Z]+[a-zA-Z0-9/._-]{1,39}[a-zA-Z0-9]+$/,message:"英文名格式不匹配",trigger:"change"}]},e.h=function(){return[{required:!0,message:"请输入中文名",trigger:"change"},{pattern:/^[\u4E00-\u9FA5a-zA-Z]+[\u4E00-\u9FA5a-zA-Z0-9/._-]{1,60}[\u4E00-\u9FA5a-zA-Z0-9]+$/,message:"中文名格式不匹配",trigger:"change"}]},e.a=n,e.j=function(t,e){return n(t,e,[{value:!0,txt:"开启",color:"success"},{value:!1,txt:"关闭",color:"danger"}])},e.m=function(t,e){return n(t,e,[{value:!0,txt:"是",color:"success"},{value:!1,txt:"否",color:"danger"}])},e.c=function(t,e,a){return t("d-select",{props:{},on:{"on-change":function(t){e.item.clientType=t,a.tableData.rowData[e.index]=e.item}}},[{value:0,txt:"jmq",color:"success"},{value:1,txt:"kafka",color:"warning"},{value:2,txt:"mqtt",color:"danger"},{value:10,txt:"others",color:"info"}].map(function(e){return t("d-option",{props:{value:e.value,label:e.txt}})}))},e.b=function(t,e){return n(t,e,[{value:0,txt:"jmq",color:"success"},{value:1,txt:"kafka",color:"warning"},{value:2,txt:"mqtt",color:"danger"},{value:10,txt:"others",color:"info"}])},e.l=function(t,e){return n(t,e,[{value:0,txt:"普通主题",color:"success"},{value:1,txt:"广播主题",color:"warning"},{value:2,txt:"顺序主题",color:"danger"}])},e.k=function(t,e,a){return t("d-autocomplete",{props:{value:e.item.subscribeGroup,placeholder:"请输入订阅分组",fetchSuggestions:function(t,e){i.a.get(o.a.common.findSubscribeGroup).then(function(a){if(void 0===a.data||a.data===[]){e([{value:""}])}var i=a.data.map(function(t){return{value:t}});console.log(i),console.log(t);var o=t?i.filter(function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase().trim())}):i;console.log(o),e(o)})}},on:{select:function(t){e.item.subscribeGroup=t.value||"",a.tableData.rowData[e.index]=e.item},input:function(t){e.item.subscribeGroup=t.value||t||"",a.tableData.rowData[e.index]=e.item}}})};var i=a("1a0f"),o=a("vcXF");function n(t,e,a){if(void 0===e||""===e)return t("label","");var i=e,o="";return a.forEach(function(t){e===t.value&&(i=t.txt,o=t.color)}),t("d-button",{props:{size:"small",borderless:!0,color:o}},i)}},"Y+Ey":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"producer-config-form",mixins:[a("lcoF").a],props:{type:0,data:{type:Object,default:function(){return{nearBy:!1,single:!1,archive:!1,weight:"",blackList:""}}}},data:function(){return{formData:this.data,rules:{}}},methods:{getFormData:function(){return this.formData}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d-form",{ref:"form",staticStyle:{height:"350px","overflow-y":"auto",width:"100%","padding-right":"20px"},attrs:{model:t.formData,rules:t.rules,"label-width":"100px"}},[a("d-form-item",{attrs:{label:"就近发送："}},[a("d-switch",{model:{value:t.formData.nearBy,callback:function(e){t.$set(t.formData,"nearBy",e)},expression:"formData.nearBy"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"生产归档:"}},[a("d-switch",{model:{value:t.formData.archive,callback:function(e){t.$set(t.formData,"archive",e)},expression:"formData.archive"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"限制IP生产："}},[a("d-input",{attrs:{type:"textarea",rows:"4",placeholder:"请输入要限制的IP，多个IP之间请用英文逗号隔开"},model:{value:t.formData.blackList,callback:function(e){t.$set(t.formData,"blackList",e)},expression:"formData.blackList"}})],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,o,!1,function(t){a("g2JV")},"data-v-6d6e9e98",null);e.default=n.exports},aACI:function(t,e){},cEar:function(t,e){},eG7o:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("1a0f"),n=a("95hR"),r=a("toiR"),s={name:"msg-detail",components:{MyTable:i.a},mixins:[n.a],props:{doSearch:{type:Boolean,default:!1},app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},type:{type:Number,default:0},colData:{type:Array,default:function(){return[{title:"index",key:"msgIndexNo"},{title:"开始时间",key:"startTime",formatter:function(t){return Object(r.a)(t.startTime)}},{title:"服务端收到时间",key:"storeTime",formatter:function(t){return Object(r.a)(t.startTime+t.storeTime)}},{title:"已被消费",key:"flag"},{title:"BusinessID",key:"businessId"},{title:"内容",key:"body",render:function(t,e){return t("d-input",{props:{disabled:!0,type:"textarea",value:e.item.body}})}}]}}},data:function(){return{searchData:{partition:"",index:"",timestamp:""},urls:{getMsgDetail:"/monitor/view/message"},tableData:{rowData:[],colData:this.colData},page:{total:0}}},methods:{getList:function(){var t=this;this.showTablePin=!0;var e={topic:{id:this.topic.id,code:this.topic.code},namespace:{id:this.namespace.id,code:this.namespace.code},app:{id:this.app.id,code:this.app.code},subscribeGroup:this.subscribeGroup||"",type:this.type};o.a.post(this.urls.getMsgDetail,this.searchData,e,!1).then(function(e){e.data=e.data||[],t.tableData.rowData=e.data,t.page.total=t.tableData.rowData.length,t.showTablePin=!1})}},mounted:function(){}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ml20 mt30"},[a("d-input",{staticClass:"left mr5",staticStyle:{width:"20%"},attrs:{placeholder:"请输入partition"},model:{value:t.searchData.partition,callback:function(e){t.$set(t.searchData,"partition",e)},expression:"searchData.partition"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("分区")])]),t._v(" "),a("d-input",{staticClass:"left mr5",staticStyle:{width:"20%"},attrs:{placeholder:"请输入时间戳"},model:{value:t.searchData.timestamp,callback:function(e){t.$set(t.searchData,"timestamp",e)},expression:"searchData.timestamp"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("时间戳")])]),t._v(" "),a("d-input",{staticClass:"left mr5",staticStyle:{width:"20%"},attrs:{placeholder:"请输入位点"},model:{value:t.searchData.index,callback:function(e){t.$set(t.searchData,"index",e)},expression:"searchData.index"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("位点")])]),t._v(" "),a("d-button",{attrs:{type:"primary",color:"success"},on:{click:t.getList}},[t._v("查询"),a("icon",{staticStyle:{"margin-left":"5px"},attrs:{name:"search"}})],1)],1),t._v(" "),a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,showPagination:!1,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange}}),t._v(" "),a("label",[t._v("共 "+t._s(t.page.total)+" 条记录")])],1)},staticRenderFns:[]};var l=a("VU/8")(s,c,!1,function(t){a("tGge")},"data-v-dcd173a6",null);e.default=l.exports},fo4W:function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("d-dialog",{attrs:{title:t.dialog.title||"新建",showFooter:t.dialog.showFooter,width:t.dialog.width||520,scrollable:t.dialog.scrollable||!1},on:{"on-confirm":t.handleSave,"on-cancel":t.handleCancel},model:{value:t.dialog.visible,callback:function(e){t.$set(t.dialog,"visible",e)},expression:"dialog.visible"}},[t._t("default")],2)},staticRenderFns:[]},o=a("VU/8")({name:"myDialog",data:function(){return{}},props:{dialog:{default:function(){return{visible:!1}}}},methods:{handleSave:function(){this.$emit("on-dialog-confirm")},handleCancel:function(){this.$emit("on-dialog-cancel")}}},i,!1,null,null,null);e.a=o.exports},g2JV:function(t,e){},h64m:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("1a0f"),o=a("T0gc"),n=a("95hR"),r=a("vcXF"),s={name:"subscribe",components:{myTable:o.a},props:{keywordTip:{type:String,default:"请输入代码/名称"},operates:{type:Array},colData:{type:Array},btns:{type:Array,default:function(){return[{txt:"订 阅",method:"on-add"}]}},doSearch:{type:Boolean,default:!1},search:{type:Object},type:{type:Number,default:1},addUrl:"",searchUrl:""},mixins:[n.a],data:function(){return{urls:{search:this.searchUrl,add:this.addUrl},keyword:"",tableData:{rowData:[],colData:this.colData,btns:this.btns,operates:this.operates},multipleSelection:[],subscribeGroupList:[]}},methods:{getList:function(){var t=this;this.showTablePin=!0;var e={pagination:{page:this.page.page,size:this.page.size},query:{keyword:this.keyword,subscribeType:this.type}};for(var a in this.search)this.search.hasOwnProperty(a)&&(e.query[a]=this.search[a]);i.a.post(this.urlOrigin.search,{},e).then(function(e){e.data=e.data||[],e.pagination=e.pagination||{totalRecord:e.data.length},t.page.total=e.pagination.totalRecord,t.page.page=e.pagination.page,t.page.size=e.pagination.size,t.tableData.rowData=e.data.map(function(t){return t.subscribeGroup="",t}),t.showTablePin=!1})},add:function(t){var e=this,a={};if(void 0!==t.clientType){if(a.clientType=t.clientType,this.type===this.$store.getters.consumerType){if(console.log(t.code),t.subscribeGroup&&!t.subscribeGroup.match(this.$store.getters.pattern.subscribeGroup))return void this.$Dialog.warning({content:"订阅分组格式不匹配！支持格式："+this.$store.getters.placeholder.subscribeGroup});a.subscribeGroup=t.subscribeGroup||""}for(var o in this.search)this.search.hasOwnProperty(o)&&(a[o]=this.search[o],"app"===o?(a.topic={id:t.id,code:t.code},a.namespace=t.namespace):"topic"===o&&(a.app={id:t.id,code:t.code}));var n=this;this.$Dialog.confirm({title:"提示",content:"确定要订阅吗？"}).then(function(){i.a.post(n.addUrl,null,a).then(function(){e.tableData.rowData=[],n.getList(),n.$emit("on-refresh")})}).catch(function(){})}else this.$Dialog.warning({content:"请先输入客户端类型！"})},getSubscribeGroups:function(){var t=this;i.a.get(r.a.common.findSubscribeGroup).then(function(e){t.subscribeGroupList=e.data||[]})},querySubscribeGroup:function(t,e){var a=this.subscribeGroupList;e(t?a.filter(function(e){return 0===e.toLowerCase().indexOf(t.toLowerCase().trim())}):a)}},mounted:function(){this.getList()},watch:{doSearch:{handler:function(t,e){t&&(this.getList(),this.doSearch=!1)},deep:!0}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ml20 mt10"},[a("d-input",{staticClass:"left",staticStyle:{width:"60%"},attrs:{placeholder:t.keywordTip},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1)],1),t._v(" "),a("my-table",{attrs:{data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange,"on-add":t.add}})],1)},staticRenderFns:[]};var l=a("VU/8")(s,c,!1,function(t){a("cEar")},"data-v-1db403eb",null);e.default=l.exports},hO8A:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("1a0f"),n=a("95hR"),r={name:"partition-expand",components:{MyTable:i.a},mixins:[n.a],props:{row:Object,subscribe:Object,partitionGroup:{type:Number},colData:{type:Array}},data:function(){return{urls:{search:"/monitor/find/partitionGroupDetailForTopicApp"},searchData:{subscribe:this.subscribe,partitionGroup:this.partitionGroup},tableData:{rowData:[],colData:this.colData}}},methods:{getList:function(){var t=this;this.showTablePin=!0,o.a.postBase(this.urls.search,{},this.searchData,!1).then(function(e){e.data=e.data||[],t.tableData.rowData=e.data,t.showTablePin=!1})}},mounted:function(){this.getList()}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("d-table",{attrs:{columns:this.tableData.colData,data:this.tableData.rowData}})],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("LuD/")},"data-v-7c9d9476",null);e.default=c.exports},iLib:function(t,e){},jKy6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("1a0f");var i=a("T0gc"),o=a("fo4W"),n=a("95hR"),r={name:"brokerPartitionGroupMonitor",components:{ClientConnection:a("V+87").default,myTable:i.a,myDialog:o.a},props:{brokerId:{type:Number}},mixins:[n.a],data:function(){return{urls:{search:"/monitor/broker/partition/search"},searchData:{brokerId:this.brokerId},searchRules:{},tableData:{rowData:[],colData:[{title:"主题",key:"topic"},{title:"partitionGroup",key:"partitionGroupMetricList",render:function(t,e){for(var a=e.item.partitionGroupMetricList,i=[],o=0;o<a.length;o++){var n=t("div",a[o].partitionGroup);i.push(n)}return t("div",{},i)}},{title:"partition",key:"partitionGroupMetricList",render:function(t,e){for(var a=e.item.partitionGroupMetricList,i=[],o=0;o<a.length;o++){var n=t("div",a[o].partitions);i.push(n)}return t("div",{},i)}}]},multipleSelection:[]}},methods:{},mounted:function(){this.getList()}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("my-table",{attrs:{data:this.tableData,showPin:this.showTablePin,page:this.page},on:{"on-size-change":this.handleSizeChange,"on-current-change":this.handleCurrentChange,"on-selection-change":this.handleSelectionChange,"on-edit":this.edit}})],1)},staticRenderFns:[]},c=a("VU/8")(r,s,!1,null,null,null);e.default=c.exports},l2GX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("1a0f"),n=a("95hR"),r={name:"tab-coordinator-group",components:{MyTable:i.a},mixins:[n.a],props:{doSearch:{type:Boolean,default:!1},colData:{type:Array},app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},type:{type:Number,default:0},searchData:{},search:{type:String,default:""},clientType:{type:Number,default:-1}},data:function(){return{urls:{search:this.search},tableData:{rowData:[],colData:this.colData},page:{total:0},extension:""}},methods:{getList:function(){var t=this;this.showTablePin=!0;var e={topic:{id:this.topic.id,code:this.topic.code},namespace:{id:this.namespace.id,code:this.namespace.code},app:{id:this.app.id,code:this.app.code},subscribeGroup:this.subscribeGroup||"",type:this.type,clientType:this.clientType};o.a.postBase(this.urls.search,{},e,!1).then(function(e){e.data=e.data.members||[],t.extension=e.data.extension,t.tableData.rowData=e.data,t.page.total=e.data.length,t.showTablePin=!1})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v(" 扩展字段："+t._s(t.extension))]),t._v(" "),a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,showPagination:!1,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange}}),t._v(" "),a("label",[t._v("共："+t._s(t.page.total)+" 条记录")])],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("nGvm")},"data-v-287b6682",null);e.default=c.exports},lcoF:function(t,e,a){"use strict";var i=a("//Fk"),o=a.n(i),n=a("M3bc"),r=a("X2Oc"),s=a("1a0f");e.a={props:{data:{type:Object,default:function(){return{}}},type:0},data:function(){return{formData:this.data,rules:{code:Object(r.e)(),name:Object(r.h)(),description:[{max:512,message:"长度在 512 个字符以内",trigger:"blur"}]},error:{code:""},urls:{add:"",edit:""},addData:{}}},methods:{getFormData:function(){return this.formData},submitForm:function(){var t=this;return new o.a(function(e,a){for(var i in t.error)t.error.hasOwnProperty(i)&&(t.error[i]="");t.$refs.form.validate(function(i){i?e(t.getFormData()):a(new Error("验证不通过，请重新填写！"))})})},resetForm:function(){this.$refs.form.resetFields()},setError:function(t){for(var e in t)t.hasOwnProperty(e)&&(this.error[e]=t[e])},beforeConfirm:function(){return Object(n.e)(this.formData||{})},confirm:function(){var t=this,e=this.beforeConfirm();this.$refs.form.validate(function(a){if(a){var i="";void 0===t.type||t.type===t.$store.getters.addFormType?i=t.urls.add:t.type===t.$store.getters.editFormType&&(i=t.urls.edit),s.a.post(i,{},e).then(function(e){if(e.code===t.$store.getters.successCode)t.$emit("on-dialog-cancel");else if(e.code===t.$store.getters.validationCode){var a=(e.message||"").split("|");if(void 0===a||a.length<2)t.$Dialog.error({content:"添加申请失败"});else{var i={};a[0].split(",").forEach(function(t){i[t]=a[1]}),t.setError(i),t.$Message.success("验证不通过: "+e.message)}}})}else t.$Message.error("验证不通过，请重新填写！")})}}}},nGvm:function(t,e){},"naU/":function(t,e){},pQ8Y:function(t,e){},pTBv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"consumer-config-form",mixins:[a("lcoF").a],props:{type:0,data:{type:Object,default:function(){return{nearBy:!1,single:!1,paused:!1,archive:!1,retry:!0,ackTimeout:void 0,batchSize:void 0,maxRetrys:0,maxRetryDelay:3e5,retryDelay:0,useExponentialBackOff:0,backOffMultiplier:0,expireTime:3,delay:void 0,concurrent:1,blackList:""}}}},data:function(){var t=function(t,e,a){void 0!==t.min&&e<t.min||void 0!==t.max&&e>t.max?a(new Error(t.hint)):a()};return{formData:this.data,rules:{ackTimeout:[{validator:t,type:"number",trigger:"change",min:1e3,hint:"超时时间至少为1s",required:!1}],delay:[{validator:t,type:"number",trigger:"change",min:0,max:36e5,hint:"延时必需大于等于0，且不超过3600s",required:!1}],batchSize:[{validator:t,type:"number",trigger:"change",max:100,min:1,hint:"批量大小1~100",required:!1}],concurrent:[{validator:t,type:"number",trigger:"change",max:50,min:1,hint:"并行度1~50",required:!1}]}}},methods:{getFormData:function(){return this.formData}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("d-form",{ref:"form",staticStyle:{height:"350px","overflow-y":"auto",width:"100%","padding-right":"20px"},attrs:{model:t.formData,rules:t.rules,"label-width":"100px"}},[a("d-form-item",{attrs:{label:"消费归档:"}},[a("d-switch",{model:{value:t.formData.archive,callback:function(e){t.$set(t.formData,"archive",e)},expression:"formData.archive"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"重试服务:"}},[a("d-switch",{model:{value:t.formData.retry,callback:function(e){t.$set(t.formData,"retry",e)},expression:"formData.retry"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"暂停消费:"}},[a("d-switch",{model:{value:t.formData.paused,callback:function(e){t.$set(t.formData,"paused",e)},expression:"formData.paused"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"就近消费:"}},[a("d-switch",{model:{value:t.formData.nearBy,callback:function(e){t.$set(t.formData,"nearBy",e)},expression:"formData.nearBy"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"延迟消费(ms):",prop:"delay"}},[a("d-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入值,最大延迟1小时"},model:{value:t.formData.delay,callback:function(e){t.$set(t.formData,"delay",t._n(e))},expression:"formData.delay"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"应答超时(ms):",prop:"ackTimeout"}},[a("d-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入值，默认10s"},model:{value:t.formData.ackTimeout,callback:function(e){t.$set(t.formData,"ackTimeout",t._n(e))},expression:"formData.ackTimeout"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"批量大小:",prop:"batchSize"}},[a("d-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入值，范围1-100，默认10"},model:{value:t.formData.batchSize,callback:function(e){t.$set(t.formData,"batchSize",t._n(e))},expression:"formData.batchSize"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"并行消费:"}},[a("d-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入值,范围1-50,默认1"},model:{value:t.formData.concurrent,callback:function(e){t.$set(t.formData,"concurrent",t._n(e))},expression:"formData.concurrent"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"限制IP消费:"}},[a("d-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",rows:"3",placeholder:"请输入要限制的IP，多个IP之间请用英文逗号隔开"},model:{value:t.formData.blackList,callback:function(e){t.$set(t.formData,"blackList",e)},expression:"formData.blackList"}})],1),t._v(" "),a("d-form-item",{attrs:{label:"过滤规则:"}},[a("d-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",rows:"3",placeholder:"格式如下:key1:value1,key2:value2"},model:{value:t.formData.filters,callback:function(e){t.$set(t.formData,"filters",e)},expression:"formData.filters"}})],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,o,!1,function(t){a("Pm8T")},"data-v-8287dd5a",null);e.default=n.exports},qrPa:function(t,e){},qwuM:function(t,e){},scCP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("1a0f");var i=a("T0gc"),o=a("fo4W"),n=a("95hR"),r={name:"brokerConnectionMonitor",components:{ClientConnection:a("V+87").default,myTable:i.a,myDialog:o.a},props:{brokerId:{type:Number}},mixins:[n.a],data:function(){return{theme1:"light",urls:{search:"/monitor/broker/connection/search"},searchData:{brokerId:this.brokerId},searchRules:{},tableData:{rowData:[],colData:[{title:"连接ID",key:"connectionId"},{title:"应用",key:"app"},{title:"版本号",key:"version"},{title:"语言",key:"language"},{title:"来源",key:"source"},{title:"创建时间",key:"createTime"},{title:"应用ip",key:"ip"},{title:"端口",key:"port"},{title:"作用域",key:"namespace"},{title:"角色",key:"producerRole",formatter:function(t){return t.producerRole?"生产者":t.consumerRole?"消费者":void 0}}]},multipleSelection:[]}},methods:{},mounted:function(){this.getList()}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("my-table",{attrs:{data:this.tableData,showPin:this.showTablePin,page:this.page},on:{"on-size-change":this.handleSizeChange,"on-current-change":this.handleCurrentChange,"on-selection-change":this.handleSelectionChange,"on-edit":this.edit}})],1)},staticRenderFns:[]},c=a("VU/8")(r,s,!1,null,null,null);e.default=c.exports},tGge:function(t,e){},tdWL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("1a0f"),o=a("T0gc"),n=a("95hR"),r={name:"group-new",components:{myTable:o.a},props:{data:{type:Object,default:function(){return{}}}},mixins:[n.a],data:function(){return{topic:{},namespace:{},addData:{topic:{},namespace:{},replicaGroups:[],partitions:1,electType:0,recLeader:""},page:{page:1,size:10,total:100},urls:{search:"/partitionGroupReplica/searchBrokerToAddNew",add:"/partitionGroup/add"},searchData:{keyword:""},tableData:{rowData:[{}],colData:[{title:"brokerId",key:"id"},{title:"分组",key:"group.code"},{title:"IP",key:"ip"},{title:"端口",key:"port"}]},multipleSelection:[]}},methods:{handleSelectionChange:function(t){for(var e=[],a=0;a<t.length;a++)e.push({brokerId:t[a].id});this.multipleSelection=t,this.addData.replicaGroups=e,0==this.addData.replicaGroups.length?this.addData.recLeader="":this.addData.recLeader=this.addData.replicaGroups[0].brokerId},getList:function(){var t=this;this.showTablePin=!0;var e={pagination:{page:this.page.page,size:this.page.size},query:{topic:this.topic,namespace:this.namespace,keyword:this.searchData.keyword}};i.a.post(this.urlOrigin.search,{},e).then(function(e){e.data=e.data||[],e.pagination=e.pagination||{totalRecord:e.data.length},t.page.total=e.pagination.totalRecord,t.page.page=e.pagination.page,t.page.size=e.pagination.size,t.tableData.rowData=e.data,t.showTablePin=!1})},addNewPartitionGroup:function(){var t=this,e=this.addData;if(null==e.electType||e.partitions<=0)this.$Dialog.success({content:"请输入队列数量和选举方式"});else{var a=this;i.a.post(this.urls.add,{},e).then(function(e){t.$Dialog.success({content:"添加成功"}),a.$emit("on-partition-group-change"),t.$emit("on-dialog-cancel")})}}},mounted:function(){this.topic=this.data.topic,this.namespace=this.data.namespace,this.addData.topic=this.data.topic,this.addData.namespace=this.data.namespace,this.getList()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-left":"20px"}},[a("d-form",{attrs:{model:t.addData,inline:"","label-width":"520"}},[a("d-form-item",{staticStyle:{width:"32%"},attrs:{label:"队列数量：",required:""}},[a("d-input",{attrs:{placeholder:"必填项"},model:{value:t.addData.partitions,callback:function(e){t.$set(t.addData,"partitions",e)},expression:"addData.partitions"}})],1),t._v(" "),a("d-form-item",{staticStyle:{width:"20%"},attrs:{label:"选举类型：",required:""}},[a("d-select",{attrs:{value:"0",placeholder:"请选择"},model:{value:t.addData.electType,callback:function(e){t.$set(t.addData,"electType",e)},expression:"addData.electType"}},[a("d-option",{attrs:{value:0}},[t._v("raft")]),t._v(" "),a("d-option",{attrs:{value:1}},[t._v("fix")])],1)],1),t._v(" "),a("d-form-item",{staticStyle:{width:"30%"},attrs:{label:"推荐leader：",required:""}},[a("d-select",{attrs:{placeholder:"必选项，请选择"},model:{value:t.addData.recLeader,callback:function(e){t.$set(t.addData,"recLeader",e)},expression:"addData.recLeader"}},t._l(t.addData.replicaGroups,function(e){return a("d-option",{key:e.id,attrs:{value:e.brokerId}},[t._v(t._s(e.brokerId))])}),1)],1)],1)],1),t._v(" "),a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{optional:!0,data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange}}),t._v(" "),a("div",{staticClass:"d-dialog__footer"},[a("d-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.addNewPartitionGroup()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("CQUY")},"data-v-e213eb3c",null);e.default=c.exports},toiR:function(t,e,a){"use strict";function i(t){var e=new Date;return e.setTime(t),e}e.a=function(t,e,a){var o=new Date;if(t)o=i(t);else if(e)return"-";var n="yyyy-MM-dd hh:mm:ss";a&&(n="hh:mm:ss");return o.Format(n)},Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t}},vVBl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("T0gc"),o=a("1a0f"),n=a("95hR"),r={name:"tab-table",components:{MyTable:i.a},mixins:[n.a],props:{doSearch:{type:Boolean,default:!1},colData:{type:Array},app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},type:{type:Number,default:0},searchData:{},search:{type:String,default:""},clientType:{type:Number,default:-1}},data:function(){return{urls:{search:this.search},tableData:{rowData:[],colData:this.colData},page:{total:0}}},methods:{getList:function(){var t=this;this.showTablePin=!0;var e={topic:{id:this.topic.id,code:this.topic.code},namespace:{id:this.namespace.id,code:this.namespace.code},app:{id:this.app.id,code:this.app.code},subscribeGroup:this.subscribeGroup||"",type:this.type,clientType:this.clientType};o.a.postBase(this.urls.search,{},e,!1).then(function(e){e.data=e.data||[],t.tableData.rowData=e.data,t.page.total=e.data.length,t.showTablePin=!1})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("my-table",{staticStyle:{height:"400px","overflow-y":"auto"},attrs:{data:t.tableData,showPin:t.showTablePin,showPagination:!1,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange}}),t._v(" "),a("label",[t._v("共："+t._s(t.page.total)+" 条记录")])],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(t){a("iLib")},"data-v-4c5e2b03",null);e.default=c.exports},xKYX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),n=a("1a0f"),r=a("T0gc"),s=a("fo4W"),c=a("pTBv"),l=a("h64m"),d=a("OlXb"),p=a("TypB"),u=a("V+87"),h=a("Jawz"),g=a("vVBl"),f=a("l2GX"),m=a("hO8A"),b=a("toiR"),D=a("CUPE"),y=a("DjU7"),v=a("X2Oc"),w={name:"consumer-base",components:{MsgDetail:a("eG7o").default,myTable:r.a,myDialog:s.a,subscribe:l.default,broker:d.default,partition:p.default,clientConnection:u.default,msgPreview:h.default,consumerConfigForm:c.default,tabTable:g.default,partitionExpand:m.default,mqttBaseMonitor:D.default,offset:y.default,coordinatorGroupMember:f.default},props:{keywordTip:{type:String},btns:{type:Array,default:function(){return[{txt:"消费详情",method:"on-detail"},{txt:"详情监控图表",method:"on-detail-chart"},{txt:"汇总监控图表",method:"on-summary-chart"},{txt:"性能监控图表",method:"on-performance-chart"},{txt:"配置",method:"on-config"}]}},operates:{type:Array,default:function(){return[{txt:"消息预览",method:"on-msg-preview"},{txt:"消息查询",method:"on-msg-detail"}]}},colData:{type:Array},search:{type:Object},subscribeDialogColData:{type:Array},subscribeUrls:{type:Object},partitionColData:{type:Array,default:function(){return[{type:"expand",width:50,render:function(t,e){return console.log(e),t(m.default,{props:{row:e.row,colData:[{title:"ID",key:"partitionGroup"},{title:"分区",key:"partition"},{title:"积压数",key:"pending.count"},{title:"出队数",key:"deQuence.count"}],subscribe:e.row.subscribe,partitionGroup:e.row.groupNo}})}},{title:"ID",key:"groupNo"},{title:"主分片",key:"ip"},{title:"分区",key:"partitions"},{title:"积压数",key:"pending.count"},{title:"出队数",key:"deQuence.count"}]}}},data:function(){return{urls:{search:"/consumer/search",getMonitor:"/monitor/find",previewMessage:"/monitor/preview/message",getUrl:"/grafana/getRedirectUrl"},showTablePin:!1,tableData:{rowData:[],colData:this.colData,btns:this.btns,operates:this.operates},keyword:"",page:{page:1,size:10,total:100},type:this.$store.getters.consumerType,subscribeDialog:{visible:!1,title:"添加消费者",width:"900",showFooter:!1,doSearch:!1,colData:this.subscribeDialogColData,urls:{add:this.subscribeUrls.add,search:this.subscribeUrls.search}},detailDialog:{visible:!1,title:"消费详情",width:"1000",showFooter:!1,scrollable:!0,doSearch:!0,app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""},partition:{colData:this.partitionColData},clientType:-1},configConsumerData:{},configDialog:{visible:!1,title:"消费者配置详情",width:"600",showFooter:!0,urls:{addOrUpdate:"/consumer/config/addOrUpdate",search:"consumer/config/search"}},msgPreviewDialog:{visible:!1,title:"生产者详情",width:"1000",showFooter:!1,doSearch:!0,app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""}},msgDetailDialog:{visible:!1,title:"生产者详情",width:"1000",showFooter:!1,doSearch:!0,app:{id:0,code:""},subscribeGroup:"",topic:{id:"0",code:""},namespace:{id:"0",code:""}},mqttConnectionsProperties:{colData:[{title:"客户端ID",key:"clientId",width:800},{title:"应用",key:"application",width:300},{title:"IP",key:"ipAddress",width:1200},{title:"非持久化会话",key:"cleanSession"},{type:"expand",title:"分组名称",render:function(t,e){return t("span",e.row.clientGroupName)}},{title:"版本",key:"mqttVersion"},{title:"遗嘱标识",key:"willFlag"},{title:"存活时间(s)",key:"keepAliveTimeSeconds"},{title:"创建时间",key:"createdTime",width:400,formatter:function(t){return Object(b.a)(t.createdTime)}},{title:"操作时间",key:"lastOperateTime",width:400,formatter:function(t){return Object(b.a)(t.lastOperateTime)}}],btns:[{txt:"断开",method:"on-close-connection"}],search:"/monitor/mqtt/proxy/connection/client",close:"/monitor/mqtt/proxy/closeConnection",executorId:-1,inputable:!1},coordinatorTable:{colData:[{title:"broker",key:"broker",formatter:function(t){return t.broker.ip+":"+t.broker.port}},{title:"协调者",key:"coordinator"}],search:"/monitor/coordinator"},coordinatorGroupMemberTable:{colData:[{title:"id",key:"connectionHost"},{title:"最新心跳时间",key:"latestHeartbeat",formatter:function(t){return Object(b.a)(t.latestHeartbeat)}},{title:"会话超时",key:"sessionTimeout"},{title:"分区分配",key:"assignmentList"}],search:"/monitor/coordinator/group/member"},coordinatorGroupExpiredMemberTable:{colData:[{title:"id",key:"hosts"},{title:"最新心跳时间",key:"latestHeartbeat",formatter:function(t){return Object(b.a)(t.latestHeartbeat)}},{title:"过期时间",key:"expireTime",formatter:function(t){return Object(b.a)(t.expireTime)}},{title:"过期次数",key:"expireTimes"}],search:"/monitor/coordinator/group/expired/member"}}},methods:{openDialog:function(t){this[t].doSearch=!0,this[t].visible=!0},openDetailDialog:function(t){console.log(t),this.detailDialog.app.id=t.app.id,this.detailDialog.app.code=t.app.code,this.detailDialog.subscribeGroup=t.subscribeGroup,this.detailDialog.topic.id=t.topic.id,this.detailDialog.topic.code=t.topic.code,this.detailDialog.namespace.id=t.namespace.id,this.detailDialog.namespace.code=t.namespace.code,this.detailDialog.clientType=t.clientType,this.openDialog("detailDialog")},openMsgPreviewDialog:function(t){console.log("item"),console.log(t),this.msgPreviewDialog.app.id=t.app.id,this.msgPreviewDialog.app.code=t.app.code,this.msgPreviewDialog.subscribeGroup=t.subscribeGroup,this.msgPreviewDialog.topic.id=t.topic.id,this.msgPreviewDialog.topic.code=t.topic.code,this.msgPreviewDialog.namespace.id=t.namespace.id,this.msgPreviewDialog.namespace.code=t.namespace.code,this.msgPreviewDialog.title="消息预览 [App: "+this.msgPreviewDialog.app.code+", Topic: "+this.msgPreviewDialog.topic.code+"]",this.openDialog("msgPreviewDialog")},openMsgDetailDialog:function(t){console.log("item"),console.log(t),this.msgDetailDialog.app.id=t.app.id,this.msgDetailDialog.app.code=t.app.code,this.msgDetailDialog.subscribeGroup=t.subscribeGroup,this.msgDetailDialog.topic.id=t.topic.id,this.msgDetailDialog.topic.code=t.topic.code,this.msgDetailDialog.namespace.id=t.namespace.id,this.msgDetailDialog.namespace.code=t.namespace.code,this.msgDetailDialog.title="消息查询 [App: "+this.msgDetailDialog.app.code+", Topic: "+this.msgDetailDialog.topic.code+"]",this.openDialog("msgDetailDialog")},openConfigDialog:function(t){this.configConsumerData=o()({},t.config),this.configConsumerData.consumerId=t.id,this.configDialog.visible=!0},handleSizeChange:function(t){this.page.size=t,this.getList()},handleCurrentChange:function(t){this.page.page=t,this.getList()},handleTabChange:function(t){var e=t.name;this.$refs[e].getList()},dialogConfirm:function(t){this[t].visible=!1,this.getList()},dialogCancel:function(t){this[t].visible=!1,this.getList()},goSummaryChart:function(t){n.a.get(this.urls.getUrl+"/ct",{},{}).then(function(e){var a=e.data||"";a.indexOf("?")<0?a+="?":a.endsWith("?")||(a+="&"),a=a+"var-topic="+Object(v.i)(t.topic,t.topic.namespace)+"&var-app="+Object(v.d)(t.app,t.subscribeGroup),window.open(a)})},goDetailChart:function(t){n.a.get(this.urls.getUrl+"/cd",{},{}).then(function(e){var a=e.data||"";a.indexOf("?")<0?a+="?":a.endsWith("?")||(a+="&"),a=a+"var-topic="+Object(v.i)(t.topic,t.topic.namespace)+"&var-app="+Object(v.d)(t.app,t.subscribeGroup),window.open(a)})},goPerformanceChart:function(t){for(var e in this.$store.getters.urls.performance){var a=this.$store.getters.urls.performance[e];for(var i in a)window.open(a[i].replace(/\(consumer\.\)/g,"consumer.").replace(/\[topic\]/g,Object(v.i)(t.topic,t.topic.namespace)).replace(/\[app\]/g,Object(v.d)(t.app,t.subscribeGroup)))}},getMonitor:function(t,e){var a=this,i={topic:{id:t.topic.id,code:t.topic.code},namespace:{id:t.namespace.id,code:t.namespace.code},app:{id:t.app.id,code:t.app.code},subscribeGroup:t.subscribeGroup||"",type:this.type};n.a.postBase(this.urls.getMonitor,{},i,!1).then(function(i){a.tableData.rowData[e]=o()(t,i.data||[]),a.$set(a.tableData.rowData,e,a.tableData.rowData[e])})},configConsumerConfirm:function(){var t=this;this.$refs.configForm.submitForm().then(function(e){t.addOrUpdateConfig()}).catch(function(){})},addOrUpdateConfig:function(){var t=this;n.a.post(this.configDialog.urls.addOrUpdate,{},this.configConsumerData).then(function(){t.configDialog.visible=!1,t.getList()})},getList:function(){var t=this;this.showTablePin=!0;var e={pagination:{page:this.page.page,size:this.page.size},query:{keyword:this.keyword}};for(var a in this.search)this.search.hasOwnProperty(a)&&(e.query[a]=this.search[a]);n.a.post(this.urls.search,{},e).then(function(e){e.data=e.data||[],e.pagination=e.pagination||{totalRecord:e.data.length},t.page.total=e.pagination.totalRecord,t.page.page=e.pagination.page,t.page.size=e.pagination.size,t.tableData.rowData=e.data,t.showTablePin=!1;for(var a=0;a<t.tableData.rowData.length;a++)t.getMonitor(t.tableData.rowData[a],a)})}},mounted:function(){}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ml20 mt30"},[a("d-input",{staticClass:"left mr10",staticStyle:{width:"10%"},attrs:{placeholder:t.keywordTip},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1),t._v(" "),t.$store.getters.isAdmin?a("d-button",{staticClass:"left mr10",attrs:{type:"primary"},on:{click:function(e){return t.openDialog("subscribeDialog")}}},[t._v("\n      订阅\n      "),a("icon",{staticStyle:{"margin-left":"5px"},attrs:{name:"plus-circle"}})],1):t._e()],1),t._v(" "),a("my-table",{attrs:{data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-detail-chart":t.goDetailChart,"on-current-change":t.handleCurrentChange,"on-detail":t.openDetailDialog,"on-msg-preview":t.openMsgPreviewDialog,"on-msg-detail":t.openMsgDetailDialog,"on-config":t.openConfigDialog,"on-performance-chart":t.goPerformanceChart,"on-summary-chart":t.goSummaryChart}}),t._v(" "),a("my-dialog",{attrs:{dialog:t.subscribeDialog},on:{"on-dialog-cancel":function(e){return t.dialogCancel("subscribeDialog")}}},[a("subscribe",{ref:"subscribe",attrs:{search:t.search,type:t.type,colData:t.subscribeDialog.colData,searchUrl:t.subscribeDialog.urls.search,addUrl:t.subscribeDialog.urls.add,doSearch:t.subscribeDialog.doSearch},on:{"on-refresh":t.getList}})],1),t._v(" "),a("my-dialog",{attrs:{dialog:t.detailDialog},on:{"on-dialog-cancel":function(e){return t.dialogCancel("detailDialog")}}},[a("d-tabs",{on:{"on-change":t.handleTabChange}},[a("d-tab-pane",{attrs:{label:"分组",name:"partition",icon:"pocket"}},[a("partition",{ref:"partition",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,colData:t.detailDialog.partition.colData,namespace:t.detailDialog.namespace,type:t.type,doSearch:t.detailDialog.doSearch,subscribeGroup:t.detailDialog.subscribeGroup}})],1),t._v(" "),a("d-tab-pane",{attrs:{label:"客户端连接",name:"clientConnection",icon:"github"}},[a("client-connection",{ref:"clientConnection",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,namespace:t.detailDialog.namespace,type:t.type,doSearch:t.detailDialog.doSearch,subscribeGroup:t.detailDialog.subscribeGroup}})],1),t._v(" "),2==t.detailDialog.clientType?a("d-tab-pane",{attrs:{label:"mqtt客户端",name:"mqttClient",icon:"file-text"}},[a("mqtt-base-monitor",{ref:"mqttClient",attrs:{"client-id":t.detailDialog.subscribeGroup,inputable:!1,btns:t.mqttConnectionsProperties.btns,"col-data":t.mqttConnectionsProperties.colData,search:t.mqttConnectionsProperties.search}})],1):t._e(),t._v(" "),a("d-tab-pane",{attrs:{label:"消费位置",name:"offsetInfo",icon:"file-text"}},[a("offset",{ref:"offsetInfo",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,namespace:t.detailDialog.namespace,type:t.type,doSearch:t.detailDialog.doSearch,subscribeGroup:t.detailDialog.subscribeGroup,searchData:t.detailDialog,"client-type":t.detailDialog.clientType}})],1),t._v(" "),a("d-tab-pane",{attrs:{label:"Broker",name:"broker",icon:"file-text"}},[a("broker",{ref:"broker",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,namespace:t.detailDialog.namespace,type:t.type,doSearch:t.detailDialog.doSearch,subscribeGroup:t.detailDialog.subscribeGroup}})],1),t._v(" "),t.$store.getters.isAdmin?a("d-tab-pane",{attrs:{label:"协调者信息",name:"coordinatorInfo",icon:"file-text"}},[a("tab-table",{ref:"coordinatorInfo",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,namespace:t.detailDialog.namespace,type:t.type,doSearch:t.detailDialog.doSearch,"client-type":t.detailDialog.clientType,subscribeGroup:t.detailDialog.subscribeGroup,searchData:t.detailDialog,"col-data":t.coordinatorTable.colData,search:t.coordinatorTable.search}})],1):t._e(),t._v(" "),t.$store.getters.isAdmin?a("d-tab-pane",{attrs:{label:"消费组成员",name:"coordinatorGroupMember",icon:"file-text"}},[a("tab-coordinator-group",{ref:"coordinatorGroupMember",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,namespace:t.detailDialog.namespace,type:t.type,"client-type":t.detailDialog.clientType,doSearch:t.detailDialog.doSearch,subscribeGroup:t.detailDialog.subscribeGroup,searchData:t.detailDialog,"col-data":t.coordinatorGroupMemberTable.colData,search:t.coordinatorGroupMemberTable.search}})],1):t._e(),t._v(" "),t.$store.getters.isAdmin?a("d-tab-pane",{attrs:{label:"消费组过期成员",name:"coordinatorGroupExpiredMember",icon:"file-text"}},[a("tab-table",{ref:"coordinatorGroupExpiredMember",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,namespace:t.detailDialog.namespace,type:t.type,"client-type":t.detailDialog.clientType,doSearch:t.detailDialog.doSearch,subscribeGroup:t.detailDialog.subscribeGroup,searchData:t.detailDialog,"col-data":t.coordinatorGroupExpiredMemberTable.colData,search:t.coordinatorGroupExpiredMemberTable.search}})],1):t._e()],1)],1),t._v(" "),a("my-dialog",{attrs:{dialog:t.msgPreviewDialog},on:{"on-dialog-cancel":function(e){return t.dialogCancel("msgPreviewDialog")}}},[a("msg-preview",{attrs:{app:t.msgPreviewDialog.app,topic:t.msgPreviewDialog.topic,namespace:t.msgPreviewDialog.namespace,type:t.type,doSearch:t.msgPreviewDialog.doSearch,subscribeGroup:t.msgPreviewDialog.subscribeGroup}})],1),t._v(" "),a("my-dialog",{attrs:{dialog:t.msgDetailDialog},on:{"on-dialog-cancel":function(e){return t.dialogCancel("msgDetailDialog")}}},[a("msg-detail",{attrs:{app:t.msgDetailDialog.app,topic:t.msgDetailDialog.topic,namespace:t.msgDetailDialog.namespace,type:t.type,doSearch:t.msgDetailDialog.doSearch,subscribeGroup:t.msgDetailDialog.subscribeGroup}})],1),t._v(" "),a("my-dialog",{attrs:{dialog:t.configDialog},on:{"on-dialog-confirm":t.configConsumerConfirm,"on-dialog-cancel":function(e){return t.dialogCancel("configDialog")}}},[a("consumer-config-form",{ref:"configForm",attrs:{data:t.configConsumerData}})],1)],1)},staticRenderFns:[]};var C=a("VU/8")(w,k,!1,function(t){a("qrPa")},"data-v-333f920c",null);e.default=C.exports},xXvx:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),o=a.n(i),n=a("1a0f"),r=a("T0gc"),s=a("fo4W"),c=a("h64m"),l=a("OlXb"),d=a("TypB"),p=a("V+87"),u=a("Y+Ey"),h=a("7M5d"),g=a("hO8A"),f=a("X2Oc"),m={name:"producer-base",components:{myTable:r.a,myDialog:s.a,subscribe:c.default,broker:l.default,partition:d.default,clientConnection:p.default,ProducerConfigForm:u.default,ProducerWeight:h.default,partitionExpand:g.default},props:{keywordTip:{type:String},btns:{type:Array,default:function(){return[{txt:"生产详情",method:"on-detail"},{txt:"详情监控图表",method:"on-detail-chart"},{txt:"汇总监控图表",method:"on-summary-chart"},{txt:"性能监控图表",method:"on-performance-chart"},{txt:"配置",method:"on-config"}]}},operates:{type:Array,default:function(){return[{txt:"设置生产权重",method:"on-set-produce-weight"}]}},colData:{type:Array},search:{type:Object},subscribeDialogColData:{type:Array},subscribeUrls:{type:Object},partitionColData:{type:Array,default:function(){return[{type:"expand",width:50,render:function(t,e){return console.log("expand:"+e),t(g.default,{props:{row:e.row,colData:[{title:"ID",key:"partitionGroup"},{title:"分区",key:"partition"},{title:"入队数",key:"enQuence.count"}],subscribe:e.row.subscribe,partitionGroup:e.row.groupNo}})}},{title:"ID",key:"groupNo"},{title:"主分片",key:"ip"},{title:"分区",key:"partitions"},{title:"入队数",key:"enQuence.count"}]}}},data:function(){return{urls:{search:"/producer/search",getMonitor:"/monitor/find",getUrl:"/grafana/getRedirectUrl"},showTablePin:!1,tableData:{rowData:[],colData:this.colData,btns:this.btns,operates:this.operates},keyword:"",page:{page:1,size:10,total:100},type:this.$store.getters.producerType,subscribeDialog:{visible:!1,title:"添加生产者",width:"700",showFooter:!1,doSearch:!1,colData:this.subscribeDialogColData.map(function(t){return o()({},t)}),urls:{add:this.subscribeUrls.add,search:this.subscribeUrls.search}},produceWeightDialog:{visible:!1,title:"设置生产权重",width:"700",showFooter:!0,doSearch:!1,weights:[],urls:{search:"/producer/weight",update:"/"}},detailDialog:{visible:!1,title:"生产者详情",width:"900",showFooter:!1,doSearch:!0,app:{id:0,code:""},topic:{id:"0",code:""},namespace:{id:"0",code:""},partition:{colData:this.partitionColData}},configDialog:{visible:!1,title:"生产者配置详情",width:"600",showFooter:!0,urls:{addOrUpdae:"/producer/config/addOrUpdate"}},configData:{}}},methods:{openDialog:function(t){this[t].doSearch=!0,this[t].visible=!0},openDetailDialog:function(t){this.detailDialog.app.id=t.app.id,this.detailDialog.app.code=t.app.code,this.detailDialog.topic.id=t.topic.id,this.detailDialog.topic.code=t.topic.code,this.detailDialog.namespace.id=t.namespace.id,this.detailDialog.namespace.code=t.namespace.code,this.openDialog("detailDialog")},openConfigDialog:function(t){this.configData=t.config||{},this.configData.producerId=t.id,this.configDialog.visible=!0},openWeightConfigDialog:function(t){this.configData=t.config||{},this.configData.producerId=t.id,this.produceWeightDialog.visible=!0},handleSizeChange:function(t){this.page.size=t,this.getList()},handleCurrentChange:function(t){this.page.page=t,this.getList()},handleTabChange:function(t){var e=t.name;this.$refs[e].getList()},dialogConfirm:function(t){this[t].visible=!1,this.getList()},dialogCancel:function(t){this[t].visible=!1,this.getList()},configConfirm:function(){this.configData=this.$refs.configForm.getFormData(),this.config(this.configData,"configDialog")},weightConfigConfirm:function(){var t={producerId:this.configData.producerId,weight:this.$refs.weightForm.getWeights()};this.config(t,"produceWeightDialog")},goSummaryChart:function(t){n.a.get(this.urls.getUrl+"/ct",{},{}).then(function(e){var a=e.data||"";a.indexOf("?")<0?a+="?":a.endsWith("?")||(a+="&"),a=a+"var-topic="+Object(f.i)(t.topic,t.topic.namespace)+"&var-app="+Object(f.d)(t.app,t.subscribeGroup),window.open(a)})},goDetailChart:function(t){n.a.get(this.urls.getUrl+"/pd",{},{}).then(function(e){var a=e.data||"";a.indexOf("?")<0?a+="?":a.endsWith("?")||(a+="&"),a=a+"var-topic="+Object(f.i)(t.topic,t.topic.namespace)+"&var-app="+Object(f.d)(t.app,t.subscribeGroup),window.open(a)})},goPerformanceChart:function(t){for(var e in this.$store.getters.urls.performance){var a=this.$store.getters.urls.performance[e];for(var i in a)window.open(a[i].replace(/\(consumer\.\)/g,"").replace(/\[topic\]/g,Object(f.i)(t.topic,t.topic.namespace)).replace(/\[app\]/g,Object(f.d)(t.app,t.subscribeGroup)))}},getMonitor:function(t,e){var a=this,i={topic:{id:t.topic.id,code:t.topic.code},namespace:{id:t.namespace.id,code:t.namespace.code},app:{id:t.app.id,code:t.app.code},type:this.type};n.a.postBase(this.urls.getMonitor,{},i,!1).then(function(i){a.tableData.rowData[e]=o()(t,i.data||[]),a.$set(a.tableData.rowData,e,a.tableData.rowData[e])})},getList:function(){var t=this;this.showTablePin=!0;var e={pagination:{page:this.page.page,size:this.page.size},query:{keyword:this.keyword}};for(var a in this.search)this.search.hasOwnProperty(a)&&(e.query[a]=this.search[a]);n.a.post(this.urls.search,{},e).then(function(e){e.data=e.data||[],e.pagination=e.pagination||{totalRecord:e.data.length},t.page.total=e.pagination.totalRecord,t.page.page=e.pagination.page,t.page.size=e.pagination.size,t.tableData.rowData=e.data,t.showTablePin=!1;for(var a=0;a<t.tableData.rowData.length;a++)t.getMonitor(t.tableData.rowData[a],a)})},config:function(t,e){var a=this;n.a.post(this.configDialog.urls.addOrUpdae,{},t).then(function(t){200!==t.code?a.$Dialog.error({content:"配置失败"}):(a[e].visible=!1,a.getList())}).catch(function(){})}},mounted:function(){}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ml20 mt30"},[a("d-input",{staticClass:"left mr10",staticStyle:{width:"10%"},attrs:{placeholder:t.keywordTip},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1),t._v(" "),t.$store.getters.isAdmin?a("d-button",{staticClass:"left mr10",attrs:{type:"primary"},on:{click:function(e){return t.openDialog("subscribeDialog")}}},[t._v("\n      订阅\n      "),a("icon",{staticStyle:{"margin-left":"5px"},attrs:{name:"plus-circle"}})],1):t._e()],1),t._v(" "),a("my-table",{attrs:{data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-detail-chart":t.goDetailChart,"on-current-change":t.handleCurrentChange,"on-detail":t.openDetailDialog,"on-config":t.openConfigDialog,"on-set-produce-weight":t.openWeightConfigDialog,"on-summary-chart":t.goSummaryChart,"on-performance-chart":t.goPerformanceChart}}),t._v(" "),a("my-dialog",{attrs:{dialog:t.subscribeDialog},on:{"on-dialog-cancel":function(e){return t.dialogCancel("subscribeDialog")}}},[a("subscribe",{ref:"subscribe",attrs:{search:t.search,type:t.type,colData:t.subscribeDialog.colData,searchUrl:t.subscribeDialog.urls.search,addUrl:t.subscribeDialog.urls.add,doSearch:t.subscribeDialog.doSearch},on:{"on-refresh":t.getList}})],1),t._v(" "),a("my-dialog",{attrs:{dialog:t.detailDialog},on:{"on-dialog-cancel":function(e){return t.dialogCancel("detailDialog")}}},[a("d-tabs",{on:{"on-change":t.handleTabChange}},[a("d-tab-pane",{attrs:{label:"分组",name:"partition",icon:"pocket"}},[a("partition",{ref:"partition",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,colData:t.detailDialog.partition.colData,namespace:t.detailDialog.namespace,type:t.type,doSearch:t.detailDialog.doSearch}})],1),t._v(" "),a("d-tab-pane",{attrs:{label:"客户端连接",name:"clientConnection",icon:"github"}},[a("client-connection",{ref:"clientConnection",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,namespace:t.detailDialog.namespace,type:t.type,doSearch:t.detailDialog.doSearch}})],1),t._v(" "),a("d-tab-pane",{attrs:{label:"Broker",name:"broker",icon:"file-text"}},[a("broker",{ref:"broker",attrs:{app:t.detailDialog.app,topic:t.detailDialog.topic,namespace:t.detailDialog.namespace,type:t.type,doSearch:t.detailDialog.doSearch}})],1)],1)],1),t._v(" "),a("my-dialog",{attrs:{dialog:t.configDialog},on:{"on-dialog-confirm":t.configConfirm,"on-dialog-cancel":function(e){return t.dialogCancel("configDialog")}}},[a("producer-config-form",{ref:"configForm",attrs:{data:t.configData}})],1),t._v(" "),a("my-dialog",{attrs:{dialog:t.produceWeightDialog},on:{"on-dialog-confirm":t.weightConfigConfirm,"on-dialog-cancel":function(e){return t.dialogCancel("produceWeightDialog")}}},[a("producer-weight",{ref:"weightForm",attrs:{weights:t.produceWeightDialog.weights,"producer-id":t.configData.producerId,search:t.produceWeightDialog.urls.search,update:t.produceWeightDialog.urls.update}})],1)],1)},staticRenderFns:[]};var D=a("VU/8")(m,b,!1,function(t){a("aACI")},"data-v-100159dc",null);e.default=D.exports}});
//# sourceMappingURL=0.0374415bdb7d7cfced34.js.map