webpackJsonp([34],{"0DWO":function(e,t){},Ftsv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("lcoF"),r=a("M3bc"),n={name:"audit-flow-form",mixins:[o.a],props:{type:0,data:{type:Object,default:function(){return{id:0,type:"",manualExecute:!0,applicantConfirm:!0,executeClass:"",executeMethod:"",description:"",status:1,auditNodes:[{nodeNo:0,auditRoles:"ADMIN",containAdmin:!0}]}}}},data:function(){var e=this;return{formData:this.data||{},urls:{},rules:{type:[{required:!0,message:"请输入类型",trigger:"change"},{pattern:/^[A-Z]+[A-Z_]{1,60}[A-Z]+$/,message:"格式不匹配",trigger:"change"}],executeClass:[{validator:function(t,a,o){return e.formData.manualExecute?e.formData.executeClass&&e.formData.executeClass.trim()?(e.formData.executeClass=e.formData.executeClass.trim(),o()):o(new Error("请输入手动执行类")):o()},trigger:"blur"}],description:[{max:512,message:"长度在 512 个字符以内",trigger:"blur"}],auditNodes:[{validator:function(e,t,a){var o=t.auditRoles;if(!o||!o.trim())return a(new Error("请输入审批角色Code，多个以英文逗号隔开"));if(null==o.match(/^[a-zA-Z]{3,50}(,[a-zA-Z]{3,50})*$/))return a(new Error("审批角色格式不匹配"));for(var r=o.trim().split(","),n=0;n<r.length;n++)"ADMIN"===r[n].toUpperCase()&&r.splice(n,1);return t.containAdmin&&r.push("ADMIN"),t.auditRoles=r.join(","),a()},trigger:"blur"}]},error:{auditNodes:[]}}},methods:{handlerManualExecuteChange:function(e){e||(this.formData.executeClass="",this.formData.executeMethod="")},addAuditNode:function(){this.formData.auditNodes.push({nodeNo:this.formData.auditNodes.length,auditRoles:"ADMIN",containAdmin:!0})},removeAuditNode:function(){var e=this.formData.auditNodes.nodeNo;-1!==e&&this.formData.auditNodes.splice(e,1)},handleAuditRolesChange:function(e){},getFormData:function(){for(var e=0;e<this.formData.auditNodes.length;e++){this.formData.auditNodes[e].nodeNo=e}return Object(r.e)(this.formData||{})}},mounted:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("d-form",{ref:"form",staticStyle:{height:"370px","overflow-y":"auto",width:"100%","padding-right":"50px"},attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[a("d-form-item",{attrs:{label:"类型:",prop:"type"}},[a("d-input",{attrs:{placeholder:"请输入用户类型，仅支持英文大写和-"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),e._v(" "),a("d-form-item",{attrs:{label:"用户确认:",prop:"applicantConfirm"}},[a("d-switch",{model:{value:e.formData.applicantConfirm,callback:function(t){e.$set(e.formData,"applicantConfirm",t)},expression:"formData.applicantConfirm"}})],1),e._v(" "),a("d-form-item",{attrs:{label:"手动执行:",prop:"manualExecute"},on:{change:e.handlerManualExecuteChange}},[a("d-switch",{model:{value:e.formData.manualExecute,callback:function(t){e.$set(e.formData,"manualExecute",t)},expression:"formData.manualExecute"}})],1),e._v(" "),e.formData.manualExecute?a("div",[a("d-form-item",{attrs:{label:"手动执行类:",prop:"executeClass"}},[a("d-input",{attrs:{placeholder:"请输入手动执行调用的service，英文大小写格式"},model:{value:e.formData.executeClass,callback:function(t){e.$set(e.formData,"executeClass",t)},expression:"formData.executeClass"}})],1),e._v(" "),a("d-form-item",{attrs:{label:"手动执行方法:",prop:"executeMethod"}},[a("d-input",{attrs:{placeholder:"请输入，默认为execute"},model:{value:e.formData.executeMethod,callback:function(t){e.$set(e.formData,"executeMethod",t)},expression:"formData.executeMethod"}})],1)],1):e._e(),e._v(" "),a("d-form-item",{attrs:{label:"备注:",prop:"description"}},[a("d-input",{attrs:{type:"textarea",rows:"2",placeholder:"请输入备注"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),e._v(" "),e._l(e.formData.auditNodes,function(t,o){return a("d-form-item",{key:t.nodeNo,attrs:{label:"节点"+o,error:e.error.auditNodes[o],required:!0,prop:"auditNodes."+o,rules:e.rules.auditNodes}},[a("d-input",{attrs:{type:"textarea",rows:"2",placeholder:"请输入审批角色code,仅支持大小写字母，多个之间以英文逗号隔开"},on:{change:e.handleAuditRolesChange},model:{value:t.auditRoles,callback:function(a){e.$set(t,"auditRoles",a)},expression:"auditNode.auditRoles"}}),e._v(" "),a("span",[e._v("授权管理员：")]),a("d-switch",{model:{value:t.containAdmin,callback:function(a){e.$set(t,"containAdmin",a)},expression:"auditNode.containAdmin"}}),e._v(" "),a("d-button",{on:{click:function(a){return a.preventDefault(),e.addAuditNode(t)}}},[e._v("添加")]),e._v(" "),a("d-button",{on:{click:function(a){return a.preventDefault(),e.removeAuditNode(t)}}},[e._v("删除")])],1)})],2)],1)},staticRenderFns:[]};var u=a("VU/8")(n,i,!1,function(e){a("0DWO")},"data-v-62b6fbef",null);t.default=u.exports}});
//# sourceMappingURL=34.0877c0f9aab72ac7c37a.js.map