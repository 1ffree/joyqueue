{"version":3,"sources":["webpack:///src/views/topic/partitionGroup.vue","webpack:///./src/views/topic/partitionGroup.vue?baa9","webpack:///./src/views/topic/partitionGroup.vue"],"names":["partitionGroup","name","components","GroupPosition","groupPosition","myTable","myDialog","groupDetail","groupScale","groupMerge","groupNew","mixins","crud","props","showHostChart","type","Boolean","default","showBrokerChart","data","urls","search","del","getBroker","addPartition","removePartition","getMonitor","getUrl","searchData","topic","id","this","$route","query","code","namespace","namespaceId","namespaceCode","keyword","searchRules","tableData","rowData","colData","title","width","key","render","h","params","label","item","electType","formatter","leader","ip","btns","txt","method","groupDetailDialog","visible","showFooter","groupDetailDialogData","positionDialog","positionDialogData","groupScaleDialog","groupScaleDialogData","groupMergeDialog","groupMergeDialogData","addPartitionDialog","addPartitionDialogData","removePartitionDialog","removePartitionDialogData","groupNewDialog","groupNewDialogData","replicaGroups","partitions","newGroupData","computed","methods","getList","_this","showTablePin","pagination","page","size","apiRequest","post","urlOrigin","then","totalRecord","length","total","i","_this2","get","$set","goBrokerChart","_this3","url","indexOf","endsWith","Object","common","window","open","goHostChart","_this4","goDetail","groupNo","groupDetailConfirm","groupDetailCancel","goPosition","positionConfirm","positionCancel","groupScaleConfirm","groupScaleCancel","groupNewConfirm","groupNewCancel","groupMergeConfirm","groupMergeCancel","addPartitionConfirm","_this5","partitionsCount","addPartitionCancel","removePartitionConfirm","_this6","removePartitionCancel","_this7","topicUpdate","$emit","afterDel","mounted","topic_partitionGroup","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","click","_v","staticStyle","margin-left","_e","showPin","on-size-change","handleSizeChange","on-current-change","handleCurrentChange","on-view-detail","on-scale","on-merge","on-del","on-addPartition","on-removePartition","on-position","dialog","on-dialog-confirm","$event","on-dialog-cancel","placeholder","model","value","callback","$$v","expression","slot","on-partition-group-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/27.6ff8dd44c799cc60e27e.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"ml20 mt30\">\r\n      <d-button type=\"primary\" @click=\"groupNew\" class=\"left mr10\">\r\n        扩容\r\n        <icon name=\"plus-circle\" style=\"margin-left: 5px;\"/>\r\n      </d-button>\r\n      <d-button type=\"primary\" v-if=\"showBrokerChart\" @click=\"goBrokerChart\" class=\"left mr10\">\r\n        Broker监控\r\n        <icon name=\"bar-chart\" style=\"margin-left: 5px;\"/>\r\n      </d-button>\r\n      <d-button type=\"primary\" v-if=\"showHostChart\" @click=\"goHostChart\" class=\"left mr10\">\r\n        主机监控\r\n        <icon name=\"bar-chart\" style=\"margin-left: 5px;\"/>\r\n      </d-button>\r\n    </div>\r\n    <my-table :data=\"tableData\" :showPin=\"showTablePin\" :page=\"page\" @on-size-change=\"handleSizeChange\"\r\n              @on-current-change=\"handleCurrentChange\" @on-view-detail=\"goDetail\" @on-scale=\"groupScale\"\r\n              @on-merge=\"groupMerge\" @on-del=\"del\" @on-addPartition=\"addPartition\" @on-removePartition=\"removePartition\" @on-position=\"goPosition\">\r\n    </my-table>\r\n\r\n    <!--详情-->\r\n    <my-dialog :dialog=\"groupDetailDialog\" @on-dialog-confirm=\"groupDetailConfirm()\" @on-dialog-cancel=\"groupDetailCancel()\">\r\n      <group-detail :data=\"groupDetailDialogData\"></group-detail>\r\n    </my-dialog>\r\n    <!--添加节点-->\r\n    <my-dialog :dialog=\"groupScaleDialog\" @on-dialog-confirm=\"groupScaleConfirm()\" @on-dialog-cancel=\"groupScaleCancel()\" >\r\n      <group-scale :data=\"groupScaleDialogData\"  ></group-scale>\r\n    </my-dialog>\r\n    <!--移除节点-->\r\n    <my-dialog :dialog=\"groupMergeDialog\" @on-dialog-confirm=\"groupMergeConfirm()\" @on-dialog-cancel=\"groupMergeCancel()\"  >\r\n      <group-merge :data=\"groupMergeDialogData\"  ></group-merge>\r\n    </my-dialog>\r\n    <!--主从同步-->\r\n    <my-dialog :dialog=\"positionDialog\" @on-dialog-confirm=\"positionConfirm()\" @on-dialog-cancel=\"positionCancel()\">\r\n      <group-position :data=\"positionDialogData\"></group-position>\r\n    </my-dialog>\r\n    <!--增加分区数-->\r\n    <my-dialog :dialog=\"addPartitionDialog\" @on-dialog-confirm=\"addPartitionConfirm()\" @on-dialog-cancel=\"addPartitionCancel()\"  >\r\n      <d-input v-model=\"addPartitionDialogData.partitionCount\" placeholder=\"请输入增加分区数\" style=\"width: 400px\">\r\n        <span slot=\"prepend\">增加分区数</span>\r\n      </d-input>\r\n    </my-dialog>\r\n    <!--减少分区数-->\r\n    <my-dialog :dialog=\"removePartitionDialog\" @on-dialog-confirm=\"removePartitionConfirm()\" @on-dialog-cancel=\"removePartitionCancel()\"  >\r\n      <d-input v-model=\"removePartitionDialogData.partitionCount\" placeholder=\"请输入减少分区数\" style=\"width: 400px\">\r\n        <span slot=\"prepend\">减少分区数</span>\r\n      </d-input>\r\n    </my-dialog>\r\n    <!--扩容-->\r\n    <my-dialog :dialog=\"groupNewDialog\" @on-dialog-confirm=\"groupNewConfirm()\" @on-dialog-cancel=\"groupNewCancel()\">\r\n      <group-new :data=\"groupNewDialogData\" @on-dialog-confirm=\"groupNewConfirm()\" @on-dialog-cancel=\"groupNewCancel()\"  @on-partition-group-change=\"topicUpdate\"></group-new>\r\n    </my-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apiRequest from '../../utils/apiRequest.js'\r\nimport myTable from '../../components/common/myTable.vue'\r\nimport myDialog from '../../components/common/myDialog.vue'\r\nimport groupDetail from './groupDetail.vue'\r\nimport groupScale from './groupScale.vue'\r\nimport GroupPosition from './groupPosition.vue'\r\nimport groupMerge from './groupMerge.vue'\r\nimport groupNew from './groupNew.vue'\r\nimport crud from '../../mixins/crud.js'\r\nimport {getTopicCode} from '../../utils/common.js'\r\n\r\nexport default {\r\n  name: '',\r\n  components: {\r\n    GroupPosition,\r\n    myTable,\r\n    myDialog,\r\n    groupDetail,\r\n    groupScale,\r\n    groupMerge,\r\n    groupNew\r\n  },\r\n  mixins: [ crud ],\r\n  props: {\r\n    showHostChart: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    showBrokerChart: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      urls: {\r\n        search: `/partitionGroup/search`,\r\n        del: `/partitionGroup/delete`,\r\n        getBroker: `/broker/get`,\r\n        addPartition: `/partitionGroup/addPartition`,\r\n        removePartition: `/partitionGroup/removePartition`,\r\n        getMonitor: `/monitor`,\r\n        getUrl: `/grafana/getRedirectUrl`\r\n      },\r\n      searchData: {\r\n        topic: {\r\n          id: this.$route.query.id,\r\n          code: this.$route.query.code\r\n        },\r\n        namespace: {\r\n          id: this.$route.query.namespaceId,\r\n          code: this.$route.query.namespaceCode\r\n        },\r\n        keyword: ''\r\n      },\r\n      searchRules: {\r\n      },\r\n      tableData: {\r\n        rowData: [],\r\n        colData: [\r\n          {\r\n            title: 'group',\r\n            width: '2%',\r\n            key: 'groupNo'\r\n          },\r\n          {\r\n            title: 'partitions',\r\n            width: '15%',\r\n            key: 'partitions'\r\n          },\r\n          {\r\n            title: '选举类型',\r\n            width: '5%',\r\n            key: 'electType',\r\n            render: (h, params) => {\r\n              let label\r\n              switch (params.item.electType) {\r\n                case 0:\r\n                  label = 'raft'\r\n                  break\r\n                case 1:\r\n                  label = 'fix'\r\n                  break\r\n              }\r\n              return h('label', {}, label)\r\n            }\r\n          },\r\n          {\r\n            title: '副本数',\r\n            width: '2%',\r\n            key: 'replicas'\r\n          },\r\n          {\r\n            title: '当前leader',\r\n            width: '15%',\r\n            key: 'ip',\r\n            formatter (item) {\r\n              return item.leader+\":\"+item.ip;\r\n            }\r\n          },\r\n          {\r\n            title: '推荐leader',\r\n            width: '10%',\r\n            key: 'recLeader'\r\n          },\r\n          {\r\n            title: 'isr',\r\n            key: 'isr'\r\n          },\r\n          {\r\n            title: 'term',\r\n            width: '2%',\r\n            key: 'term'\r\n          }\r\n        ],\r\n        btns: [\r\n          {\r\n            txt: '详情',\r\n            method: 'on-view-detail'\r\n          },\r\n          {\r\n            txt: '增加副本数',\r\n            method: 'on-scale'\r\n          },\r\n          {\r\n            txt: '减副本数',\r\n            method: 'on-merge'\r\n          },\r\n          {\r\n            txt: '删除',\r\n            method: 'on-del'\r\n          },\r\n          {\r\n            txt: '增加分区',\r\n            method: 'on-addPartition'\r\n          },\r\n          {\r\n            txt: '减少分区',\r\n            method: 'on-removePartition'\r\n          },\r\n          {\r\n            txt: '主从同步监控',\r\n            method: 'on-position'\r\n          }\r\n        ]\r\n      },\r\n      groupDetailDialog: {\r\n        visible: false,\r\n        title: '详情',\r\n        width: 800,\r\n        showFooter: false\r\n      },\r\n      groupDetailDialogData: {},\r\n      positionDialog: {\r\n        visible: false,\r\n          title: '主从同步监控',\r\n          width: 800,\r\n          showFooter: false\r\n      },\r\n      positionDialogData: {},\r\n      groupScaleDialog: {\r\n        visible: false,\r\n        title: '增加副本',\r\n        width: 800,\r\n        showFooter: false\r\n      },\r\n      groupScaleDialogData: {},\r\n      groupMergeDialog: {\r\n        visible: false,\r\n          title: '减少副本',\r\n          width: 800,\r\n          showFooter: false\r\n      },\r\n      groupMergeDialogData: {},\r\n      addPartitionDialog: {\r\n        visible: false,\r\n          title: '增加分区数',\r\n          width: 500,\r\n          showFooter: true\r\n      },\r\n      addPartitionDialogData: {},\r\n      removePartitionDialog: {\r\n        visible: false,\r\n          title: '减少分区数',\r\n          width: 800,\r\n          showFooter: true\r\n      },\r\n      removePartitionDialogData: {},\r\n      groupNewDialog: {\r\n        visible: false,\r\n          title: '详情',\r\n          width: 800,\r\n          showFooter: false\r\n      },\r\n      groupNewDialogData: {\r\n        topic: this.$route.query.topic,\r\n          namespace: this.$route.query.namespace,\r\n          electType: 0,\r\n          replicaGroups: [],\r\n          partitions: 0\r\n      },\r\n      newGroupData: {\r\n      }\r\n    }\r\n    },\r\n    computed: {\r\n    },\r\n    methods: {\r\n      // 查询\r\n      getList () {\r\n        this.showTablePin = true\r\n        let data = {\r\n          pagination: {\r\n            page: this.page.page,\r\n            size: this.page.size\r\n          },\r\n          query: {\r\n            topic: this.searchData.topic,\r\n            namespace: this.searchData.namespace,\r\n            keyword: this.searchData.keyword\r\n          }\r\n        }\r\n        apiRequest.post(this.urlOrigin.search, {}, data).then((data) => {\r\n          data.data = data.data || []\r\n        data.pagination = data.pagination || {\r\n          totalRecord: data.data.length\r\n        }\r\n        this.page.total = data.pagination.totalRecord\r\n        this.page.page = data.pagination.page\r\n        this.page.size = data.pagination.size\r\n        this.tableData.rowData = data.data\r\n        for (var i = 0; i < this.tableData.rowData.length; i++) {\r\n          this.getBroker(this.tableData.rowData, i)\r\n        }\r\n        this.showTablePin = false\r\n      })\r\n      },\r\n      getBroker (rowData, i) {\r\n        apiRequest.get(this.urlOrigin.getBroker + '/' + rowData[i].leader).then((data) => {\r\n          this.tableData.rowData[i].ip = data.data.ip\r\n        this.$set(this.tableData.rowData, i, this.tableData.rowData[i])\r\n      })\r\n      },\r\n      goBrokerChart () {\r\n        apiRequest.get(this.urls.getUrl + '/broker', {}, {}).then((data) => {\r\n          let url = data.data || ''\r\n          if (url.indexOf('?') < 0) {\r\n          url += '?'\r\n        } else if (!url.endsWith('?')) {\r\n          url += '&'\r\n        }\r\n        url = url + 'var-topic=' + getTopicCode(this.searchData.topic, this.searchData.namespace)\r\n        window.open(url)\r\n      })\r\n      },\r\n      goHostChart () {\r\n        apiRequest.get(this.urls.getUrl + '/host', {}, {}).then((data) => {\r\n          let url = data.data || ''\r\n          if (url.indexOf('?') < 0) {\r\n          url += '?'\r\n        } else if (!url.endsWith('?')) {\r\n          url += '&'\r\n        }\r\n        url = url + 'var-topic=' + getTopicCode(this.searchData.topic, this.searchData.namespace)\r\n        window.open(url)\r\n      })\r\n      },\r\n      goDetail (item) {\r\n        this.groupDetailDialogData = {groupNo: item.groupNo, topic: this.searchData.topic, namespace: this.searchData.namespace}\r\n        this.groupDetailDialog.visible = true\r\n      },\r\n      groupDetailConfirm () {\r\n\r\n      },\r\n      groupDetailCancel () {\r\n        this.groupDetailDialog.visible = false\r\n      },\r\n      goPosition (item) {\r\n        this.positionDialogData = {groupNo: item.groupNo, topic: this.searchData.topic, namespace: this.searchData.namespace}\r\n        this.positionDialog.visible = true\r\n      },\r\n      positionConfirm () {\r\n\r\n      },\r\n      positionCancel () {\r\n        this.positionDialog.visible = false\r\n      },\r\n      groupScale (item) {\r\n        this.groupScaleDialogData = {groupNo: item.groupNo, topic: {id: item.topic.id, code: item.topic.code}, namespace: {id: item.namespace.id, code: item.namespace.code}}\r\n        this.groupScaleDialog.visible = true\r\n      },\r\n      groupScaleConfirm () {\r\n\r\n      },\r\n      groupScaleCancel () {\r\n        this.groupScaleDialog.visible = false\r\n      },\r\n      groupNewConfirm () {\r\n\r\n      },\r\n      groupNewCancel () {\r\n        this.groupNewDialog.visible = false\r\n        this.getList()\r\n      },\r\n      groupNew () {\r\n        this.groupNewDialogData = {topic: this.searchData.topic, namespace: this.searchData.namespace}\r\n        this.groupNewDialog.visible = true\r\n      },\r\n      groupMerge (item) {\r\n        this.groupMergeDialog.visible = true\r\n        this.groupMergeDialogData = {groupNo: item.groupNo, topic: {id: item.topic.id, code: item.topic.code}, namespace: {id: item.namespace.id, code: item.namespace.code}}\r\n      },\r\n      groupMergeConfirm () {\r\n\r\n      },\r\n      groupMergeCancel () {\r\n        this.groupMergeDialog.visible = false\r\n        this.getList()\r\n      },\r\n      addPartition (item) {\r\n        this.addPartitionDialog.visible = true\r\n        this.addPartitionDialogData = item\r\n      },\r\n      addPartitionConfirm () {\r\n        if (this.addPartitionDialogData.partitionsCount <= 0) {\r\n          return\r\n        }\r\n        apiRequest.post(this.urls.addPartition, {}, this.addPartitionDialogData).then(() => {\r\n          this.addPartitionDialog.visible = false\r\n        this.getList()\r\n      })\r\n      },\r\n      addPartitionCancel () {\r\n        this.addPartitionDialog.visible = false\r\n      },\r\n      removePartition (item) {\r\n        this.removePartitionDialog.visible = true\r\n        this.removePartitionDialogData = item\r\n      },\r\n      removePartitionConfirm () {\r\n        if (this.removePartitionDialogData.partitionsCount <= 0) {\r\n          return\r\n        }\r\n        apiRequest.post(this.urls.removePartition, {}, this.removePartitionDialogData).then((data) => {\r\n          this.removePartitionDialog.visible = false\r\n        this.getList()\r\n      })\r\n      },\r\n      removePartitionCancel () {\r\n        this.removePartitionDialog.visible = false\r\n      },\r\n      del (item) {\r\n        var data = item\r\n        apiRequest.post(this.urls.del, {}, data).then(() => {\r\n          this.getList()\r\n      })\r\n      },\r\n      topicUpdate () {\r\n        this.$emit('on-partition-group-change')\r\n      },\r\n      afterDel () {\r\n        this.topicUpdate()\r\n      }\r\n    },\r\n    mounted () {\r\n      // this.getList();\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n  .label{text-align: right; line-height: 32px;}\r\n  .val{}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/topic/partitionGroup.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"ml20 mt30\"},[_c('d-button',{staticClass:\"left mr10\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.groupNew}},[_vm._v(\"\\n      扩容\\n      \"),_c('icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":\"plus-circle\"}})],1),_vm._v(\" \"),(_vm.showBrokerChart)?_c('d-button',{staticClass:\"left mr10\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goBrokerChart}},[_vm._v(\"\\n      Broker监控\\n      \"),_c('icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":\"bar-chart\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.showHostChart)?_c('d-button',{staticClass:\"left mr10\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goHostChart}},[_vm._v(\"\\n      主机监控\\n      \"),_c('icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":\"bar-chart\"}})],1):_vm._e()],1),_vm._v(\" \"),_c('my-table',{attrs:{\"data\":_vm.tableData,\"showPin\":_vm.showTablePin,\"page\":_vm.page},on:{\"on-size-change\":_vm.handleSizeChange,\"on-current-change\":_vm.handleCurrentChange,\"on-view-detail\":_vm.goDetail,\"on-scale\":_vm.groupScale,\"on-merge\":_vm.groupMerge,\"on-del\":_vm.del,\"on-addPartition\":_vm.addPartition,\"on-removePartition\":_vm.removePartition,\"on-position\":_vm.goPosition}}),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.groupDetailDialog},on:{\"on-dialog-confirm\":function($event){return _vm.groupDetailConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupDetailCancel()}}},[_c('group-detail',{attrs:{\"data\":_vm.groupDetailDialogData}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.groupScaleDialog},on:{\"on-dialog-confirm\":function($event){return _vm.groupScaleConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupScaleCancel()}}},[_c('group-scale',{attrs:{\"data\":_vm.groupScaleDialogData}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.groupMergeDialog},on:{\"on-dialog-confirm\":function($event){return _vm.groupMergeConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupMergeCancel()}}},[_c('group-merge',{attrs:{\"data\":_vm.groupMergeDialogData}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.positionDialog},on:{\"on-dialog-confirm\":function($event){return _vm.positionConfirm()},\"on-dialog-cancel\":function($event){return _vm.positionCancel()}}},[_c('group-position',{attrs:{\"data\":_vm.positionDialogData}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.addPartitionDialog},on:{\"on-dialog-confirm\":function($event){return _vm.addPartitionConfirm()},\"on-dialog-cancel\":function($event){return _vm.addPartitionCancel()}}},[_c('d-input',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请输入增加分区数\"},model:{value:(_vm.addPartitionDialogData.partitionCount),callback:function ($$v) {_vm.$set(_vm.addPartitionDialogData, \"partitionCount\", $$v)},expression:\"addPartitionDialogData.partitionCount\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"增加分区数\")])])],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.removePartitionDialog},on:{\"on-dialog-confirm\":function($event){return _vm.removePartitionConfirm()},\"on-dialog-cancel\":function($event){return _vm.removePartitionCancel()}}},[_c('d-input',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请输入减少分区数\"},model:{value:(_vm.removePartitionDialogData.partitionCount),callback:function ($$v) {_vm.$set(_vm.removePartitionDialogData, \"partitionCount\", $$v)},expression:\"removePartitionDialogData.partitionCount\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"减少分区数\")])])],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.groupNewDialog},on:{\"on-dialog-confirm\":function($event){return _vm.groupNewConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupNewCancel()}}},[_c('group-new',{attrs:{\"data\":_vm.groupNewDialogData},on:{\"on-dialog-confirm\":function($event){return _vm.groupNewConfirm()},\"on-dialog-cancel\":function($event){return _vm.groupNewCancel()},\"on-partition-group-change\":_vm.topicUpdate}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-42d3eb78\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/topic/partitionGroup.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-42d3eb78\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./partitionGroup.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./partitionGroup.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./partitionGroup.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-42d3eb78\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./partitionGroup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-42d3eb78\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/topic/partitionGroup.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}