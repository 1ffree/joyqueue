webpackJsonp([12,35],{"8j8X":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("T0gc"),o=a("fo4W"),i=a("zHY+"),l=a("95hR"),s={name:"audit-role",components:{myTable:r.a,myDialog:o.a,auditRoleForm:i.default},mixins:[l.a],data:function(){return{searchData:{keyword:""},tableData:{rowData:[],colData:[{title:"ID",key:"id",width:"7%"},{title:"代码",key:"code",width:"10%"},{title:"名称",key:"name",width:"10%"},{title:"查询SQL",key:"sql",width:"40%"},{title:"指定审批人",key:"userCodes",width:"20%"}],btns:[{txt:"编辑",method:"on-edit"},{txt:"删除",method:"on-del"}]},addDialog:{visible:!1,title:"新建审批角色",showFooter:!0,scrollable:!0,width:560},addData:{},editDialog:{visible:!1,title:"编辑审批角色",showFooter:!0,width:560},editData:{}}},methods:{openDialog:function(e){this[e].visible=!0}},mounted:function(){this.getList()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ml20 mt30"},[a("d-input",{staticClass:"left mr10",staticStyle:{width:"20%"},attrs:{placeholder:"请输入代码/名称"},model:{value:e.searchData.keyword,callback:function(t){e.$set(e.searchData,"keyword",t)},expression:"searchData.keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:e.getList},slot:"suffix"})],1),e._v(" "),a("d-button",{attrs:{type:"primary"},on:{click:function(t){return e.openDialog("addDialog","addForm")}}},[e._v("新建审批角色"),a("icon",{staticStyle:{"margin-left":"5px"},attrs:{name:"plus-circle"}})],1)],1),e._v(" "),a("my-table",{attrs:{data:e.tableData,showPin:e.showTablePin,page:e.page},on:{"on-size-change":e.handleSizeChange,"on-current-change":e.handleCurrentChange,"on-selection-change":e.handleSelectionChange,"on-edit":e.edit,"on-del":e.del}}),e._v(" "),a("my-dialog",{attrs:{dialog:e.addDialog},on:{"on-dialog-confirm":function(t){return e.addConfirm()},"on-dialog-cancel":function(t){return e.dialogCancel("addDialog")}}},[a("audit-role-form",{ref:"addForm",attrs:{type:e.$store.getters.addFormType}})],1),e._v(" "),a("my-dialog",{attrs:{dialog:e.editDialog},on:{"on-dialog-confirm":function(t){return e.editConfirm()},"on-dialog-cancel":function(t){return e.dialogCancel("editDialog")}}},[a("audit-role-form",{ref:"editForm",attrs:{data:e.editData,type:e.$store.getters.editFormType}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(s,n,!1,function(e){a("Txt0")},"data-v-cf5aa366",null);t.default=d.exports},Il3R:function(e,t){},Txt0:function(e,t){},"zHY+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lcoF"),o=a("X2Oc"),i={name:"audit-role-form",mixins:[r.a],props:{type:0,data:{type:Object,default:function(){return{id:0,code:"",name:"",sql:"",userCodes:"",description:"",status:1}}}},data:function(){var e=this;return{valueSetting:"SQL",formData:this.data||{},urls:{},rules:{code:[{required:!0,message:"请输入英文名",trigger:"change"},{pattern:/^[a-zA-Z]{3,50}$/,message:"英文名格式不匹配",trigger:"change"}],name:Object(o.h)(),sql:[{validator:function(t,a,r){return"USER"===e.valueSetting?(e.formData.sql="",r()):void 0===e.formData.sql||""===e.formData.sql.trim()?r(new Error("请输入查询SQL条件")):(e.formData.sql=e.formData.sql.trim(),e.formData.userCodes="",r())},trigger:"blur"}],userCodes:[{validator:function(t,a,r){return"SQL"===e.valueSetting?(e.formData.userCode="",r()):"ADMIN"===e.formData.code?(e.formData.sql="",e.formData.userCode="0",r()):(e.formData.sql="",e.formData.userCodes&&e.formData.userCodes.trim()?(e.formData.userCodes=e.formData.userCodes.trim().replace("，",",").toLowerCase(),r()):r(new Error("请输入指定审批人")))},trigger:"blur"}],description:[{max:512,message:"长度在 512 个字符以内",trigger:"blur"}]},error:{code:"",sql:"",userCodes:""}}},methods:{handleValueSettingChange:function(e){"SQL"===e?this.formData.userCodes="":"USER"===e&&(this.formData.sql="")}},mounted:function(){void 0!==this.formData.userCodes&&""!==this.formData.userCodes?this.valueSetting="USER":this.valueSetting="SQL"}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("d-form",{ref:"form",staticStyle:{height:"370px","overflow-y":"auto",width:"100%","padding-right":"50px"},attrs:{model:e.formData,rules:e.rules,"label-width":"100px"}},[a("d-form-item",{attrs:{label:"英文名:",error:e.error.code,prop:"code"}},[a("d-input",{attrs:{placeholder:e.$store.getters.placeholder.code},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),e._v(" "),a("d-form-item",{attrs:{label:"中文名:",prop:"name"}},[a("d-input",{attrs:{placeholder:e.$store.getters.placeholder.name},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("d-form-item",{attrs:{label:"定值方式:",prop:"userType"}},[a("d-radio-group",{attrs:{name:"radiogroup"},on:{"on-change":e.handleValueSettingChange},model:{value:e.valueSetting,callback:function(t){e.valueSetting=t},expression:"valueSetting"}},[a("d-radio",{attrs:{label:"SQL"}},[e._v("设置查询SQL")]),e._v(" "),a("d-radio",{attrs:{label:"USER"}},[e._v("指定审批人")])],1)],1),e._v(" "),"SQL"==e.valueSetting?a("div",[a("d-form-item",{attrs:{label:"查询SQL:",error:e.error.sql,prop:"sql"}},[a("d-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入审批人查询条件SQL，完整SQL为：SELECT u.* FROM user u WHERE + 查询条件SQL。查询条件SQL支持变量，格式:#{v},变量范围仅限apply表中存储的字段，包括payload中可解析的字段。"},model:{value:e.formData.sql,callback:function(t){e.$set(e.formData,"sql",t)},expression:"formData.sql"}})],1)],1):"USER"==e.valueSetting?a("div",[a("d-form-item",{attrs:{label:"指定审批人:",error:e.error.userCodes,prop:"userCodes"}},[a("d-input",{attrs:{type:"textarea",rows:"3",placeholder:"请输入指定审批人Erp(格式：英文小写)，支持多个审批人，以英文逗号格式"},model:{value:e.formData.userCodes,callback:function(t){e.$set(e.formData,"userCodes",t)},expression:"formData.userCodes"}})],1)],1):e._e(),e._v(" "),a("d-form-item",{attrs:{label:"备注:",prop:"description"}},[a("d-input",{attrs:{type:"textarea",rows:"2",placeholder:"请输入备注"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,l,!1,function(e){a("Il3R")},"data-v-60823cdd",null);t.default=s.exports}});
//# sourceMappingURL=12.cf5efbb627eb90b95238.js.map