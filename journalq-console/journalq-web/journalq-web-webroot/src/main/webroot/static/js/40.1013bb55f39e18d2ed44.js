webpackJsonp([40],{EzDH:function(t,a){},"NmI/":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("//Fk"),n=e.n(i),d=e("1a0f"),o=e("T0gc"),r=e("fo4W"),s=e("95hR"),c={name:"application",components:{myTable:o.a,myDialog:r.a},mixins:[s.a],data:function(){return{searchData:{ip:""},searchRules:{},tableData:{rowData:[],colData:[{title:"ID",key:"id"},{title:"IP",key:"ip"},{title:"机架",key:"rack"},{title:"交换机",key:"switchboard"},{title:"品牌",key:"vendor"},{title:"cpu核数",key:"cpuCapacity"},{title:"磁盘容量",key:"diskCapacity"},{title:"内存容量",key:"memCapacity"},{title:"标签",key:"labels"},{title:"状态",key:"status",render:function(t,a){var e="",i="";switch(a.item.status){case 0:e="禁用",i="error";break;case 1:e="启用",i="warning";break;case 2:e="已生成Broker",i="success"}return t("DButton",{props:{size:"small",borderless:!0,color:i}},e)}}],btns:[{txt:"编辑",method:"on-edit"},{txt:"删除",method:"on-del"}]},multipleSelection:[],addDialog:{visible:!1,title:"新建主机",showFooter:!0},addData:{ip:"",vendor:"",serverType:"",cpuCapacity:"",diskType:"",memCapacity:"",diskCapacity:""},editDialog:{visible:!1,title:"编辑主机",showFooter:!0},editData:{},rules:{ip:[{required:!0,message:"请填写ip",trigger:"change"}],vendor:[{required:!0,message:"请填写品牌",trigger:"change"}],memCapacity:[{required:!0,message:"请填写内存容量",trigger:"change"}],cpuCapacity:[{required:!0,message:"请填写cpu核数",trigger:"change"}],diskCapacity:[{required:!0,message:"请填写磁盘容量",trigger:"change"}]}}},methods:{openDialog:function(t){this[t].visible=!0},generateBroker:function(){var t=this,a=this.multipleSelection;if(a){for(var e="",i=0;i<a.length;i++){if(2===a[i].status)return void this.$Dialog.warning({content:"ID为["+a[i].id+"]的数据已经生成Broker，请重新选择！"});e=0===i?a[i].id:e+","+a[i].id}d.a.put(this.urlOrigin.generateBroker+"/"+e,{},a).then(function(a){t.editDialog.visible=!1,t.$Dialog.success({content:"生成成功"}),t.getList()})}else this.$Dialog.warning({content:"请先选择数据！"})},syncHosts:function(){var t=this;d.a.put(this.urlOrigin.sync,{},{}).then(function(a){t.$Dialog.success({content:"同步成功"}),t.getList()})},submitForm:function(t){var a=this;this.$refs[t].validate(function(e){if(!e)return a.$Message.error("参数异常"),!1;"addData"===t?a.addConfirm():"editData"===t&&a.editConfirm(),a.getList()})},beforeEdit:function(){var t=this;return new n.a(function(a,e){a({id:t.editData.id,ip:t.editData.ip,vendor:t.editData.vendor,cpuCapacity:t.editData.cpuCapacity,diskCapacity:t.editData.diskCapacity,memCapacity:t.editData.memCapacity})})}},mounted:function(){this.getList()}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"ml20 mt30"},[e("d-input",{staticClass:"left mr10",staticStyle:{width:"20%"},attrs:{placeholder:"请输入IP"},model:{value:t.searchData.ip,callback:function(a){t.$set(t.searchData,"ip",a)},expression:"searchData.ip"}},[e("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1),t._v(" "),e("d-button",{attrs:{type:"primary"},on:{click:function(a){return t.openDialog("addDialog")}}},[t._v("新建主机"),e("icon",{staticStyle:{"margin-left":"5px"},attrs:{name:"plus-circle"}})],1),t._v(" "),e("d-button",{attrs:{type:"primary"},on:{click:t.syncHosts}},[t._v("同步主机"),e("icon",{staticStyle:{"margin-left":"5px"},attrs:{name:"download"}})],1)],1),t._v(" "),e("my-table",{attrs:{optional:!0,data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange,"on-select-all":t.handleSelectionAll,"on-edit":t.edit,"on-del":t.del}}),t._v(" "),e("my-dialog",{attrs:{dialog:t.addDialog},on:{"on-dialog-confirm":function(a){return t.submitForm("addData")},"on-dialog-cancel":function(a){return t.addCancel()}}},[e("d-form",{ref:"addData",staticClass:"demo-ruleForm",attrs:{model:t.addData,rules:t.rules,"label-width":"120px"}},[e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"ip:",prop:"ip"}},[e("d-input",{model:{value:t.addData.ip,callback:function(a){t.$set(t.addData,"ip",a)},expression:"addData.ip"}})],1),t._v(" "),e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"品牌:",prop:"vendor"}},[e("d-input",{model:{value:t.addData.vendor,callback:function(a){t.$set(t.addData,"vendor",a)},expression:"addData.vendor"}})],1),t._v(" "),e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"cpu核数:",prop:"cpuCapacity"}},[e("d-input",{model:{value:t.addData.cpuCapacity,callback:function(a){t.$set(t.addData,"cpuCapacity",a)},expression:"addData.cpuCapacity"}})],1),t._v(" "),e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"硬盘容量:",prop:"diskCapacity"}},[e("d-input",{model:{value:t.addData.diskCapacity,callback:function(a){t.$set(t.addData,"diskCapacity",a)},expression:"addData.diskCapacity"}})],1),t._v(" "),e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"内存容量:",prop:"memCapacity"}},[e("d-input",{model:{value:t.addData.memCapacity,callback:function(a){t.$set(t.addData,"memCapacity",a)},expression:"addData.memCapacity"}})],1)],1)],1),t._v(" "),e("my-dialog",{attrs:{dialog:t.editDialog},on:{"on-dialog-confirm":function(a){return t.submitForm("editData")},"on-dialog-cancel":function(a){return t.editCancel()}}},[e("d-form",{ref:"editData",staticClass:"demo-ruleForm",attrs:{model:t.editData,rules:t.rules,"label-width":"120px"}},[e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"ip:",prop:"ip"}},[e("d-input",{model:{value:t.editData.ip,callback:function(a){t.$set(t.editData,"ip",a)},expression:"editData.ip"}})],1),t._v(" "),e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"品牌:",prop:"vendor"}},[e("d-input",{model:{value:t.editData.vendor,callback:function(a){t.$set(t.editData,"vendor",a)},expression:"editData.vendor"}})],1),t._v(" "),e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"cpu核数:",prop:"cpuCapacity"}},[e("d-input",{model:{value:t.editData.cpuCapacity,callback:function(a){t.$set(t.editData,"cpuCapacity",a)},expression:"editData.cpuCapacity"}})],1),t._v(" "),e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"硬盘容量:",prop:"diskCapacity"}},[e("d-input",{model:{value:t.editData.diskCapacity,callback:function(a){t.$set(t.editData,"diskCapacity",a)},expression:"editData.diskCapacity"}})],1),t._v(" "),e("d-form-item",{staticStyle:{width:"60%"},attrs:{label:"内存容量:",prop:"memCapacity"}},[e("d-input",{model:{value:t.editData.memCapacity,callback:function(a){t.$set(t.editData,"memCapacity",a)},expression:"editData.memCapacity"}})],1)],1)],1)],1)},staticRenderFns:[]};var p=e("VU/8")(c,l,!1,function(t){e("EzDH")},"data-v-4cc286d0",null);a.default=p.exports}});
//# sourceMappingURL=40.1013bb55f39e18d2ed44.js.map