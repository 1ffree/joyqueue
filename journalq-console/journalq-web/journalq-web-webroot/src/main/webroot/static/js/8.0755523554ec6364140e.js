webpackJsonp([8,23],{GoTj:function(t,a){},XB5r:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("1a0f"),o=e("T0gc"),r=e("95hR"),s={name:"",components:{myTable:o.a},props:{data:{type:Object,default:function(){return{}}},group:{type:Object,default:function(){return{}}}},mixins:[r.a],data:function(){return{urls:{search:"/broker/search",addBroker:"/brokerGroup/updateBroker"},searchData:{brokerGroupId:-1},tableData:{rowData:[{}],colData:[{title:"ID",key:"id"},{title:"IP",key:"ip"},{title:"端口",key:"port"},{title:"分组",key:"group.code"}],btns:[{txt:"添加",method:"on-add",bindKey:"status",bindVal:1}]},multipleSelection:[]}},computed:{addBrokerUrl:function(){return this.urlOrigin.addBroker}},methods:{addBroker:function(t){var a={id:t.id,group:this.group},e=this;this.$Dialog.confirm({title:"提示",content:"确定要添加吗？"}).then(function(){i.a.put(e.addBrokerUrl+"/"+t.id,null,a).then(function(t){e.getList()})}).catch(function(){})}},mounted:function(){}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"ml20 mt10"},[e("d-input",{staticClass:"left",staticStyle:{width:"60%"},attrs:{placeholder:"请输入要查询的IP/名称"},model:{value:t.searchData.keyword,callback:function(a){t.$set(t.searchData,"keyword",a)},expression:"searchData.keyword"}},[e("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1)],1),t._v(" "),e("my-table",{attrs:{data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange,"on-add":t.addBroker}})],1)},staticRenderFns:[]};var d=e("VU/8")(s,n,!1,function(t){e("GoTj")},"data-v-7f8968de",null);a.default=d.exports},aIxq:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("T0gc"),o=e("fo4W"),r=e("XB5r"),s=e("95hR"),n=e("1a0f"),d={name:"application",components:{myTable:i.a,myDialog:o.a,addBroker:r.default},mixins:[s.a],data:function(){return{group:{id:0,code:""},searchData:{keyword:""},searchRules:{},tableData:{rowData:[],colData:[{title:"ID",key:"id"},{title:"编码",key:"code"},{title:"名称",key:"name"},{title:"仅管理员",key:"status",formatter:function(t){return 2===t.status?"是":1===t.status?"否":void 0}}],btns:[{txt:"查看详情",method:"on-detail"},{txt:"编辑",method:"on-edit"},{txt:"删除",method:"on-del"},{txt:"添加Broker",method:"on-add-broker"}]},multipleSelection:[],addDialog:{visible:!1,title:"新建分组",showFooter:!0},addData:{code:"",name:"",status:1},editDialog:{visible:!1,title:"编辑分组",showFooter:!0},editData:{code:"",name:"",status:1},addBrokerDialog:{visible:!1,width:700,title:"添加Broker",showFooter:!1},brokerData:{}}},computed:{curLang:function(){return this.$i18n.locale}},methods:{openDialog:function(t){this[t].visible=!0,this.addData.code="",this.addData.name=""},goDetail:function(t){this.$router.push({name:"/"+this.curLang+"/setting/brokerGroup/detail",query:{id:t.id,code:t.code,name:t.name}})},addBroker:function(t,a){var e=this;this.group={id:t.id,code:t.code},this.addBrokerDialog.visible=!0,this.$nextTick(function(){e.$refs.broker.getList()})},submit:function(){return this.addData.code?this.addData.name?void this.addConfirm():(this.$Message.error("名称不能为空"),!1):(this.$Message.error("编码不能为空"),!1)},editSubmit:function(){return this.editData.code?this.editData.name?void this.editConfirm():(this.$Message.error("名称不能为空"),!1):(this.$Message.error("编码不能为空"),!1)},addBrokerCancel:function(t,a){this.addBrokerDialog.visible=!1},del:function(t,a){var e=this,i=this;this.$Dialog.confirm({title:"提示",content:"删除后分组绑定的broker会自动解除绑定，确定还要删除吗？"}).then(function(){"function"==typeof i.beforeDel&&i.beforeDel(t),n.a.delete(i.urlOrigin.del+"/"+t.id).then(function(a){a.code!==e.$store.getters.successCode?e.$Dialog.error({content:"删除失败"}):(e.$Message.success("删除成功"),"function"==typeof i.afterDel&&i.afterDel(t),i.getList())})}).catch(function(){})}},mounted:function(){this.getList()}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"ml20 mt30"},[e("d-input",{staticClass:"left mr10",staticStyle:{width:"20%"},attrs:{placeholder:"请输入编码/名称"},model:{value:t.searchData.keyword,callback:function(a){t.$set(t.searchData,"keyword",a)},expression:"searchData.keyword"}},[e("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:t.getList},slot:"suffix"})],1),t._v(" "),e("d-button",{attrs:{type:"primary"},on:{click:function(a){return t.openDialog("addDialog")}}},[t._v("新建分组"),e("icon",{staticStyle:{"margin-left":"5px"},attrs:{name:"plus-circle"}})],1)],1),t._v(" "),e("my-table",{attrs:{data:t.tableData,showPin:t.showTablePin,page:t.page},on:{"on-size-change":t.handleSizeChange,"on-current-change":t.handleCurrentChange,"on-selection-change":t.handleSelectionChange,"on-detail":t.goDetail,"on-add-broker":t.addBroker,"on-del":t.del,"on-edit":t.edit}}),t._v(" "),e("my-dialog",{attrs:{dialog:t.addDialog},on:{"on-dialog-confirm":function(a){return t.submit()},"on-dialog-cancel":function(a){return t.addCancel()}}},[e("grid-row",{staticClass:"mb10"},[e("grid-col",{staticClass:"label",attrs:{span:4}},[t._v("编码:")]),t._v(" "),e("grid-col",{attrs:{span:1}}),t._v(" "),e("grid-col",{staticClass:"val",attrs:{span:15}},[e("d-input",{model:{value:t.addData.code,callback:function(a){t.$set(t.addData,"code",a)},expression:"addData.code"}})],1)],1),t._v(" "),e("grid-row",{staticClass:"mb10"},[e("grid-col",{staticClass:"label",attrs:{span:4}},[t._v("名称:")]),t._v(" "),e("grid-col",{attrs:{span:1}}),t._v(" "),e("grid-col",{staticClass:"val",attrs:{span:15}},[e("d-input",{model:{value:t.addData.name,callback:function(a){t.$set(t.addData,"name",a)},expression:"addData.name"}})],1)],1),t._v(" "),e("grid-row",{staticClass:"mb10"},[e("grid-col",{staticClass:"label",attrs:{span:4}},[t._v("仅管理员:")]),t._v(" "),e("grid-col",{attrs:{span:1}}),t._v(" "),e("grid-col",{staticClass:"val",attrs:{span:15}},[e("d-radio-group",{model:{value:t.addData.status,callback:function(a){t.$set(t.addData,"status",a)},expression:"addData.status"}},[e("d-radio",{attrs:{label:2}},[t._v("是")]),t._v(" "),e("d-radio",{attrs:{label:1}},[t._v("否")])],1)],1)],1)],1),t._v(" "),e("my-dialog",{attrs:{dialog:t.editDialog},on:{"on-dialog-confirm":function(a){return t.editSubmit()},"on-dialog-cancel":function(a){return t.editCancel()}}},[e("grid-row",{staticClass:"mb10"},[e("grid-col",{staticClass:"label",attrs:{span:4}},[t._v("编码:")]),t._v(" "),e("grid-col",{attrs:{span:1}}),t._v(" "),e("grid-col",{staticClass:"val",attrs:{span:15}},[e("d-input",{model:{value:t.editData.code,callback:function(a){t.$set(t.editData,"code",a)},expression:"editData.code"}})],1)],1),t._v(" "),e("grid-row",{staticClass:"mb10"},[e("grid-col",{staticClass:"label",attrs:{span:4}},[t._v("名称:")]),t._v(" "),e("grid-col",{attrs:{span:1}}),t._v(" "),e("grid-col",{staticClass:"val",attrs:{span:15}},[e("d-input",{model:{value:t.editData.name,callback:function(a){t.$set(t.editData,"name",a)},expression:"editData.name"}})],1)],1),t._v(" "),e("grid-row",{staticClass:"mb10"},[e("grid-col",{staticClass:"label",attrs:{span:4}},[t._v("仅管理员:")]),t._v(" "),e("grid-col",{attrs:{span:1}}),t._v(" "),e("grid-col",{staticClass:"val",attrs:{span:15}},[e("d-radio-group",{model:{value:t.editData.status,callback:function(a){t.$set(t.editData,"status",a)},expression:"editData.status"}},[e("d-radio",{attrs:{label:2}},[t._v("是")]),t._v(" "),e("d-radio",{attrs:{label:1}},[t._v("否")])],1)],1)],1)],1),t._v(" "),e("my-dialog",{attrs:{dialog:t.addBrokerDialog},on:{"on-dialog-cancel":function(a){return t.addBrokerCancel()}}},[e("add-broker",{ref:"broker",attrs:{group:t.group,data:t.brokerData}})],1)],1)},staticRenderFns:[]};var c=e("VU/8")(d,l,!1,function(t){e("ia8p")},"data-v-b67bf35a",null);a.default=c.exports},ia8p:function(t,a){}});
//# sourceMappingURL=8.0755523554ec6364140e.js.map