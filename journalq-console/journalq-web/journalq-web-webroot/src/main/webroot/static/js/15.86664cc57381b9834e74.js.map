{"version":3,"sources":["webpack:///src/views/setting/taskForm.vue","webpack:///./src/views/setting/taskForm.vue?4d99","webpack:///./src/views/setting/taskForm.vue","webpack:///src/views/setting/task.vue","webpack:///./src/views/setting/task.vue?bffd","webpack:///./src/views/setting/task.vue"],"names":["taskForm","name","mixins","props","type","data","Object","default","mutex","referId","priority","daemons","url","cron","dispatchType","retry","status","formData","this","rules","required","message","trigger","setting_taskForm","render","_vm","_h","$createElement","_c","_self","ref","staticStyle","height","overflow-y","width","padding-right","attrs","model","label-width","label","prop","placeholder","value","callback","$$v","$set","expression","_v","color","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","task","components","myTable","myDialog","taskFrom","crud","searchData","keyword","newOrFailed","searchRules","deleteDialog","visible","tableData","rowData","colData","title","key","formatter","row","isException","btns","txt","method","bindKey","bindVal","addDialog","showFooter","addData","editDialog","editData","editSubmitData","statusEnum","methods","openDialog","dialog","console","log","state","item","val","_this","assign_default","apiRequest","put","urlOrigin","id","then","$Dialog","success","content","getList","enable","viewException","confirm","exception","mounted","setting_task","staticClass","slot","size","on","click","$event","margin-left","showPin","showTablePin","page","on-size-change","handleSizeChange","on-current-change","handleCurrentChange","on-selection-change","handleSelectionChange","on-del","del","on-enable","on-edit","edit","on-viewException","on-dialog-confirm","addConfirm","on-dialog-cancel","addCancel","$store","getters","addFormType","editConfirm","editFormType"],"mappings":"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","file":"static/js/15.86664cc57381b9834e74.js","sourcesContent":["<template>\n  <d-form :model=\"formData\" :rules=\"rules\" ref=\"form\" label-width=\"100px\" style=\"height: 350px; overflow-y:auto; width: 100%; padding-right: 20px\">\n    <d-form-item label=\"类型:\" prop=\"type\" style=\"width: 60%\">\n      <d-input style=\"width: 249px\" v-model=\"formData.type\" placeholder=\"由字母和点组成，如Topic.Update\"></d-input>\n    </d-form-item>\n    <d-form-item label=\"互斥类型:\" style=\"width: 60%\">\n      <d-input style=\"width: 249px\" v-model=\"formData.mutex\" placeholder=\"互斥任务类型,支持后缀*，如Topic.*\"></d-input>\n    </d-form-item>\n    <d-form-item label=\"关联主键:\" prop=\"referId\" style=\"width: 60%\">\n      <d-input style=\"width: 249px\" v-model=\"formData.referId\"></d-input>\n    </d-form-item>\n    <d-form-item label=\"优先级:\" prop=\"priority\" style=\"width: 60%\">\n      <d-input style=\"width: 249px\" v-model=\"formData.priority\"></d-input>\n    </d-form-item>\n    <d-form-item label=\"守护任务:\" prop=\"daemons\">\n      <d-radio-group v-model=\"formData.daemons\">\n        <d-radio :label=\"true\">是</d-radio>\n        <d-radio :label=\"false\">否</d-radio>\n        <span v-if=\"formData.daemons\" style=\"color:red;\">守护任务默认重试</span>\n      </d-radio-group>\n    </d-form-item>\n    <d-form-item label=\"参数:\" prop=\"url\" style=\"width: 60%\">\n      <d-input style=\"width: 249px\" v-model=\"formData.url\" placeholder=\"任务的参数，如?a=1&b=2\"></d-input>\n    </d-form-item>\n    <d-form-item label=\"表达式:\" prop=\"cron\" style=\"width: 60%\">\n      <d-input style=\"width: 249px\" v-model=\"formData.cron\" placeholder=\"cron表达式，如 0 5 0/1 * * ?\"></d-input>\n    </d-form-item>\n    <d-form-item label=\"派发类型:\" prop=\"dispatchType\">\n      <d-radio-group v-model=\"formData.dispatchType\">\n        <d-radio :label=\"0\">任意执行器</d-radio>\n        <d-radio :label=\"1\">原有执行器优先 </d-radio>\n        <d-radio :label=\"2\">必须原有执行器</d-radio>\n      </d-radio-group>\n    </d-form-item>\n    <d-form-item label=\"重试:\" prop=\"retry\">\n      <d-radio-group v-model=\"formData.retry\">\n        <d-radio :label=\"true\">是</d-radio>\n        <d-radio :label=\"false\">否</d-radio>\n      </d-radio-group>\n    </d-form-item>\n  </d-form>\n</template>\n\n<script>\nimport form from '../../mixins/form.js'\n\nexport default {\n  name: 'task-form',\n  mixins: [ form ],\n  props: {\n    type: 0, // add or edit form\n    data: {\n      type: Object,\n      default: function () {\n        return {\n          type: '',\n          mutex: '',\n          referId: 0,\n          priority: 0,\n          daemons: false,\n          url: '',\n          cron: '',\n          dispatchType: 0,\n          retry: true,\n          status: 1\n        }\n      }\n    }\n  },\n  data () {\n    return {\n      formData: this.data,\n      rules: {\n        type: [{required: true, message: '请填写类型', trigger: 'change'}],\n        referId: [{required: true, message: '请填写关联id', trigger: 'change'}],\n        priority: [{required: true, message: '请填优先级', trigger: 'change'}],\n        daemons: [{required: true, message: '请填写守护线程', trigger: 'change'}],\n        // url: [{required: true, message: '请填写url', trigger: 'change'}],\n        // cron: [{required: true, message: '请填写cron表达式', trigger: 'change'}],\n        dispatchType: [{required: true, message: '请填写派发类型', trigger: 'change'}],\n        retry: [{required: true, message: '请填写重试类型', trigger: 'change'}]\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/setting/taskForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('d-form',{ref:\"form\",staticStyle:{\"height\":\"350px\",\"overflow-y\":\"auto\",\"width\":\"100%\",\"padding-right\":\"20px\"},attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('d-form-item',{staticStyle:{\"width\":\"60%\"},attrs:{\"label\":\"类型:\",\"prop\":\"type\"}},[_c('d-input',{staticStyle:{\"width\":\"249px\"},attrs:{\"placeholder\":\"由字母和点组成，如Topic.Update\"},model:{value:(_vm.formData.type),callback:function ($$v) {_vm.$set(_vm.formData, \"type\", $$v)},expression:\"formData.type\"}})],1),_vm._v(\" \"),_c('d-form-item',{staticStyle:{\"width\":\"60%\"},attrs:{\"label\":\"互斥类型:\"}},[_c('d-input',{staticStyle:{\"width\":\"249px\"},attrs:{\"placeholder\":\"互斥任务类型,支持后缀*，如Topic.*\"},model:{value:(_vm.formData.mutex),callback:function ($$v) {_vm.$set(_vm.formData, \"mutex\", $$v)},expression:\"formData.mutex\"}})],1),_vm._v(\" \"),_c('d-form-item',{staticStyle:{\"width\":\"60%\"},attrs:{\"label\":\"关联主键:\",\"prop\":\"referId\"}},[_c('d-input',{staticStyle:{\"width\":\"249px\"},model:{value:(_vm.formData.referId),callback:function ($$v) {_vm.$set(_vm.formData, \"referId\", $$v)},expression:\"formData.referId\"}})],1),_vm._v(\" \"),_c('d-form-item',{staticStyle:{\"width\":\"60%\"},attrs:{\"label\":\"优先级:\",\"prop\":\"priority\"}},[_c('d-input',{staticStyle:{\"width\":\"249px\"},model:{value:(_vm.formData.priority),callback:function ($$v) {_vm.$set(_vm.formData, \"priority\", $$v)},expression:\"formData.priority\"}})],1),_vm._v(\" \"),_c('d-form-item',{attrs:{\"label\":\"守护任务:\",\"prop\":\"daemons\"}},[_c('d-radio-group',{model:{value:(_vm.formData.daemons),callback:function ($$v) {_vm.$set(_vm.formData, \"daemons\", $$v)},expression:\"formData.daemons\"}},[_c('d-radio',{attrs:{\"label\":true}},[_vm._v(\"是\")]),_vm._v(\" \"),_c('d-radio',{attrs:{\"label\":false}},[_vm._v(\"否\")]),_vm._v(\" \"),(_vm.formData.daemons)?_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"守护任务默认重试\")]):_vm._e()],1)],1),_vm._v(\" \"),_c('d-form-item',{staticStyle:{\"width\":\"60%\"},attrs:{\"label\":\"参数:\",\"prop\":\"url\"}},[_c('d-input',{staticStyle:{\"width\":\"249px\"},attrs:{\"placeholder\":\"任务的参数，如?a=1&b=2\"},model:{value:(_vm.formData.url),callback:function ($$v) {_vm.$set(_vm.formData, \"url\", $$v)},expression:\"formData.url\"}})],1),_vm._v(\" \"),_c('d-form-item',{staticStyle:{\"width\":\"60%\"},attrs:{\"label\":\"表达式:\",\"prop\":\"cron\"}},[_c('d-input',{staticStyle:{\"width\":\"249px\"},attrs:{\"placeholder\":\"cron表达式，如 0 5 0/1 * * ?\"},model:{value:(_vm.formData.cron),callback:function ($$v) {_vm.$set(_vm.formData, \"cron\", $$v)},expression:\"formData.cron\"}})],1),_vm._v(\" \"),_c('d-form-item',{attrs:{\"label\":\"派发类型:\",\"prop\":\"dispatchType\"}},[_c('d-radio-group',{model:{value:(_vm.formData.dispatchType),callback:function ($$v) {_vm.$set(_vm.formData, \"dispatchType\", $$v)},expression:\"formData.dispatchType\"}},[_c('d-radio',{attrs:{\"label\":0}},[_vm._v(\"任意执行器\")]),_vm._v(\" \"),_c('d-radio',{attrs:{\"label\":1}},[_vm._v(\"原有执行器优先 \")]),_vm._v(\" \"),_c('d-radio',{attrs:{\"label\":2}},[_vm._v(\"必须原有执行器\")])],1)],1),_vm._v(\" \"),_c('d-form-item',{attrs:{\"label\":\"重试:\",\"prop\":\"retry\"}},[_c('d-radio-group',{model:{value:(_vm.formData.retry),callback:function ($$v) {_vm.$set(_vm.formData, \"retry\", $$v)},expression:\"formData.retry\"}},[_c('d-radio',{attrs:{\"label\":true}},[_vm._v(\"是\")]),_vm._v(\" \"),_c('d-radio',{attrs:{\"label\":false}},[_vm._v(\"否\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7bb79e8c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/setting/taskForm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7bb79e8c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./taskForm.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./taskForm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./taskForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7bb79e8c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./taskForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7bb79e8c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/setting/taskForm.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <div class=\"ml20 mt30\">\n      <d-input v-model=\"searchData.keyword\" placeholder=\"请输入任务类型\" class=\"left mr10\" style=\"width: 20%\">\n        <icon name=\"search\" size=\"14\" color=\"#CACACA\" slot=\"suffix\" @click=\"getList\"></icon>\n      </d-input>\n      <d-button type=\"primary\" @click=\"openDialog('addDialog')\">新建任务<icon name=\"plus-circle\" style=\"margin-left: 5px;\"></icon></d-button>\n      <!--<d-button type=\"primary\" @click=\"startTasks\">启用<icon name=\"check-circle\" style=\"margin-left: 5px;\"></icon></d-button>-->\n    </div>\n    <my-table :data=\"tableData\" :showPin=\"showTablePin\" :page=\"page\" @on-size-change=\"handleSizeChange\"\n              @on-current-change=\"handleCurrentChange\" @on-selection-change=\"handleSelectionChange\"\n               @on-del=\"del\" @on-enable=\"enable\" @on-edit=\"edit\" @on-viewException=\"viewException\">\n    </my-table>\n    <my-dialog :dialog=\"addDialog\" @on-dialog-confirm=\"addConfirm()\" @on-dialog-cancel=\"addCancel()\">\n        <task-from ref=\"addForm\" :data=\"addData\" :type=\"$store.getters.addFormType\" />\n    </my-dialog>\n    <my-dialog :dialog=\"editDialog\" @on-dialog-confirm=\"editConfirm()\" @on-dialog-cancel=\"addCancel()\">\n      <task-from ref=\"editForm\" :data='editData' :type=\"$store.getters.editFormType\" />\n    </my-dialog>\n  </div>\n</template>\n\n<script>\nimport apiRequest from '../../utils/apiRequest.js'\nimport myTable from '../../components/common/myTable.vue'\nimport myDialog from '../../components/common/myDialog.vue'\nimport crud from '../../mixins/crud.js'\nimport taskFrom from './taskForm.vue'\nexport default {\n  name: 'task',\n  components: {\n    myTable,\n    myDialog,\n    taskFrom\n  },\n  mixins: [ crud ],\n  data () {\n    return {\n      searchData: {\n        keyword: '',\n        newOrFailed: 'true'\n      },\n      searchRules: {\n      },\n      deleteDialog: {\n        visible: false\n      },\n      tableData: {\n        rowData: [],\n        colData: [\n          {\n            title: 'ID',\n            key: 'id'\n          },\n          {\n            title: '任务类型',\n            key: 'type'\n          },\n          {\n            title: '互斥类型',\n            key: 'mutex'\n          },\n          // {\n          //   title:'数据中心',\n          //   key: 'dataCenter.code'\n          // },\n          {\n            title: '关联主键',\n            key: 'referId'\n          }, {\n            title: '优先级',\n            key: 'priority'\n          }, {\n            title: '参数',\n            key: 'url'\n          }, {\n            title: '表达式',\n            key: 'cron'\n          }, {\n            title: '派发类型',\n            key: 'dispatchType',\n            formatter (row) {\n              if (row.dispatchType === 0) {\n                return '任意执行器'\n              }\n              if (row.dispatchType === 1) {\n                return '原有执行器优先'\n              }\n              if (row.dispatchType === 2) {\n                return '必须派发给原有的执行器'\n              }\n            }\n          }, {\n            title: '守护任务',\n            key: 'daemons',\n            formatter (row) {\n              return row.daemons ? '是' : '否'\n            }\n          }, {\n            title: '重试',\n            key: 'retry',\n            formatter (row) {\n              return row.retry ? '是' : '否'\n            }\n          }, {\n            title: '重试次数',\n            key: 'retryCount'\n          }, {\n            title: '状态',\n            key: 'status',\n            formatter (row) {\n              if (row.status === 1) {\n                return '新建'\n              }\n              if (row.status === 0) {\n                return '审核中'\n              }\n              if (row.status === -1) {\n                return '删除'\n              }\n              if (row.status === 2) {\n                row.isException = true\n                return '失败需要重试'\n              }\n              if (row.status === 3) {\n                return '已派发'\n              }\n              if (row.status === 4) {\n                return '执行中'\n              }\n              if (row.status === 5) {\n                return '成功'\n              }\n              if (row.status === 6) {\n                row.isException = true\n                return '失败不重试'\n              }\n            }\n          }\n        ],\n        // 表格操作，如果需要根据特定值隐藏显示， 设置bindKey对应的属性名和bindVal对应的属性值\n        btns: [\n          {\n            txt: '编辑',\n            method: 'on-edit',\n            bindKey: 'status',\n            bindVal: 0\n          },\n          {\n            txt: '启用',\n            method: 'on-enable',\n            bindKey: 'status',\n            bindVal: 0\n          },\n          {\n            txt: '查看异常',\n            method: 'on-viewException',\n            bindKey: 'isException',\n            bindVal: 1\n          },\n          {\n            txt: '删除',\n            method: 'on-del'\n          }\n        ]\n      },\n      // multipleSelection: [],\n      addDialog: {\n        visible: false,\n        title: '新建任务',\n        showFooter: true\n      },\n      addData: {\n        type: '',\n        mutex: '',\n        referId: 0,\n        priority: 0,\n        daemons: false,\n        url: '',\n        cron: '',\n        dispatchType: 0,\n        retry: true,\n        status: 0\n      },\n      editDialog: {\n        visible: false,\n        title: '编辑任务',\n        showFooter: true\n      },\n      editData: {},\n      editSubmitData: {},\n      statusEnum: [\n        {'key': -1, 'value': '删除'},\n        {'key': 0, 'value': '审核中'},\n        {'key': 1, 'value': '新增'},\n        {'key': 2, 'value': '失败需要重试'},\n        {'key': 3, 'value': '已派发'},\n        {'key': 4, 'value': '执行中'},\n        {'key': 5, 'value': '成功'},\n        {'key': 6, 'value': '失败不重试'}\n      ]\n    }\n  },\n  methods: {\n    openDialog (dialog) {\n      this[dialog].visible = true\n      console.log(dialog)\n      if (dialog === 'addDialog') {\n        this.addData = {\n          type: '',\n          mutex: '',\n          referId: 0,\n          priority: 0,\n          daemons: false,\n          url: '',\n          cron: '',\n          dispatchType: 0,\n          retry: true,\n          status: 0\n        }\n      }\n    },\n    // submitAddForm(data){\n    //   if (data == false){\n    //     this.addData = false;\n    //   } else {\n    //     this.addData = Object.assign({}, data);\n    //   }\n    // },\n    // beforeAdd(){\n    //   this.$refs.addForm.submitForm();\n    //   return this.addData;\n    // },\n\n    state (item, val) {\n      let editData = Object.assign({}, item)\n      editData.status = val// 启用1，禁用0\n      apiRequest.put(this.urlOrigin.state + '/' + editData.id, {}, editData).then((data) => {\n        this.$Dialog.success({\n          content: '启用成功'\n        })\n        this.getList()\n      })\n    },\n    // 启用\n    enable (item) {\n      this.state(item, 1)\n    },\n    viewException (item) {\n      this.$Dialog.confirm({\n        title: '异常详情',\n        content: item.exception\n      })\n    }\n    // beforeEditData(item){\n    //   //editData need to be formatted, so copy item's properties\n    //   this.editData = Object.assign({}, item);\n    //   return this.editData;\n    // },\n    // submitEditForm(data){\n    //   if (data==false) {\n    //     this.editSubmitData = false;\n    //   } else {\n    //     this.editSubmitData = Object.assign({}, data);//false or formData\n    //   }\n    // },\n    // beforeEdit(){\n    //   this.$refs.editForm.submitForm();\n    //   return this.editSubmitData;\n    // }\n  },\n  mounted () {\n    this.getList()\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .label{text-align: right; line-height: 32px;}\n  .val{}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/setting/task.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"ml20 mt30\"},[_c('d-input',{staticClass:\"left mr10\",staticStyle:{\"width\":\"20%\"},attrs:{\"placeholder\":\"请输入任务类型\"},model:{value:(_vm.searchData.keyword),callback:function ($$v) {_vm.$set(_vm.searchData, \"keyword\", $$v)},expression:\"searchData.keyword\"}},[_c('icon',{attrs:{\"slot\":\"suffix\",\"name\":\"search\",\"size\":\"14\",\"color\":\"#CACACA\"},on:{\"click\":_vm.getList},slot:\"suffix\"})],1),_vm._v(\" \"),_c('d-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.openDialog('addDialog')}}},[_vm._v(\"新建任务\"),_c('icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":\"plus-circle\"}})],1)],1),_vm._v(\" \"),_c('my-table',{attrs:{\"data\":_vm.tableData,\"showPin\":_vm.showTablePin,\"page\":_vm.page},on:{\"on-size-change\":_vm.handleSizeChange,\"on-current-change\":_vm.handleCurrentChange,\"on-selection-change\":_vm.handleSelectionChange,\"on-del\":_vm.del,\"on-enable\":_vm.enable,\"on-edit\":_vm.edit,\"on-viewException\":_vm.viewException}}),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.addDialog},on:{\"on-dialog-confirm\":function($event){return _vm.addConfirm()},\"on-dialog-cancel\":function($event){return _vm.addCancel()}}},[_c('task-from',{ref:\"addForm\",attrs:{\"data\":_vm.addData,\"type\":_vm.$store.getters.addFormType}})],1),_vm._v(\" \"),_c('my-dialog',{attrs:{\"dialog\":_vm.editDialog},on:{\"on-dialog-confirm\":function($event){return _vm.editConfirm()},\"on-dialog-cancel\":function($event){return _vm.addCancel()}}},[_c('task-from',{ref:\"editForm\",attrs:{\"data\":_vm.editData,\"type\":_vm.$store.getters.editFormType}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-50ba1b84\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/setting/task.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-50ba1b84\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./task.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./task.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./task.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-50ba1b84\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./task.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-50ba1b84\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/setting/task.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}