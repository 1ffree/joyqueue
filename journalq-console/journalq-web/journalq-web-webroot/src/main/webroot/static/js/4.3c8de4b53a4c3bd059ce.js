webpackJsonp([4],{CFn6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("1a0f"),i=a("T0gc"),n=a("fo4W"),s=a("95hR"),c=a("X2Oc"),l=a("0IJX"),r=a.n(l),d={name:"application",components:{myTable:i.a,myDialog:n.a},mixins:[s.a],data:function(){var e=this,t=r.a[this.$i18n.locale].application;return{searchData:{keyword:""},searchRules:{},isOthers:!1,isNew:!1,tableData:{rowData:[],colData:[{title:t.colData.id,key:"id"},{title:t.colData.code,key:"code",render:function(t,a){return t("label",{style:{cursor:"pointer",color:"#3366FF"},on:{click:function(){e.$router.push({name:"/"+e.curLang+"/application/detail",query:{id:a.item.id,code:a.item.code}})}}},a.item.code)}},{title:t.colData.department,key:"department"},{title:t.colData.ownerCode,key:"owner.code"},{title:t.colData.system,key:"system",formatter:function(e){var t="";switch(e.source){case 1:t="JONE";break;case 2:t="JDOS";break;case 3:t="SURE";break;default:t="其他来源"}return t+"/"+e.system+"/"+e.aliasCode}}],btns:[{txt:t.colData.btnDetail,method:"on-view-detail"},{txt:t.colData.btnDelete,method:"on-del"}]},syncDialog:{visible:!1,title:"同步应用",showFooter:!0,rules:{code:Object(c.f)(),source:[{type:"number",required:!0,message:"请选择应用来源",trigger:"change"}],aliasCode:[{required:!0,message:"请选择来源应用代码",trigger:"change"}]},error:{code:""}},syncDialogData:{aliasCode:"",source:1,sourceName:"",code:"",owner:{code:""}}}},computed:{syncUrl:function(){return this.urlOrigin.sync},curLang:function(){return this.$i18n.locale},langConfig:function(){return r.a[this.curLang].application}},watch:{curLang:function(){var e=this;this.tableData={rowData:[],colData:[{title:this.langConfig.colData.id,key:"id"},{title:this.langConfig.colData.code,key:"code",render:function(t,a){return t("label",{style:{cursor:"pointer",color:"#3366FF"},on:{click:function(){e.$router.push({name:"/"+e.curLang+"/application/detail",query:{id:a.item.id,code:a.item.code}})}}},a.item.code)}},{title:this.langConfig.colData.department,key:"department"},{title:this.langConfig.colData.ownerCode,key:"owner.code"},{title:this.langConfig.colData.system,key:"system",formatter:function(e){var t="";switch(e.source){case 1:t="JONE";break;case 2:t="JDOS";break;case 2:t="SURE";break;default:t="其他来源"}return t+"/"+e.system+"/"+e.aliasCode}}],btns:[{txt:this.langConfig.colData.btnDetail,method:"on-view-detail"},{txt:this.langConfig.colData.btnDelete,method:"on-del"}]}}},methods:{del:function(e,t){var a=this,i=this;this.$Dialog.confirm({title:"提示",content:"删除时会自动将关联的用户和令牌删除，确定要删除吗？"}).then(function(){o.a.delete(i.urlOrigin.del+"/"+e.id).then(function(t){t.code!==a.$store.getters.successCode?a.$Dialog.error({content:"删除失败"}):(a.$Message.success("删除成功"),"function"==typeof i.afterDel&&i.afterDel(e),i.getList())})}).catch(function(){})},change:function(){0===this.syncDialogData.source?this.isOthers=!0:this.isOthers=!1},goDetail:function(e){this.$router.push({name:"/"+this.curLang+"/application/detail",query:{id:e.id,code:e.code}})},resetSyncDialog:function(){this.syncDialogData.code="",this.syncDialogData.source=1,this.syncDialogData.sourceName="",this.syncDialogData.aliasCode="",this.syncDialogData.owner.code=""},openNewDialog:function(){this.resetSyncDialog(),this.isNew=!0,this.syncDialog.visible=!0,this.syncDialogData.source=0,this.syncDialogData.sourceName="其他来源",this.syncDialog.title="新建应用"},openSyncDialog:function(){this.resetSyncDialog(),this.isOthers=!1,this.isNew=!1,this.syncDialog.visible=!0,this.syncDialog.source=1,this.syncDialog.title="同步应用"},syncConfirm:function(e){var t=this;this.isOthers&&""===this.syncDialogData.owner.code?this.$Message.error("新建应用,请咚咚联系jmq-support!"):this.$refs[e].validate(function(e){if(!e)return t.$Message.error("验证不通过！"),!1;o.a.post(t.syncUrl,{},t.syncDialogData).then(function(){t.syncDialog.visible=!1,t.getList()})})},syncCancel:function(){this.syncDialog.visible=!1}},mounted:function(){this.getList()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"ml20 mt30"},[a("d-input",{staticClass:"left mr10",staticStyle:{width:"12%"},attrs:{placeholder:e.langConfig.placeholder1},model:{value:e.searchData.keyword,callback:function(t){e.$set(e.searchData,"keyword",t)},expression:"searchData.keyword"}},[a("icon",{attrs:{slot:"suffix",name:"search",size:"14",color:"#CACACA"},on:{click:e.getList},slot:"suffix"})],1),e._v(" "),a("d-button",{attrs:{type:"primary"},on:{click:e.openSyncDialog}},[e._v(e._s(e.langConfig.syncApp)),a("icon",{staticStyle:{"margin-left":"5px"},attrs:{name:"download"}})],1)],1),e._v(" "),a("my-table",{attrs:{data:e.tableData,showPin:e.showTablePin,page:e.page},on:{"on-size-change":e.handleSizeChange,"on-current-change":e.handleCurrentChange,"on-selection-change":e.handleSelectionChange,"on-del":e.del,"on-view-detail":e.goDetail}}),e._v(" "),a("my-dialog",{attrs:{dialog:e.syncDialog},on:{"on-dialog-confirm":function(t){return e.syncConfirm("syncForm")},"on-dialog-cancel":function(t){return e.syncCancel()}}},[a("d-form",{ref:"syncForm",attrs:{model:e.syncDialogData,error:e.syncDialog.error.code,rules:e.syncDialog.rules,"label-width":"100px"}},[a("d-form-item",{attrs:{label:"英文名称：",prop:"code"}},[a("d-input",{staticStyle:{width:"80%"},attrs:{placeholder:"仅支持英文字母大小写和数字，首字母"},model:{value:e.syncDialogData.code,callback:function(t){e.$set(e.syncDialogData,"code",t)},expression:"syncDialogData.code"}})],1),e._v(" "),e.isNew?e._e():a("d-form-item",{attrs:{label:"应用来源:"}},[a("grid-row",[a("grid-col",{attrs:{span:6,prop:"aliasCode"}},[a("d-select",{staticStyle:{width:"100%"},attrs:{placeholder:"来源",value:"1"},on:{"on-change":function(t){return e.change()}},model:{value:e.syncDialogData.source,callback:function(t){e.$set(e.syncDialogData,"source",e._n(t))},expression:"syncDialogData.source"}},[a("d-option",{attrs:{value:1}},[e._v("JONE")]),e._v(" "),a("d-option",{attrs:{value:2}},[e._v("JDOS")]),e._v(" "),a("d-option",{attrs:{value:3}},[e._v("SURE")]),e._v(" "),a("d-option",{attrs:{value:0}},[e._v("其他来源")])],1)],1),e._v(" "),a("grid-col",{staticClass:"line",attrs:{span:1}}),e._v(" "),a("grid-col",{attrs:{span:12}},[e.isOthers?e.$store.getters.isAdmin||e.$store.getters.isTest?a("d-input",{staticStyle:{width:"100%"},attrs:{placeholder:"负责人erp"},model:{value:e.syncDialogData.owner.code,callback:function(t){e.$set(e.syncDialogData.owner,"code",t)},expression:"syncDialogData.owner.code"}}):a("d-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请联系管理员jmq_support",disabled:""},model:{value:e.syncDialogData.owner.code,callback:function(t){e.$set(e.syncDialogData.owner,"code",t)},expression:"syncDialogData.owner.code"}}):a("d-input",{staticStyle:{width:"100%"},attrs:{placeholder:"应用代码"},model:{value:e.syncDialogData.aliasCode,callback:function(t){e.$set(e.syncDialogData,"aliasCode",t)},expression:"syncDialogData.aliasCode"}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(d,u,!1,function(e){a("cu35")},"data-v-1ea9764f",null);t.default=g.exports},cu35:function(e,t){}});
//# sourceMappingURL=4.3c8de4b53a4c3bd059ce.js.map